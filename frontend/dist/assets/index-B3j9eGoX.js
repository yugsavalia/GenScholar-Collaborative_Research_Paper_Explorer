var WP=Object.defineProperty;var fx=n=>{throw TypeError(n)};var GP=(n,t,e)=>t in n?WP(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var I=(n,t,e)=>GP(n,typeof t!="symbol"?t+"":t,e),uv=(n,t,e)=>t.has(n)||fx("Cannot "+e);var a=(n,t,e)=>(uv(n,t,"read from private field"),e?e.call(n):t.get(n)),y=(n,t,e)=>t.has(n)?fx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),p=(n,t,e,i)=>(uv(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),A=(n,t,e)=>(uv(n,t,"access private method"),e);var De=(n,t,e,i)=>({set _(r){p(n,t,r,e)},get _(){return a(n,t,i)}});function XP(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function py(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var YE={exports:{}},gy={},KE={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=Symbol.for("react.element"),qP=Symbol.for("react.portal"),YP=Symbol.for("react.fragment"),KP=Symbol.for("react.strict_mode"),QP=Symbol.for("react.profiler"),ZP=Symbol.for("react.provider"),JP=Symbol.for("react.context"),tD=Symbol.for("react.forward_ref"),eD=Symbol.for("react.suspense"),nD=Symbol.for("react.memo"),iD=Symbol.for("react.lazy"),px=Symbol.iterator;function rD(n){return n===null||typeof n!="object"?null:(n=px&&n[px]||n["@@iterator"],typeof n=="function"?n:null)}var QE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZE=Object.assign,JE={};function hd(n,t,e){this.props=n,this.context=t,this.refs=JE,this.updater=e||QE}hd.prototype.isReactComponent={};hd.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};hd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function t_(){}t_.prototype=hd.prototype;function k1(n,t,e){this.props=n,this.context=t,this.refs=JE,this.updater=e||QE}var P1=k1.prototype=new t_;P1.constructor=k1;ZE(P1,hd.prototype);P1.isPureReactComponent=!0;var gx=Array.isArray,e_=Object.prototype.hasOwnProperty,D1={current:null},n_={key:!0,ref:!0,__self:!0,__source:!0};function i_(n,t,e){var i,r={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)e_.call(t,i)&&!n_.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(l===1)r.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Eg,type:n,key:s,ref:o,props:r,_owner:D1.current}}function sD(n,t){return{$$typeof:Eg,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function R1(n){return typeof n=="object"&&n!==null&&n.$$typeof===Eg}function oD(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var mx=/\/+/g;function hv(n,t){return typeof n=="object"&&n!==null&&n.key!=null?oD(""+n.key):t.toString(36)}function mm(n,t,e,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Eg:case qP:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+hv(o,0):i,gx(r)?(e="",n!=null&&(e=n.replace(mx,"$&/")+"/"),mm(r,t,e,"",function(u){return u})):r!=null&&(R1(r)&&(r=sD(r,e+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(mx,"$&/")+"/")+n)),t.push(r)),1;if(o=0,i=i===""?".":i+":",gx(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+hv(s,l);o+=mm(s,t,e,c,r)}else if(c=rD(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+hv(s,l++),o+=mm(s,t,e,c,r);else if(s==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $g(n,t,e){if(n==null)return n;var i=[],r=0;return mm(n,i,"","",function(s){return t.call(e,s,r++)}),i}function aD(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var In={current:null},ym={transition:null},lD={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:ym,ReactCurrentOwner:D1};function r_(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:$g,forEach:function(n,t,e){$g(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return $g(n,function(){t++}),t},toArray:function(n){return $g(n,function(t){return t})||[]},only:function(n){if(!R1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};mt.Component=hd;mt.Fragment=YP;mt.Profiler=QP;mt.PureComponent=k1;mt.StrictMode=KP;mt.Suspense=eD;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lD;mt.act=r_;mt.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=ZE({},n.props),r=n.key,s=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=D1.current),t.key!==void 0&&(r=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)e_.call(t,c)&&!n_.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Eg,type:n.type,key:r,ref:s,props:i,_owner:o}};mt.createContext=function(n){return n={$$typeof:JP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:ZP,_context:n},n.Consumer=n};mt.createElement=i_;mt.createFactory=function(n){var t=i_.bind(null,n);return t.type=n,t};mt.createRef=function(){return{current:null}};mt.forwardRef=function(n){return{$$typeof:tD,render:n}};mt.isValidElement=R1;mt.lazy=function(n){return{$$typeof:iD,_payload:{_status:-1,_result:n},_init:aD}};mt.memo=function(n,t){return{$$typeof:nD,type:n,compare:t===void 0?null:t}};mt.startTransition=function(n){var t=ym.transition;ym.transition={};try{n()}finally{ym.transition=t}};mt.unstable_act=r_;mt.useCallback=function(n,t){return In.current.useCallback(n,t)};mt.useContext=function(n){return In.current.useContext(n)};mt.useDebugValue=function(){};mt.useDeferredValue=function(n){return In.current.useDeferredValue(n)};mt.useEffect=function(n,t){return In.current.useEffect(n,t)};mt.useId=function(){return In.current.useId()};mt.useImperativeHandle=function(n,t,e){return In.current.useImperativeHandle(n,t,e)};mt.useInsertionEffect=function(n,t){return In.current.useInsertionEffect(n,t)};mt.useLayoutEffect=function(n,t){return In.current.useLayoutEffect(n,t)};mt.useMemo=function(n,t){return In.current.useMemo(n,t)};mt.useReducer=function(n,t,e){return In.current.useReducer(n,t,e)};mt.useRef=function(n){return In.current.useRef(n)};mt.useState=function(n){return In.current.useState(n)};mt.useSyncExternalStore=function(n,t,e){return In.current.useSyncExternalStore(n,t,e)};mt.useTransition=function(){return In.current.useTransition()};mt.version="18.3.1";KE.exports=mt;var P=KE.exports;const cD=py(P),uD=XP({__proto__:null,default:cD},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD=P,dD=Symbol.for("react.element"),fD=Symbol.for("react.fragment"),pD=Object.prototype.hasOwnProperty,gD=hD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mD={key:!0,ref:!0,__self:!0,__source:!0};function s_(n,t,e){var i,r={},s=null,o=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)pD.call(t,i)&&!mD.hasOwnProperty(i)&&(r[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:dD,type:n,key:s,ref:o,props:r,_owner:gD.current}}gy.Fragment=fD;gy.jsx=s_;gy.jsxs=s_;YE.exports=gy;var _=YE.exports,o_={exports:{}},Pi={},a_={exports:{}},l_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(N,V){var Z=N.length;N.push(V);t:for(;0<Z;){var dt=Z-1>>>1,J=N[dt];if(0<r(J,V))N[dt]=V,N[Z]=J,Z=dt;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],Z=N.pop();if(Z!==V){N[0]=Z;t:for(var dt=0,J=N.length,at=J>>>1;dt<at;){var Et=2*(dt+1)-1,Mt=N[Et],Bt=Et+1,vt=N[Bt];if(0>r(Mt,Z))Bt<J&&0>r(vt,Mt)?(N[dt]=vt,N[Bt]=Z,dt=Bt):(N[dt]=Mt,N[Et]=Z,dt=Et);else if(Bt<J&&0>r(vt,Z))N[dt]=vt,N[Bt]=Z,dt=Bt;else break t}}return V}function r(N,V){var Z=N.sortIndex-V.sortIndex;return Z!==0?Z:N.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,g=!1,b=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var V=e(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=N)i(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=e(u)}}function E(N){if(v=!1,x(N),!b)if(e(c)!==null)b=!0,$(C);else{var V=e(u);V!==null&&j(E,V.startTime-N)}}function C(N,V){b=!1,v&&(v=!1,m(D),D=-1),g=!0;var Z=f;try{for(x(V),d=e(c);d!==null&&(!(d.expirationTime>V)||N&&!F());){var dt=d.callback;if(typeof dt=="function"){d.callback=null,f=d.priorityLevel;var J=dt(d.expirationTime<=V);V=n.unstable_now(),typeof J=="function"?d.callback=J:d===e(c)&&i(c),x(V)}else i(c);d=e(c)}if(d!==null)var at=!0;else{var Et=e(u);Et!==null&&j(E,Et.startTime-V),at=!1}return at}finally{d=null,f=Z,g=!1}}var T=!1,k=null,D=-1,M=5,L=-1;function F(){return!(n.unstable_now()-L<M)}function B(){if(k!==null){var N=n.unstable_now();L=N;var V=!0;try{V=k(!0,N)}finally{V?z():(T=!1,k=null)}}else T=!1}var z;if(typeof w=="function")z=function(){w(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,et=H.port2;H.port1.onmessage=B,z=function(){et.postMessage(null)}}else z=function(){S(B,0)};function $(N){k=N,T||(T=!0,z())}function j(N,V){D=S(function(){N(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){b||g||(b=!0,$(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var Z=f;f=V;try{return N()}finally{f=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Z=f;f=N;try{return V()}finally{f=Z}},n.unstable_scheduleCallback=function(N,V,Z){var dt=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?dt+Z:dt):Z=dt,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Z+J,N={id:h++,callback:V,priorityLevel:N,startTime:Z,expirationTime:J,sortIndex:-1},Z>dt?(N.sortIndex=Z,t(u,N),e(c)===null&&N===e(u)&&(v?(m(D),D=-1):v=!0,j(E,Z-dt))):(N.sortIndex=J,t(c,N),b||g||(b=!0,$(C))),N},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(N){var V=f;return function(){var Z=f;f=V;try{return N.apply(this,arguments)}finally{f=Z}}}})(l_);a_.exports=l_;var yD=a_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=P,Ti=yD;function O(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c_=new Set,mf={};function Dc(n,t){Jh(n,t),Jh(n+"Capture",t)}function Jh(n,t){for(mf[n]=t,n=0;n<t.length;n++)c_.add(t[n])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jv=Object.prototype.hasOwnProperty,wD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yx={},vx={};function bD(n){return Jv.call(vx,n)?!0:Jv.call(yx,n)?!1:wD.test(n)?vx[n]=!0:(yx[n]=!0,!1)}function AD(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function xD(n,t,e,i){if(t===null||typeof t>"u"||AD(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function On(n,t,e,i,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){un[n]=new On(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];un[t]=new On(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){un[n]=new On(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){un[n]=new On(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){un[n]=new On(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){un[n]=new On(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){un[n]=new On(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){un[n]=new On(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){un[n]=new On(n,5,!1,n.toLowerCase(),null,!1,!1)});var M1=/[\-:]([a-z])/g;function L1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(M1,L1);un[t]=new On(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(M1,L1);un[t]=new On(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(M1,L1);un[t]=new On(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){un[n]=new On(n,1,!1,n.toLowerCase(),null,!1,!1)});un.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){un[n]=new On(n,1,!1,n.toLowerCase(),null,!0,!0)});function F1(n,t,e,i){var r=un.hasOwnProperty(t)?un[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xD(t,e,r,i)&&(e=null),i||r===null?bD(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):r.mustUseProperty?n[r.propertyName]=e===null?r.type===3?!1:"":e:(t=r.attributeName,i=r.attributeNamespace,e===null?n.removeAttribute(t):(r=r.type,e=r===3||r===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var fo=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ug=Symbol.for("react.element"),Zc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),N1=Symbol.for("react.strict_mode"),tw=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),I1=Symbol.for("react.forward_ref"),ew=Symbol.for("react.suspense"),nw=Symbol.for("react.suspense_list"),O1=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),d_=Symbol.for("react.offscreen"),wx=Symbol.iterator;function vd(n){return n===null||typeof n!="object"?null:(n=wx&&n[wx]||n["@@iterator"],typeof n=="function"?n:null)}var fe=Object.assign,dv;function Rd(n){if(dv===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);dv=t&&t[1]||""}return`
`+dv+n}var fv=!1;function pv(n,t){if(!n||fv)return"";fv=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{fv=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Rd(n):""}function SD(n){switch(n.tag){case 5:return Rd(n.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return n=pv(n.type,!1),n;case 11:return n=pv(n.type.render,!1),n;case 1:return n=pv(n.type,!0),n;default:return""}}function iw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Jc:return"Fragment";case Zc:return"Portal";case tw:return"Profiler";case N1:return"StrictMode";case ew:return"Suspense";case nw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case h_:return(n.displayName||"Context")+".Consumer";case u_:return(n._context.displayName||"Context")+".Provider";case I1:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O1:return t=n.displayName||null,t!==null?t:iw(n.type)||"Memo";case vo:t=n._payload,n=n._init;try{return iw(n(t))}catch{}}return null}function ED(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iw(t);case 8:return t===N1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ta(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function f_(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _D(n){var t=f_(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,s=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function zg(n){n._valueTracker||(n._valueTracker=_D(n))}function p_(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=f_(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function l0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function rw(n,t){var e=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function bx(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=Ta(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function g_(n,t){t=t.checked,t!=null&&F1(n,"checked",t,!1)}function sw(n,t){g_(n,t);var e=Ta(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?ow(n,t.type,e):t.hasOwnProperty("defaultValue")&&ow(n,t.type,Ta(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function Ax(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function ow(n,t,e){(t!=="number"||l0(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var Md=Array.isArray;function vu(n,t,e,i){if(n=n.options,t){t={};for(var r=0;r<e.length;r++)t["$"+e[r]]=!0;for(e=0;e<n.length;e++)r=t.hasOwnProperty("$"+n[e].value),n[e].selected!==r&&(n[e].selected=r),r&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Ta(e),t=null,r=0;r<n.length;r++){if(n[r].value===e){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}t!==null||n[r].disabled||(t=n[r])}t!==null&&(t.selected=!0)}}function aw(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function xx(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(O(92));if(Md(e)){if(1<e.length)throw Error(O(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Ta(e)}}function m_(n,t){var e=Ta(t.value),i=Ta(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function Sx(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function y_(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lw(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?y_(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hg,v_=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,r)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Hg=Hg||document.createElement("div"),Hg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function yf(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CD=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(n){CD.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),rf[t]=rf[n]})});function w_(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||rf.hasOwnProperty(n)&&rf[n]?(""+t).trim():t+"px"}function b_(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,r=w_(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,r):n[e]=r}}var TD=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cw(n,t){if(t){if(TD[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function uw(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hw=null;function B1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dw=null,wu=null,bu=null;function Ex(n){if(n=Tg(n)){if(typeof dw!="function")throw Error(O(280));var t=n.stateNode;t&&(t=by(t),dw(n.stateNode,n.type,t))}}function A_(n){wu?bu?bu.push(n):bu=[n]:wu=n}function x_(){if(wu){var n=wu,t=bu;if(bu=wu=null,Ex(n),t)for(n=0;n<t.length;n++)Ex(t[n])}}function S_(n,t){return n(t)}function E_(){}var gv=!1;function __(n,t,e){if(gv)return n(t,e);gv=!0;try{return S_(n,t,e)}finally{gv=!1,(wu!==null||bu!==null)&&(E_(),x_())}}function vf(n,t){var e=n.stateNode;if(e===null)return null;var i=by(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(O(231,t,typeof e));return e}var fw=!1;if(ro)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){fw=!0}}),window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{fw=!1}function kD(n,t,e,i,r,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var sf=!1,c0=null,u0=!1,pw=null,PD={onError:function(n){sf=!0,c0=n}};function DD(n,t,e,i,r,s,o,l,c){sf=!1,c0=null,kD.apply(PD,arguments)}function RD(n,t,e,i,r,s,o,l,c){if(DD.apply(this,arguments),sf){if(sf){var u=c0;sf=!1,c0=null}else throw Error(O(198));u0||(u0=!0,pw=u)}}function Rc(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function C_(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function _x(n){if(Rc(n)!==n)throw Error(O(188))}function MD(n){var t=n.alternate;if(!t){if(t=Rc(n),t===null)throw Error(O(188));return t!==n?null:n}for(var e=n,i=t;;){var r=e.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){e=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===e)return _x(r),n;if(s===i)return _x(r),t;s=s.sibling}throw Error(O(188))}if(e.return!==i.return)e=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===e){o=!0,e=r,i=s;break}if(l===i){o=!0,i=r,e=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===e){o=!0,e=s,i=r;break}if(l===i){o=!0,i=s,e=r;break}l=l.sibling}if(!o)throw Error(O(189))}}if(e.alternate!==i)throw Error(O(190))}if(e.tag!==3)throw Error(O(188));return e.stateNode.current===e?n:t}function T_(n){return n=MD(n),n!==null?k_(n):null}function k_(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=k_(n);if(t!==null)return t;n=n.sibling}return null}var P_=Ti.unstable_scheduleCallback,Cx=Ti.unstable_cancelCallback,LD=Ti.unstable_shouldYield,FD=Ti.unstable_requestPaint,Ee=Ti.unstable_now,ND=Ti.unstable_getCurrentPriorityLevel,j1=Ti.unstable_ImmediatePriority,D_=Ti.unstable_UserBlockingPriority,h0=Ti.unstable_NormalPriority,ID=Ti.unstable_LowPriority,R_=Ti.unstable_IdlePriority,my=null,ss=null;function OD(n){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(my,n,void 0,(n.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:$D,BD=Math.log,jD=Math.LN2;function $D(n){return n>>>=0,n===0?32:31-(BD(n)/jD|0)|0}var Vg=64,Wg=4194304;function Ld(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function d0(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~r;l!==0?i=Ld(l):(s&=o,s!==0&&(i=Ld(s)))}else o=e&~r,o!==0?i=Ld(o):s!==0&&(i=Ld(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-xr(t),r=1<<e,i|=n[e],t&=~r;return i}function UD(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zD(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-xr(s),l=1<<o,c=r[o];c===-1?(!(l&e)||l&i)&&(r[o]=UD(l,t)):c<=t&&(n.expiredLanes|=l),s&=~l}}function gw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function M_(){var n=Vg;return Vg<<=1,!(Vg&4194240)&&(Vg=64),n}function mv(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function _g(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-xr(t),n[t]=e}function HD(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var r=31-xr(e),s=1<<r;t[r]=0,i[r]=-1,n[r]=-1,e&=~s}}function $1(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-xr(e),r=1<<i;r&t|n[i]&t&&(n[i]|=t),e&=~r}}var Dt=0;function L_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var F_,U1,N_,I_,O_,mw=!1,Gg=[],va=null,wa=null,ba=null,wf=new Map,bf=new Map,bo=[],VD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tx(n,t){switch(n){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":wf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bf.delete(t.pointerId)}}function bd(n,t,e,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Tg(t),t!==null&&U1(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),n)}function WD(n,t,e,i,r){switch(t){case"focusin":return va=bd(va,n,t,e,i,r),!0;case"dragenter":return wa=bd(wa,n,t,e,i,r),!0;case"mouseover":return ba=bd(ba,n,t,e,i,r),!0;case"pointerover":var s=r.pointerId;return wf.set(s,bd(wf.get(s)||null,n,t,e,i,r)),!0;case"gotpointercapture":return s=r.pointerId,bf.set(s,bd(bf.get(s)||null,n,t,e,i,r)),!0}return!1}function B_(n){var t=tl(n.target);if(t!==null){var e=Rc(t);if(e!==null){if(t=e.tag,t===13){if(t=C_(e),t!==null){n.blockedOn=t,O_(n.priority,function(){N_(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vm(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=yw(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);hw=i,e.target.dispatchEvent(i),hw=null}else return t=Tg(e),t!==null&&U1(t),n.blockedOn=e,!1;t.shift()}return!0}function kx(n,t,e){vm(n)&&e.delete(t)}function GD(){mw=!1,va!==null&&vm(va)&&(va=null),wa!==null&&vm(wa)&&(wa=null),ba!==null&&vm(ba)&&(ba=null),wf.forEach(kx),bf.forEach(kx)}function Ad(n,t){n.blockedOn===t&&(n.blockedOn=null,mw||(mw=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,GD)))}function Af(n){function t(r){return Ad(r,n)}if(0<Gg.length){Ad(Gg[0],n);for(var e=1;e<Gg.length;e++){var i=Gg[e];i.blockedOn===n&&(i.blockedOn=null)}}for(va!==null&&Ad(va,n),wa!==null&&Ad(wa,n),ba!==null&&Ad(ba,n),wf.forEach(t),bf.forEach(t),e=0;e<bo.length;e++)i=bo[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<bo.length&&(e=bo[0],e.blockedOn===null);)B_(e),e.blockedOn===null&&bo.shift()}var Au=fo.ReactCurrentBatchConfig,f0=!0;function XD(n,t,e,i){var r=Dt,s=Au.transition;Au.transition=null;try{Dt=1,z1(n,t,e,i)}finally{Dt=r,Au.transition=s}}function qD(n,t,e,i){var r=Dt,s=Au.transition;Au.transition=null;try{Dt=4,z1(n,t,e,i)}finally{Dt=r,Au.transition=s}}function z1(n,t,e,i){if(f0){var r=yw(n,t,e,i);if(r===null)Cv(n,t,i,p0,e),Tx(n,i);else if(WD(r,n,t,e,i))i.stopPropagation();else if(Tx(n,i),t&4&&-1<VD.indexOf(n)){for(;r!==null;){var s=Tg(r);if(s!==null&&F_(s),s=yw(n,t,e,i),s===null&&Cv(n,t,i,p0,e),s===r)break;r=s}r!==null&&i.stopPropagation()}else Cv(n,t,i,null,e)}}var p0=null;function yw(n,t,e,i){if(p0=null,n=B1(i),n=tl(n),n!==null)if(t=Rc(n),t===null)n=null;else if(e=t.tag,e===13){if(n=C_(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return p0=n,null}function j_(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ND()){case j1:return 1;case D_:return 4;case h0:case ID:return 16;case R_:return 536870912;default:return 16}default:return 16}}var ma=null,H1=null,wm=null;function $_(){if(wm)return wm;var n,t=H1,e=t.length,i,r="value"in ma?ma.value:ma.textContent,s=r.length;for(n=0;n<e&&t[n]===r[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===r[s-i];i++);return wm=r.slice(n,1<i?1-i:void 0)}function bm(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Xg(){return!0}function Px(){return!1}function Di(n){function t(e,i,r,s,o){this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xg:Px,this.isPropagationStopped=Px,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Xg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Xg)},persist:function(){},isPersistent:Xg}),t}var dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V1=Di(dd),Cg=fe({},dd,{view:0,detail:0}),YD=Di(Cg),yv,vv,xd,yy=fe({},Cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xd&&(xd&&n.type==="mousemove"?(yv=n.screenX-xd.screenX,vv=n.screenY-xd.screenY):vv=yv=0,xd=n),yv)},movementY:function(n){return"movementY"in n?n.movementY:vv}}),Dx=Di(yy),KD=fe({},yy,{dataTransfer:0}),QD=Di(KD),ZD=fe({},Cg,{relatedTarget:0}),wv=Di(ZD),JD=fe({},dd,{animationName:0,elapsedTime:0,pseudoElement:0}),tR=Di(JD),eR=fe({},dd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nR=Di(eR),iR=fe({},dd,{data:0}),Rx=Di(iR),rR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aR(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=oR[n])?!!t[n]:!1}function W1(){return aR}var lR=fe({},Cg,{key:function(n){if(n.key){var t=rR[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=bm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W1,charCode:function(n){return n.type==="keypress"?bm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),cR=Di(lR),uR=fe({},yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=Di(uR),hR=fe({},Cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W1}),dR=Di(hR),fR=fe({},dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),pR=Di(fR),gR=fe({},yy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mR=Di(gR),yR=[9,13,27,32],G1=ro&&"CompositionEvent"in window,of=null;ro&&"documentMode"in document&&(of=document.documentMode);var vR=ro&&"TextEvent"in window&&!of,U_=ro&&(!G1||of&&8<of&&11>=of),Lx=" ",Fx=!1;function z_(n,t){switch(n){case"keyup":return yR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var tu=!1;function wR(n,t){switch(n){case"compositionend":return H_(t);case"keypress":return t.which!==32?null:(Fx=!0,Lx);case"textInput":return n=t.data,n===Lx&&Fx?null:n;default:return null}}function bR(n,t){if(tu)return n==="compositionend"||!G1&&z_(n,t)?(n=$_(),wm=H1=ma=null,tu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return U_&&t.locale!=="ko"?null:t.data;default:return null}}var AR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nx(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!AR[n.type]:t==="textarea"}function V_(n,t,e,i){A_(i),t=g0(t,"onChange"),0<t.length&&(e=new V1("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var af=null,xf=null;function xR(n){eC(n,0)}function vy(n){var t=iu(n);if(p_(t))return n}function SR(n,t){if(n==="change")return t}var W_=!1;if(ro){var bv;if(ro){var Av="oninput"in document;if(!Av){var Ix=document.createElement("div");Ix.setAttribute("oninput","return;"),Av=typeof Ix.oninput=="function"}bv=Av}else bv=!1;W_=bv&&(!document.documentMode||9<document.documentMode)}function Ox(){af&&(af.detachEvent("onpropertychange",G_),xf=af=null)}function G_(n){if(n.propertyName==="value"&&vy(xf)){var t=[];V_(t,xf,n,B1(n)),__(xR,t)}}function ER(n,t,e){n==="focusin"?(Ox(),af=t,xf=e,af.attachEvent("onpropertychange",G_)):n==="focusout"&&Ox()}function _R(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vy(xf)}function CR(n,t){if(n==="click")return vy(t)}function TR(n,t){if(n==="input"||n==="change")return vy(t)}function kR(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Er=typeof Object.is=="function"?Object.is:kR;function Sf(n,t){if(Er(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var r=e[i];if(!Jv.call(t,r)||!Er(n[r],t[r]))return!1}return!0}function Bx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jx(n,t){var e=Bx(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Bx(e)}}function X_(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?X_(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function q_(){for(var n=window,t=l0();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=l0(n.document)}return t}function X1(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function PR(n){var t=q_(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&X_(e.ownerDocument.documentElement,e)){if(i!==null&&X1(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var r=e.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=jx(e,s);var o=jx(e,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var DR=ro&&"documentMode"in document&&11>=document.documentMode,eu=null,vw=null,lf=null,ww=!1;function $x(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;ww||eu==null||eu!==l0(i)||(i=eu,"selectionStart"in i&&X1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lf&&Sf(lf,i)||(lf=i,i=g0(vw,"onSelect"),0<i.length&&(t=new V1("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=eu)))}function qg(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var nu={animationend:qg("Animation","AnimationEnd"),animationiteration:qg("Animation","AnimationIteration"),animationstart:qg("Animation","AnimationStart"),transitionend:qg("Transition","TransitionEnd")},xv={},Y_={};ro&&(Y_=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function wy(n){if(xv[n])return xv[n];if(!nu[n])return n;var t=nu[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in Y_)return xv[n]=t[e];return n}var K_=wy("animationend"),Q_=wy("animationiteration"),Z_=wy("animationstart"),J_=wy("transitionend"),tC=new Map,Ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(n,t){tC.set(n,t),Dc(t,[n])}for(var Sv=0;Sv<Ux.length;Sv++){var Ev=Ux[Sv],RR=Ev.toLowerCase(),MR=Ev[0].toUpperCase()+Ev.slice(1);Na(RR,"on"+MR)}Na(K_,"onAnimationEnd");Na(Q_,"onAnimationIteration");Na(Z_,"onAnimationStart");Na("dblclick","onDoubleClick");Na("focusin","onFocus");Na("focusout","onBlur");Na(J_,"onTransitionEnd");Jh("onMouseEnter",["mouseout","mouseover"]);Jh("onMouseLeave",["mouseout","mouseover"]);Jh("onPointerEnter",["pointerout","pointerover"]);Jh("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fd));function zx(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,RD(i,t,void 0,n),n.currentTarget=null}function eC(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break t;zx(r,l,u),s=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break t;zx(r,l,u),s=c}}}if(u0)throw n=pw,u0=!1,pw=null,n}function Kt(n,t){var e=t[Ew];e===void 0&&(e=t[Ew]=new Set);var i=n+"__bubble";e.has(i)||(nC(t,n,2,!1),e.add(i))}function _v(n,t,e){var i=0;t&&(i|=4),nC(e,n,i,t)}var Yg="_reactListening"+Math.random().toString(36).slice(2);function Ef(n){if(!n[Yg]){n[Yg]=!0,c_.forEach(function(e){e!=="selectionchange"&&(LR.has(e)||_v(e,!1,n),_v(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Yg]||(t[Yg]=!0,_v("selectionchange",!1,t))}}function nC(n,t,e,i){switch(j_(t)){case 1:var r=XD;break;case 4:r=qD;break;default:r=z1}e=r.bind(null,t,e,n),r=void 0,!fw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(t,e,{capture:!0,passive:r}):n.addEventListener(t,e,!0):r!==void 0?n.addEventListener(t,e,{passive:r}):n.addEventListener(t,e,!1)}function Cv(n,t,e,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=tl(l),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue t}l=l.parentNode}}i=i.return}__(function(){var u=s,h=B1(e),d=[];t:{var f=tC.get(n);if(f!==void 0){var g=V1,b=n;switch(n){case"keypress":if(bm(e)===0)break t;case"keydown":case"keyup":g=cR;break;case"focusin":b="focus",g=wv;break;case"focusout":b="blur",g=wv;break;case"beforeblur":case"afterblur":g=wv;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=QD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dR;break;case K_:case Q_:case Z_:g=tR;break;case J_:g=pR;break;case"scroll":g=YD;break;case"wheel":g=mR;break;case"copy":case"cut":case"paste":g=nR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Mx}var v=(t&4)!==0,S=!v&&n==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var w=u,x;w!==null;){x=w;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,m!==null&&(E=vf(w,m),E!=null&&v.push(_f(w,E,x)))),S)break;w=w.return}0<v.length&&(f=new g(f,b,null,e,h),d.push({event:f,listeners:v}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&e!==hw&&(b=e.relatedTarget||e.fromElement)&&(tl(b)||b[so]))break t;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(b=e.relatedTarget||e.toElement,g=u,b=b?tl(b):null,b!==null&&(S=Rc(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=u),g!==b)){if(v=Dx,E="onMouseLeave",m="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=Mx,E="onPointerLeave",m="onPointerEnter",w="pointer"),S=g==null?f:iu(g),x=b==null?f:iu(b),f=new v(E,w+"leave",g,e,h),f.target=S,f.relatedTarget=x,E=null,tl(h)===u&&(v=new v(m,w+"enter",b,e,h),v.target=x,v.relatedTarget=S,E=v),S=E,g&&b)e:{for(v=g,m=b,w=0,x=v;x;x=Uc(x))w++;for(x=0,E=m;E;E=Uc(E))x++;for(;0<w-x;)v=Uc(v),w--;for(;0<x-w;)m=Uc(m),x--;for(;w--;){if(v===m||m!==null&&v===m.alternate)break e;v=Uc(v),m=Uc(m)}v=null}else v=null;g!==null&&Hx(d,f,g,v,!1),b!==null&&S!==null&&Hx(d,S,b,v,!0)}}t:{if(f=u?iu(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var C=SR;else if(Nx(f))if(W_)C=TR;else{C=_R;var T=ER}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=CR);if(C&&(C=C(n,u))){V_(d,C,e,h);break t}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&ow(f,"number",f.value)}switch(T=u?iu(u):window,n){case"focusin":(Nx(T)||T.contentEditable==="true")&&(eu=T,vw=u,lf=null);break;case"focusout":lf=vw=eu=null;break;case"mousedown":ww=!0;break;case"contextmenu":case"mouseup":case"dragend":ww=!1,$x(d,e,h);break;case"selectionchange":if(DR)break;case"keydown":case"keyup":$x(d,e,h)}var k;if(G1)t:{switch(n){case"compositionstart":var D="onCompositionStart";break t;case"compositionend":D="onCompositionEnd";break t;case"compositionupdate":D="onCompositionUpdate";break t}D=void 0}else tu?z_(n,e)&&(D="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(D="onCompositionStart");D&&(U_&&e.locale!=="ko"&&(tu||D!=="onCompositionStart"?D==="onCompositionEnd"&&tu&&(k=$_()):(ma=h,H1="value"in ma?ma.value:ma.textContent,tu=!0)),T=g0(u,D),0<T.length&&(D=new Rx(D,n,null,e,h),d.push({event:D,listeners:T}),k?D.data=k:(k=H_(e),k!==null&&(D.data=k)))),(k=vR?wR(n,e):bR(n,e))&&(u=g0(u,"onBeforeInput"),0<u.length&&(h=new Rx("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=k))}eC(d,t)})}function _f(n,t,e){return{instance:n,listener:t,currentTarget:e}}function g0(n,t){for(var e=t+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=vf(n,e),s!=null&&i.unshift(_f(n,s,r)),s=vf(n,t),s!=null&&i.push(_f(n,s,r))),n=n.return}return i}function Uc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hx(n,t,e,i,r){for(var s=t._reactName,o=[];e!==null&&e!==i;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,r?(c=vf(e,s),c!=null&&o.unshift(_f(e,c,l))):r||(c=vf(e,s),c!=null&&o.push(_f(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var FR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function Vx(n){return(typeof n=="string"?n:""+n).replace(FR,`
`).replace(NR,"")}function Kg(n,t,e){if(t=Vx(t),Vx(n)!==t&&e)throw Error(O(425))}function m0(){}var bw=null,Aw=null;function xw(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sw=typeof setTimeout=="function"?setTimeout:void 0,IR=typeof clearTimeout=="function"?clearTimeout:void 0,Wx=typeof Promise=="function"?Promise:void 0,OR=typeof queueMicrotask=="function"?queueMicrotask:typeof Wx<"u"?function(n){return Wx.resolve(null).then(n).catch(BR)}:Sw;function BR(n){setTimeout(function(){throw n})}function Tv(n,t){var e=t,i=0;do{var r=e.nextSibling;if(n.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"){if(i===0){n.removeChild(r),Af(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=r}while(e);Af(t)}function Aa(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function Gx(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var fd=Math.random().toString(36).slice(2),ns="__reactFiber$"+fd,Cf="__reactProps$"+fd,so="__reactContainer$"+fd,Ew="__reactEvents$"+fd,jR="__reactListeners$"+fd,$R="__reactHandles$"+fd;function tl(n){var t=n[ns];if(t)return t;for(var e=n.parentNode;e;){if(t=e[so]||e[ns]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=Gx(n);n!==null;){if(e=n[ns])return e;n=Gx(n)}return t}n=e,e=n.parentNode}return null}function Tg(n){return n=n[ns]||n[so],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function iu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(O(33))}function by(n){return n[Cf]||null}var _w=[],ru=-1;function Ia(n){return{current:n}}function ee(n){0>ru||(n.current=_w[ru],_w[ru]=null,ru--)}function Xt(n,t){ru++,_w[ru]=n.current,n.current=t}var ka={},En=Ia(ka),Qn=Ia(!1),Ac=ka;function td(n,t){var e=n.type.contextTypes;if(!e)return ka;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in e)r[s]=t[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=r),r}function Zn(n){return n=n.childContextTypes,n!=null}function y0(){ee(Qn),ee(En)}function Xx(n,t,e){if(En.current!==ka)throw Error(O(168));Xt(En,t),Xt(Qn,e)}function iC(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(O(108,ED(n)||"Unknown",r));return fe({},e,i)}function v0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ka,Ac=En.current,Xt(En,n),Xt(Qn,Qn.current),!0}function qx(n,t,e){var i=n.stateNode;if(!i)throw Error(O(169));e?(n=iC(n,t,Ac),i.__reactInternalMemoizedMergedChildContext=n,ee(Qn),ee(En),Xt(En,n)):ee(Qn),Xt(Qn,e)}var ys=null,Ay=!1,kv=!1;function rC(n){ys===null?ys=[n]:ys.push(n)}function UR(n){Ay=!0,rC(n)}function Oa(){if(!kv&&ys!==null){kv=!0;var n=0,t=Dt;try{var e=ys;for(Dt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}ys=null,Ay=!1}catch(r){throw ys!==null&&(ys=ys.slice(n+1)),P_(j1,Oa),r}finally{Dt=t,kv=!1}}return null}var su=[],ou=0,w0=null,b0=0,Gi=[],Xi=0,xc=null,Js=1,to="";function Wa(n,t){su[ou++]=b0,su[ou++]=w0,w0=n,b0=t}function sC(n,t,e){Gi[Xi++]=Js,Gi[Xi++]=to,Gi[Xi++]=xc,xc=n;var i=Js;n=to;var r=32-xr(i)-1;i&=~(1<<r),e+=1;var s=32-xr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Js=1<<32-xr(t)+r|e<<r|i,to=s+n}else Js=1<<s|e<<r|i,to=n}function q1(n){n.return!==null&&(Wa(n,1),sC(n,1,0))}function Y1(n){for(;n===w0;)w0=su[--ou],su[ou]=null,b0=su[--ou],su[ou]=null;for(;n===xc;)xc=Gi[--Xi],Gi[Xi]=null,to=Gi[--Xi],Gi[Xi]=null,Js=Gi[--Xi],Gi[Xi]=null}var _i=null,Ei=null,se=!1,br=null;function oC(n,t){var e=Ki(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function Yx(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,_i=n,Ei=Aa(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,_i=n,Ei=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=xc!==null?{id:Js,overflow:to}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Ki(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,_i=n,Ei=null,!0):!1;default:return!1}}function Cw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tw(n){if(se){var t=Ei;if(t){var e=t;if(!Yx(n,t)){if(Cw(n))throw Error(O(418));t=Aa(e.nextSibling);var i=_i;t&&Yx(n,t)?oC(i,e):(n.flags=n.flags&-4097|2,se=!1,_i=n)}}else{if(Cw(n))throw Error(O(418));n.flags=n.flags&-4097|2,se=!1,_i=n}}}function Kx(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_i=n}function Qg(n){if(n!==_i)return!1;if(!se)return Kx(n),se=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!xw(n.type,n.memoizedProps)),t&&(t=Ei)){if(Cw(n))throw aC(),Error(O(418));for(;t;)oC(n,t),t=Aa(t.nextSibling)}if(Kx(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(O(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Ei=Aa(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Ei=null}}else Ei=_i?Aa(n.stateNode.nextSibling):null;return!0}function aC(){for(var n=Ei;n;)n=Aa(n.nextSibling)}function ed(){Ei=_i=null,se=!1}function K1(n){br===null?br=[n]:br.push(n)}var zR=fo.ReactCurrentBatchConfig;function Sd(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(O(309));var i=e.stateNode}if(!i)throw Error(O(147,n));var r=i,s=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof n!="string")throw Error(O(284));if(!e._owner)throw Error(O(290,n))}return n}function Zg(n,t){throw n=Object.prototype.toString.call(t),Error(O(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function Qx(n){var t=n._init;return t(n._payload)}function lC(n){function t(m,w){if(n){var x=m.deletions;x===null?(m.deletions=[w],m.flags|=16):x.push(w)}}function e(m,w){if(!n)return null;for(;w!==null;)t(m,w),w=w.sibling;return null}function i(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function r(m,w){return m=_a(m,w),m.index=0,m.sibling=null,m}function s(m,w,x){return m.index=x,n?(x=m.alternate,x!==null?(x=x.index,x<w?(m.flags|=2,w):x):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,w,x,E){return w===null||w.tag!==6?(w=Nv(x,m.mode,E),w.return=m,w):(w=r(w,x),w.return=m,w)}function c(m,w,x,E){var C=x.type;return C===Jc?h(m,w,x.props.children,E,x.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vo&&Qx(C)===w.type)?(E=r(w,x.props),E.ref=Sd(m,w,x),E.return=m,E):(E=Tm(x.type,x.key,x.props,null,m.mode,E),E.ref=Sd(m,w,x),E.return=m,E)}function u(m,w,x,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Iv(x,m.mode,E),w.return=m,w):(w=r(w,x.children||[]),w.return=m,w)}function h(m,w,x,E,C){return w===null||w.tag!==7?(w=yc(x,m.mode,E,C),w.return=m,w):(w=r(w,x),w.return=m,w)}function d(m,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nv(""+w,m.mode,x),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ug:return x=Tm(w.type,w.key,w.props,null,m.mode,x),x.ref=Sd(m,null,w),x.return=m,x;case Zc:return w=Iv(w,m.mode,x),w.return=m,w;case vo:var E=w._init;return d(m,E(w._payload),x)}if(Md(w)||vd(w))return w=yc(w,m.mode,x,null),w.return=m,w;Zg(m,w)}return null}function f(m,w,x,E){var C=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:l(m,w,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ug:return x.key===C?c(m,w,x,E):null;case Zc:return x.key===C?u(m,w,x,E):null;case vo:return C=x._init,f(m,w,C(x._payload),E)}if(Md(x)||vd(x))return C!==null?null:h(m,w,x,E,null);Zg(m,x)}return null}function g(m,w,x,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(x)||null,l(w,m,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ug:return m=m.get(E.key===null?x:E.key)||null,c(w,m,E,C);case Zc:return m=m.get(E.key===null?x:E.key)||null,u(w,m,E,C);case vo:var T=E._init;return g(m,w,x,T(E._payload),C)}if(Md(E)||vd(E))return m=m.get(x)||null,h(w,m,E,C,null);Zg(w,E)}return null}function b(m,w,x,E){for(var C=null,T=null,k=w,D=w=0,M=null;k!==null&&D<x.length;D++){k.index>D?(M=k,k=null):M=k.sibling;var L=f(m,k,x[D],E);if(L===null){k===null&&(k=M);break}n&&k&&L.alternate===null&&t(m,k),w=s(L,w,D),T===null?C=L:T.sibling=L,T=L,k=M}if(D===x.length)return e(m,k),se&&Wa(m,D),C;if(k===null){for(;D<x.length;D++)k=d(m,x[D],E),k!==null&&(w=s(k,w,D),T===null?C=k:T.sibling=k,T=k);return se&&Wa(m,D),C}for(k=i(m,k);D<x.length;D++)M=g(k,m,D,x[D],E),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?D:M.key),w=s(M,w,D),T===null?C=M:T.sibling=M,T=M);return n&&k.forEach(function(F){return t(m,F)}),se&&Wa(m,D),C}function v(m,w,x,E){var C=vd(x);if(typeof C!="function")throw Error(O(150));if(x=C.call(x),x==null)throw Error(O(151));for(var T=C=null,k=w,D=w=0,M=null,L=x.next();k!==null&&!L.done;D++,L=x.next()){k.index>D?(M=k,k=null):M=k.sibling;var F=f(m,k,L.value,E);if(F===null){k===null&&(k=M);break}n&&k&&F.alternate===null&&t(m,k),w=s(F,w,D),T===null?C=F:T.sibling=F,T=F,k=M}if(L.done)return e(m,k),se&&Wa(m,D),C;if(k===null){for(;!L.done;D++,L=x.next())L=d(m,L.value,E),L!==null&&(w=s(L,w,D),T===null?C=L:T.sibling=L,T=L);return se&&Wa(m,D),C}for(k=i(m,k);!L.done;D++,L=x.next())L=g(k,m,D,L.value,E),L!==null&&(n&&L.alternate!==null&&k.delete(L.key===null?D:L.key),w=s(L,w,D),T===null?C=L:T.sibling=L,T=L);return n&&k.forEach(function(B){return t(m,B)}),se&&Wa(m,D),C}function S(m,w,x,E){if(typeof x=="object"&&x!==null&&x.type===Jc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ug:t:{for(var C=x.key,T=w;T!==null;){if(T.key===C){if(C=x.type,C===Jc){if(T.tag===7){e(m,T.sibling),w=r(T,x.props.children),w.return=m,m=w;break t}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vo&&Qx(C)===T.type){e(m,T.sibling),w=r(T,x.props),w.ref=Sd(m,T,x),w.return=m,m=w;break t}e(m,T);break}else t(m,T);T=T.sibling}x.type===Jc?(w=yc(x.props.children,m.mode,E,x.key),w.return=m,m=w):(E=Tm(x.type,x.key,x.props,null,m.mode,E),E.ref=Sd(m,w,x),E.return=m,m=E)}return o(m);case Zc:t:{for(T=x.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){e(m,w.sibling),w=r(w,x.children||[]),w.return=m,m=w;break t}else{e(m,w);break}else t(m,w);w=w.sibling}w=Iv(x,m.mode,E),w.return=m,m=w}return o(m);case vo:return T=x._init,S(m,w,T(x._payload),E)}if(Md(x))return b(m,w,x,E);if(vd(x))return v(m,w,x,E);Zg(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(e(m,w.sibling),w=r(w,x),w.return=m,m=w):(e(m,w),w=Nv(x,m.mode,E),w.return=m,m=w),o(m)):e(m,w)}return S}var nd=lC(!0),cC=lC(!1),A0=Ia(null),x0=null,au=null,Q1=null;function Z1(){Q1=au=x0=null}function J1(n){var t=A0.current;ee(A0),n._currentValue=t}function kw(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function xu(n,t){x0=n,Q1=au=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Kn=!0),n.firstContext=null)}function Ji(n){var t=n._currentValue;if(Q1!==n)if(n={context:n,memoizedValue:t,next:null},au===null){if(x0===null)throw Error(O(308));au=n,x0.dependencies={lanes:0,firstContext:n}}else au=au.next=n;return t}var el=null;function tA(n){el===null?el=[n]:el.push(n)}function uC(n,t,e,i){var r=t.interleaved;return r===null?(e.next=e,tA(t)):(e.next=r.next,r.next=e),t.interleaved=e,oo(n,i)}function oo(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var wo=!1;function eA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hC(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function eo(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function xa(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,oo(n,e)}return r=i.interleaved,r===null?(t.next=t,tA(i)):(t.next=r.next,r.next=t),i.interleaved=t,oo(n,e)}function Am(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,$1(n,e)}}function Zx(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var r=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?r=s=o:s=s.next=o,e=e.next}while(e!==null);s===null?r=s=t:s=s.next=t}else r=s=t;e={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function S0(n,t,e,i){var r=n.updateQueue;wo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(s!==null){var d=r.baseState;o=0,h=u=c=null,l=s;do{var f=l.lane,g=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var b=n,v=l;switch(f=t,g=e,v.tag){case 1:if(b=v.payload,typeof b=="function"){d=b.call(g,d,f);break t}d=b;break t;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,f=typeof b=="function"?b.call(g,d,f):b,f==null)break t;d=fe({},d,f);break t;case 2:wo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);Ec|=o,n.lanes=o,n.memoizedState=d}}function Jx(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],r=i.callback;if(r!==null){if(i.callback=null,i=e,typeof r!="function")throw Error(O(191,r));r.call(i)}}}var kg={},os=Ia(kg),Tf=Ia(kg),kf=Ia(kg);function nl(n){if(n===kg)throw Error(O(174));return n}function nA(n,t){switch(Xt(kf,t),Xt(Tf,n),Xt(os,kg),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lw(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=lw(t,n)}ee(os),Xt(os,t)}function id(){ee(os),ee(Tf),ee(kf)}function dC(n){nl(kf.current);var t=nl(os.current),e=lw(t,n.type);t!==e&&(Xt(Tf,n),Xt(os,e))}function iA(n){Tf.current===n&&(ee(os),ee(Tf))}var le=Ia(0);function E0(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pv=[];function rA(){for(var n=0;n<Pv.length;n++)Pv[n]._workInProgressVersionPrimary=null;Pv.length=0}var xm=fo.ReactCurrentDispatcher,Dv=fo.ReactCurrentBatchConfig,Sc=0,he=null,Fe=null,We=null,_0=!1,cf=!1,Pf=0,HR=0;function dn(){throw Error(O(321))}function sA(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Er(n[e],t[e]))return!1;return!0}function oA(n,t,e,i,r,s){if(Sc=s,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xm.current=n===null||n.memoizedState===null?XR:qR,n=e(i,r),cf){s=0;do{if(cf=!1,Pf=0,25<=s)throw Error(O(301));s+=1,We=Fe=null,t.updateQueue=null,xm.current=YR,n=e(i,r)}while(cf)}if(xm.current=C0,t=Fe!==null&&Fe.next!==null,Sc=0,We=Fe=he=null,_0=!1,t)throw Error(O(300));return n}function aA(){var n=Pf!==0;return Pf=0,n}function Rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?he.memoizedState=We=n:We=We.next=n,We}function tr(){if(Fe===null){var n=he.alternate;n=n!==null?n.memoizedState:null}else n=Fe.next;var t=We===null?he.memoizedState:We.next;if(t!==null)We=t,Fe=n;else{if(n===null)throw Error(O(310));Fe=n,n={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},We===null?he.memoizedState=We=n:We=We.next=n}return We}function Df(n,t){return typeof t=="function"?t(n):t}function Rv(n){var t=tr(),e=t.queue;if(e===null)throw Error(O(311));e.lastRenderedReducer=n;var i=Fe,r=i.baseQueue,s=e.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,e.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var h=u.lane;if((Sc&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,he.lanes|=h,Ec|=h}u=u.next}while(u!==null&&u!==s);c===null?o=i:c.next=l,Er(i,t.memoizedState)||(Kn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,e.lastRenderedState=i}if(n=e.interleaved,n!==null){r=n;do s=r.lane,he.lanes|=s,Ec|=s,r=r.next;while(r!==n)}else r===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Mv(n){var t=tr(),e=t.queue;if(e===null)throw Error(O(311));e.lastRenderedReducer=n;var i=e.dispatch,r=e.pending,s=t.memoizedState;if(r!==null){e.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Er(s,t.memoizedState)||(Kn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,i]}function fC(){}function pC(n,t){var e=he,i=tr(),r=t(),s=!Er(i.memoizedState,r);if(s&&(i.memoizedState=r,Kn=!0),i=i.queue,lA(yC.bind(null,e,i,n),[n]),i.getSnapshot!==t||s||We!==null&&We.memoizedState.tag&1){if(e.flags|=2048,Rf(9,mC.bind(null,e,i,r,t),void 0,null),Ge===null)throw Error(O(349));Sc&30||gC(e,t,r)}return r}function gC(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function mC(n,t,e,i){t.value=e,t.getSnapshot=i,vC(t)&&wC(n)}function yC(n,t,e){return e(function(){vC(t)&&wC(n)})}function vC(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Er(n,e)}catch{return!0}}function wC(n){var t=oo(n,1);t!==null&&Sr(t,n,1,-1)}function tS(n){var t=Rr();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:n},t.queue=n,n=n.dispatch=GR.bind(null,he,n),[t.memoizedState,n]}function Rf(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function bC(){return tr().memoizedState}function Sm(n,t,e,i){var r=Rr();he.flags|=n,r.memoizedState=Rf(1|t,e,void 0,i===void 0?null:i)}function xy(n,t,e,i){var r=tr();i=i===void 0?null:i;var s=void 0;if(Fe!==null){var o=Fe.memoizedState;if(s=o.destroy,i!==null&&sA(i,o.deps)){r.memoizedState=Rf(t,e,s,i);return}}he.flags|=n,r.memoizedState=Rf(1|t,e,s,i)}function eS(n,t){return Sm(8390656,8,n,t)}function lA(n,t){return xy(2048,8,n,t)}function AC(n,t){return xy(4,2,n,t)}function xC(n,t){return xy(4,4,n,t)}function SC(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function EC(n,t,e){return e=e!=null?e.concat([n]):null,xy(4,4,SC.bind(null,t,n),e)}function cA(){}function _C(n,t){var e=tr();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&sA(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function CC(n,t){var e=tr();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&sA(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function TC(n,t,e){return Sc&21?(Er(e,t)||(e=M_(),he.lanes|=e,Ec|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Kn=!0),n.memoizedState=e)}function VR(n,t){var e=Dt;Dt=e!==0&&4>e?e:4,n(!0);var i=Dv.transition;Dv.transition={};try{n(!1),t()}finally{Dt=e,Dv.transition=i}}function kC(){return tr().memoizedState}function WR(n,t,e){var i=Ea(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},PC(n))DC(t,e);else if(e=uC(n,t,e,i),e!==null){var r=Fn();Sr(e,n,i,r),RC(e,t,i)}}function GR(n,t,e){var i=Ea(n),r={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(PC(n))DC(t,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,e);if(r.hasEagerState=!0,r.eagerState=l,Er(l,o)){var c=t.interleaved;c===null?(r.next=r,tA(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}e=uC(n,t,r,i),e!==null&&(r=Fn(),Sr(e,n,i,r),RC(e,t,i))}}function PC(n){var t=n.alternate;return n===he||t!==null&&t===he}function DC(n,t){cf=_0=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function RC(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,$1(n,e)}}var C0={readContext:Ji,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},XR={readContext:Ji,useCallback:function(n,t){return Rr().memoizedState=[n,t===void 0?null:t],n},useContext:Ji,useEffect:eS,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Sm(4194308,4,SC.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Sm(4194308,4,n,t)},useInsertionEffect:function(n,t){return Sm(4,2,n,t)},useMemo:function(n,t){var e=Rr();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Rr();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=WR.bind(null,he,n),[i.memoizedState,n]},useRef:function(n){var t=Rr();return n={current:n},t.memoizedState=n},useState:tS,useDebugValue:cA,useDeferredValue:function(n){return Rr().memoizedState=n},useTransition:function(){var n=tS(!1),t=n[0];return n=VR.bind(null,n[1]),Rr().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=he,r=Rr();if(se){if(e===void 0)throw Error(O(407));e=e()}else{if(e=t(),Ge===null)throw Error(O(349));Sc&30||gC(i,t,e)}r.memoizedState=e;var s={value:e,getSnapshot:t};return r.queue=s,eS(yC.bind(null,i,s,n),[n]),i.flags|=2048,Rf(9,mC.bind(null,i,s,e,t),void 0,null),e},useId:function(){var n=Rr(),t=Ge.identifierPrefix;if(se){var e=to,i=Js;e=(i&~(1<<32-xr(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=Pf++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=HR++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},qR={readContext:Ji,useCallback:_C,useContext:Ji,useEffect:lA,useImperativeHandle:EC,useInsertionEffect:AC,useLayoutEffect:xC,useMemo:CC,useReducer:Rv,useRef:bC,useState:function(){return Rv(Df)},useDebugValue:cA,useDeferredValue:function(n){var t=tr();return TC(t,Fe.memoizedState,n)},useTransition:function(){var n=Rv(Df)[0],t=tr().memoizedState;return[n,t]},useMutableSource:fC,useSyncExternalStore:pC,useId:kC,unstable_isNewReconciler:!1},YR={readContext:Ji,useCallback:_C,useContext:Ji,useEffect:lA,useImperativeHandle:EC,useInsertionEffect:AC,useLayoutEffect:xC,useMemo:CC,useReducer:Mv,useRef:bC,useState:function(){return Mv(Df)},useDebugValue:cA,useDeferredValue:function(n){var t=tr();return Fe===null?t.memoizedState=n:TC(t,Fe.memoizedState,n)},useTransition:function(){var n=Mv(Df)[0],t=tr().memoizedState;return[n,t]},useMutableSource:fC,useSyncExternalStore:pC,useId:kC,unstable_isNewReconciler:!1};function or(n,t){if(n&&n.defaultProps){t=fe({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function Pw(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:fe({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Sy={isMounted:function(n){return(n=n._reactInternals)?Rc(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Fn(),r=Ea(n),s=eo(i,r);s.payload=t,e!=null&&(s.callback=e),t=xa(n,s,r),t!==null&&(Sr(t,n,r,i),Am(t,n,r))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Fn(),r=Ea(n),s=eo(i,r);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=xa(n,s,r),t!==null&&(Sr(t,n,r,i),Am(t,n,r))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Fn(),i=Ea(n),r=eo(e,i);r.tag=2,t!=null&&(r.callback=t),t=xa(n,r,i),t!==null&&(Sr(t,n,i,e),Am(t,n,i))}};function nS(n,t,e,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Sf(e,i)||!Sf(r,s):!0}function MC(n,t,e){var i=!1,r=ka,s=t.contextType;return typeof s=="object"&&s!==null?s=Ji(s):(r=Zn(t)?Ac:En.current,i=t.contextTypes,s=(i=i!=null)?td(n,r):ka),t=new t(e,s),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sy,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),t}function iS(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Sy.enqueueReplaceState(t,t.state,null)}function Dw(n,t,e,i){var r=n.stateNode;r.props=e,r.state=n.memoizedState,r.refs={},eA(n);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Ji(s):(s=Zn(t)?Ac:En.current,r.context=td(n,s)),r.state=n.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Pw(n,t,s,e),r.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Sy.enqueueReplaceState(r,r.state,null),S0(n,e,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function rd(n,t){try{var e="",i=t;do e+=SD(i),i=i.return;while(i);var r=e}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:t,stack:r,digest:null}}function Lv(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function Rw(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var KR=typeof WeakMap=="function"?WeakMap:Map;function LC(n,t,e){e=eo(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){k0||(k0=!0,Uw=i),Rw(n,t)},e}function FC(n,t,e){e=eo(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;e.payload=function(){return i(r)},e.callback=function(){Rw(n,t)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Rw(n,t),typeof i!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function rS(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new KR;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(e)||(r.add(e),n=uM.bind(null,n,t,e),t.then(n,n))}function sS(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function oS(n,t,e,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=eo(-1,1),t.tag=2,xa(e,t,1))),e.lanes|=1),n)}var QR=fo.ReactCurrentOwner,Kn=!1;function Rn(n,t,e,i){t.child=n===null?cC(t,null,e,i):nd(t,n.child,e,i)}function aS(n,t,e,i,r){e=e.render;var s=t.ref;return xu(t,r),i=oA(n,t,e,i,s,r),e=aA(),n!==null&&!Kn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~r,ao(n,t,r)):(se&&e&&q1(t),t.flags|=1,Rn(n,t,i,r),t.child)}function lS(n,t,e,i,r){if(n===null){var s=e.type;return typeof s=="function"&&!yA(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,NC(n,t,s,i,r)):(n=Tm(e.type,null,i,t,t.mode,r),n.ref=t.ref,n.return=t,t.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(e=e.compare,e=e!==null?e:Sf,e(o,i)&&n.ref===t.ref)return ao(n,t,r)}return t.flags|=1,n=_a(s,i),n.ref=t.ref,n.return=t,t.child=n}function NC(n,t,e,i,r){if(n!==null){var s=n.memoizedProps;if(Sf(s,i)&&n.ref===t.ref)if(Kn=!1,t.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Kn=!0);else return t.lanes=n.lanes,ao(n,t,r)}return Mw(n,t,e,i,r)}function IC(n,t,e){var i=t.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(cu,Ai),Ai|=e;else{if(!(e&1073741824))return n=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Xt(cu,Ai),Ai|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:e,Xt(cu,Ai),Ai|=i}else s!==null?(i=s.baseLanes|e,t.memoizedState=null):i=e,Xt(cu,Ai),Ai|=i;return Rn(n,t,r,e),t.child}function OC(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Mw(n,t,e,i,r){var s=Zn(e)?Ac:En.current;return s=td(t,s),xu(t,r),e=oA(n,t,e,i,s,r),i=aA(),n!==null&&!Kn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~r,ao(n,t,r)):(se&&i&&q1(t),t.flags|=1,Rn(n,t,e,r),t.child)}function cS(n,t,e,i,r){if(Zn(e)){var s=!0;v0(t)}else s=!1;if(xu(t,r),t.stateNode===null)Em(n,t),MC(t,e,i),Dw(t,e,i,r),i=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Ji(u):(u=Zn(e)?Ac:En.current,u=td(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&iS(t,o,i,u),wo=!1;var f=t.memoizedState;o.state=f,S0(t,i,o,r),c=t.memoizedState,l!==i||f!==c||Qn.current||wo?(typeof h=="function"&&(Pw(t,e,h,i),c=t.memoizedState),(l=wo||nS(t,e,l,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,hC(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:or(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Ji(c):(c=Zn(e)?Ac:En.current,c=td(t,c));var g=e.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&iS(t,o,i,c),wo=!1,f=t.memoizedState,o.state=f,S0(t,i,o,r);var b=t.memoizedState;l!==d||f!==b||Qn.current||wo?(typeof g=="function"&&(Pw(t,e,g,i),b=t.memoizedState),(u=wo||nS(t,e,u,i,f,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=b),o.props=i,o.state=b,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return Lw(n,t,e,i,s,r)}function Lw(n,t,e,i,r,s){OC(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return r&&qx(t,e,!1),ao(n,t,s);i=t.stateNode,QR.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=nd(t,n.child,null,s),t.child=nd(t,null,l,s)):Rn(n,t,l,s),t.memoizedState=i.state,r&&qx(t,e,!0),t.child}function BC(n){var t=n.stateNode;t.pendingContext?Xx(n,t.pendingContext,t.pendingContext!==t.context):t.context&&Xx(n,t.context,!1),nA(n,t.containerInfo)}function uS(n,t,e,i,r){return ed(),K1(r),t.flags|=256,Rn(n,t,e,i),t.child}var Fw={dehydrated:null,treeContext:null,retryLane:0};function Nw(n){return{baseLanes:n,cachePool:null,transitions:null}}function jC(n,t,e){var i=t.pendingProps,r=le.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(s=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Xt(le,r&1),n===null)return Tw(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cy(o,i,0,null),n=yc(n,i,e,null),s.return=t,n.return=t,s.sibling=n,t.child=s,t.child.memoizedState=Nw(e),t.memoizedState=Fw,n):uA(t,o));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return ZR(n,t,o,i,l,r,e);if(s){s=i.fallback,o=t.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=_a(r,c),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=_a(l,s):(s=yc(s,o,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=n.child.memoizedState,o=o===null?Nw(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~e,t.memoizedState=Fw,i}return s=n.child,n=s.sibling,i=_a(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function uA(n,t){return t=Cy({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function Jg(n,t,e,i){return i!==null&&K1(i),nd(t,n.child,null,e),n=uA(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function ZR(n,t,e,i,r,s,o){if(e)return t.flags&256?(t.flags&=-257,i=Lv(Error(O(422))),Jg(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Cy({mode:"visible",children:i.children},r,0,null),s=yc(s,r,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&nd(t,n.child,null,o),t.child.memoizedState=Nw(o),t.memoizedState=Fw,s);if(!(t.mode&1))return Jg(n,t,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(O(419)),i=Lv(s,i,void 0),Jg(n,t,o,i)}if(l=(o&n.childLanes)!==0,Kn||l){if(i=Ge,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,oo(n,r),Sr(i,n,r,-1))}return mA(),i=Lv(Error(O(421))),Jg(n,t,o,i)}return r.data==="$?"?(t.flags|=128,t.child=n.child,t=hM.bind(null,n),r._reactRetry=t,null):(n=s.treeContext,Ei=Aa(r.nextSibling),_i=t,se=!0,br=null,n!==null&&(Gi[Xi++]=Js,Gi[Xi++]=to,Gi[Xi++]=xc,Js=n.id,to=n.overflow,xc=t),t=uA(t,i.children),t.flags|=4096,t)}function hS(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),kw(n.return,t,e)}function Fv(n,t,e,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=r)}function $C(n,t,e){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Rn(n,t,i.children,e),i=le.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hS(n,e,t);else if(n.tag===19)hS(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Xt(le,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(e=t.child,r=null;e!==null;)n=e.alternate,n!==null&&E0(n)===null&&(r=e),e=e.sibling;e=r,e===null?(r=t.child,t.child=null):(r=e.sibling,e.sibling=null),Fv(t,!1,r,e,s);break;case"backwards":for(e=null,r=t.child,t.child=null;r!==null;){if(n=r.alternate,n!==null&&E0(n)===null){t.child=r;break}n=r.sibling,r.sibling=e,e=r,r=n}Fv(t,!0,e,null,s);break;case"together":Fv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Em(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function ao(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Ec|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(O(153));if(t.child!==null){for(n=t.child,e=_a(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=_a(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function JR(n,t,e){switch(t.tag){case 3:BC(t),ed();break;case 5:dC(t);break;case 1:Zn(t.type)&&v0(t);break;case 4:nA(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Xt(A0,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Xt(le,le.current&1),t.flags|=128,null):e&t.child.childLanes?jC(n,t,e):(Xt(le,le.current&1),n=ao(n,t,e),n!==null?n.sibling:null);Xt(le,le.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return $C(n,t,e);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Xt(le,le.current),i)break;return null;case 22:case 23:return t.lanes=0,IC(n,t,e)}return ao(n,t,e)}var UC,Iw,zC,HC;UC=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Iw=function(){};zC=function(n,t,e,i){var r=n.memoizedProps;if(r!==i){n=t.stateNode,nl(os.current);var s=null;switch(e){case"input":r=rw(n,r),i=rw(n,i),s=[];break;case"select":r=fe({},r,{value:void 0}),i=fe({},i,{value:void 0}),s=[];break;case"textarea":r=aw(n,r),i=aw(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=m0)}cw(e,i);var o;e=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(s||(s=[]),s.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mf.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Kt("scroll",n),s||l===c||(s=[])):(s=s||[]).push(u,c))}e&&(s=s||[]).push("style",e);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};HC=function(n,t,e,i){e!==i&&(t.flags|=4)};function Ed(n,t){if(!se)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function fn(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function tM(n,t,e){var i=t.pendingProps;switch(Y1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return Zn(t.type)&&y0(),fn(t),null;case 3:return i=t.stateNode,id(),ee(Qn),ee(En),rA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Qg(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,br!==null&&(Vw(br),br=null))),Iw(n,t),fn(t),null;case 5:iA(t);var r=nl(kf.current);if(e=t.type,n!==null&&t.stateNode!=null)zC(n,t,e,i,r),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(O(166));return fn(t),null}if(n=nl(os.current),Qg(t)){i=t.stateNode,e=t.type;var s=t.memoizedProps;switch(i[ns]=t,i[Cf]=s,n=(t.mode&1)!==0,e){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(r=0;r<Fd.length;r++)Kt(Fd[r],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":bx(i,s),Kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",i);break;case"textarea":xx(i,s),Kt("invalid",i)}cw(e,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Kg(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Kg(i.textContent,l,n),r=["children",""+l]):mf.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Kt("scroll",i)}switch(e){case"input":zg(i),Ax(i,s,!0);break;case"textarea":zg(i),Sx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=m0)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=y_(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[ns]=t,n[Cf]=i,UC(n,t,!1,!1),t.stateNode=n;t:{switch(o=uw(e,i),e){case"dialog":Kt("cancel",n),Kt("close",n),r=i;break;case"iframe":case"object":case"embed":Kt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Fd.length;r++)Kt(Fd[r],n);r=i;break;case"source":Kt("error",n),r=i;break;case"img":case"image":case"link":Kt("error",n),Kt("load",n),r=i;break;case"details":Kt("toggle",n),r=i;break;case"input":bx(n,i),r=rw(n,i),Kt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=fe({},i,{value:void 0}),Kt("invalid",n);break;case"textarea":xx(n,i),r=aw(n,i),Kt("invalid",n);break;default:r=i}cw(e,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?b_(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&v_(n,c)):s==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&yf(n,c):typeof c=="number"&&yf(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mf.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Kt("scroll",n):c!=null&&F1(n,s,c,o))}switch(e){case"input":zg(n),Ax(n,i,!1);break;case"textarea":zg(n),Sx(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ta(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?vu(n,!!i.multiple,s,!1):i.defaultValue!=null&&vu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=m0)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fn(t),null;case 6:if(n&&t.stateNode!=null)HC(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(O(166));if(e=nl(kf.current),nl(os.current),Qg(t)){if(i=t.stateNode,e=t.memoizedProps,i[ns]=t,(s=i.nodeValue!==e)&&(n=_i,n!==null))switch(n.tag){case 3:Kg(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kg(i.nodeValue,e,(n.mode&1)!==0)}s&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[ns]=t,t.stateNode=i}return fn(t),null;case 13:if(ee(le),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(se&&Ei!==null&&t.mode&1&&!(t.flags&128))aC(),ed(),t.flags|=98560,s=!1;else if(s=Qg(t),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(O(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[ns]=t}else ed(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fn(t),s=!1}else br!==null&&(Vw(br),br=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||le.current&1?Ne===0&&(Ne=3):mA())),t.updateQueue!==null&&(t.flags|=4),fn(t),null);case 4:return id(),Iw(n,t),n===null&&Ef(t.stateNode.containerInfo),fn(t),null;case 10:return J1(t.type._context),fn(t),null;case 17:return Zn(t.type)&&y0(),fn(t),null;case 19:if(ee(le),s=t.memoizedState,s===null)return fn(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Ed(s,!1);else{if(Ne!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=E0(n),o!==null){for(t.flags|=128,Ed(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)s=e,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Xt(le,le.current&1|2),t.child}n=n.sibling}s.tail!==null&&Ee()>sd&&(t.flags|=128,i=!0,Ed(s,!1),t.lanes=4194304)}else{if(!i)if(n=E0(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Ed(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!se)return fn(t),null}else 2*Ee()-s.renderingStartTime>sd&&e!==1073741824&&(t.flags|=128,i=!0,Ed(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(e=s.last,e!==null?e.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ee(),t.sibling=null,e=le.current,Xt(le,i?e&1|2:e&1),t):(fn(t),null);case 22:case 23:return gA(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ai&1073741824&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function eM(n,t){switch(Y1(t),t.tag){case 1:return Zn(t.type)&&y0(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return id(),ee(Qn),ee(En),rA(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return iA(t),null;case 13:if(ee(le),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(O(340));ed()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return ee(le),null;case 4:return id(),null;case 10:return J1(t.type._context),null;case 22:case 23:return gA(),null;case 24:return null;default:return null}}var tm=!1,xn=!1,nM=typeof WeakSet=="function"?WeakSet:Set,Y=null;function lu(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){we(n,t,i)}else e.current=null}function Ow(n,t,e){try{e()}catch(i){we(n,t,i)}}var dS=!1;function iM(n,t){if(bw=f0,n=q_(),X1(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var g;d!==e||r!==0&&d.nodeType!==3||(l=o+r),d!==s||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break e;if(f===e&&++u===r&&(l=o),f===s&&++h===i&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Aw={focusedElem:n,selectionRange:e},f0=!1,Y=t;Y!==null;)if(t=Y,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,Y=n;else for(;Y!==null;){t=Y;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,S=b.memoizedState,m=t.stateNode,w=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:or(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){we(t,t.return,E)}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}return b=dS,dS=!1,b}function uf(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ow(t,e,s)}r=r.next}while(r!==i)}}function Ey(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function Bw(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function VC(n){var t=n.alternate;t!==null&&(n.alternate=null,VC(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[ns],delete t[Cf],delete t[Ew],delete t[jR],delete t[$R])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function WC(n){return n.tag===5||n.tag===3||n.tag===4}function fS(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||WC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jw(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=m0));else if(i!==4&&(n=n.child,n!==null))for(jw(n,t,e),n=n.sibling;n!==null;)jw(n,t,e),n=n.sibling}function $w(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for($w(n,t,e),n=n.sibling;n!==null;)$w(n,t,e),n=n.sibling}var rn=null,wr=!1;function mo(n,t,e){for(e=e.child;e!==null;)GC(n,t,e),e=e.sibling}function GC(n,t,e){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(my,e)}catch{}switch(e.tag){case 5:xn||lu(e,t);case 6:var i=rn,r=wr;rn=null,mo(n,t,e),rn=i,wr=r,rn!==null&&(wr?(n=rn,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):rn.removeChild(e.stateNode));break;case 18:rn!==null&&(wr?(n=rn,e=e.stateNode,n.nodeType===8?Tv(n.parentNode,e):n.nodeType===1&&Tv(n,e),Af(n)):Tv(rn,e.stateNode));break;case 4:i=rn,r=wr,rn=e.stateNode.containerInfo,wr=!0,mo(n,t,e),rn=i,wr=r;break;case 0:case 11:case 14:case 15:if(!xn&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ow(e,t,o),r=r.next}while(r!==i)}mo(n,t,e);break;case 1:if(!xn&&(lu(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){we(e,t,l)}mo(n,t,e);break;case 21:mo(n,t,e);break;case 22:e.mode&1?(xn=(i=xn)||e.memoizedState!==null,mo(n,t,e),xn=i):mo(n,t,e);break;default:mo(n,t,e)}}function pS(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new nM),t.forEach(function(i){var r=dM.bind(null,n,i);e.has(i)||(e.add(i),i.then(r,r))})}}function ir(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var r=e[i];try{var s=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,wr=!1;break t;case 3:rn=l.stateNode.containerInfo,wr=!0;break t;case 4:rn=l.stateNode.containerInfo,wr=!0;break t}l=l.return}if(rn===null)throw Error(O(160));GC(s,o,r),rn=null,wr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){we(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XC(t,n),t=t.sibling}function XC(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ir(t,n),Tr(n),i&4){try{uf(3,n,n.return),Ey(3,n)}catch(v){we(n,n.return,v)}try{uf(5,n,n.return)}catch(v){we(n,n.return,v)}}break;case 1:ir(t,n),Tr(n),i&512&&e!==null&&lu(e,e.return);break;case 5:if(ir(t,n),Tr(n),i&512&&e!==null&&lu(e,e.return),n.flags&32){var r=n.stateNode;try{yf(r,"")}catch(v){we(n,n.return,v)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=e!==null?e.memoizedProps:s,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&g_(r,s),uw(l,o);var u=uw(l,s);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?b_(r,d):h==="dangerouslySetInnerHTML"?v_(r,d):h==="children"?yf(r,d):F1(r,h,d,u)}switch(l){case"input":sw(r,s);break;case"textarea":m_(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?vu(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?vu(r,!!s.multiple,s.defaultValue,!0):vu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Cf]=s}catch(v){we(n,n.return,v)}}break;case 6:if(ir(t,n),Tr(n),i&4){if(n.stateNode===null)throw Error(O(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(v){we(n,n.return,v)}}break;case 3:if(ir(t,n),Tr(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Af(t.containerInfo)}catch(v){we(n,n.return,v)}break;case 4:ir(t,n),Tr(n);break;case 13:ir(t,n),Tr(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(fA=Ee())),i&4&&pS(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(xn=(u=xn)||h,ir(t,n),xn=u):ir(t,n),Tr(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Y=n,h=n.child;h!==null;){for(d=Y=h;Y!==null;){switch(f=Y,g=f.child,f.tag){case 0:case 11:case 14:case 15:uf(4,f,f.return);break;case 1:lu(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){we(i,e,v)}}break;case 5:lu(f,f.return);break;case 22:if(f.memoizedState!==null){mS(d);continue}}g!==null?(g.return=f,Y=g):mS(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=w_("display",o))}catch(v){we(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){we(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ir(t,n),Tr(n),i&4&&pS(n);break;case 21:break;default:ir(t,n),Tr(n)}}function Tr(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(WC(e)){var i=e;break t}e=e.return}throw Error(O(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(yf(r,""),i.flags&=-33);var s=fS(n);$w(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=fS(n);jw(n,l,o);break;default:throw Error(O(161))}}catch(c){we(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function rM(n,t,e){Y=n,qC(n)}function qC(n,t,e){for(var i=(n.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||tm;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||xn;l=tm;var u=xn;if(tm=o,(xn=c)&&!u)for(Y=r;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?yS(r):c!==null?(c.return=o,Y=c):yS(r);for(;s!==null;)Y=s,qC(s),s=s.sibling;Y=r,tm=l,xn=u}gS(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):gS(n)}}function gS(n){for(;Y!==null;){var t=Y;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||Ey(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!xn)if(e===null)i.componentDidMount();else{var r=t.elementType===t.type?e.memoizedProps:or(t.type,e.memoizedProps);i.componentDidUpdate(r,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Jx(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Jx(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Af(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}xn||t.flags&512&&Bw(t)}catch(f){we(t,t.return,f)}}if(t===n){Y=null;break}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}}function mS(n){for(;Y!==null;){var t=Y;if(t===n){Y=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Y=e;break}Y=t.return}}function yS(n){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Ey(4,t)}catch(c){we(t,e,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(c){we(t,r,c)}}var s=t.return;try{Bw(t)}catch(c){we(t,s,c)}break;case 5:var o=t.return;try{Bw(t)}catch(c){we(t,o,c)}}}catch(c){we(t,t.return,c)}if(t===n){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var sM=Math.ceil,T0=fo.ReactCurrentDispatcher,hA=fo.ReactCurrentOwner,Qi=fo.ReactCurrentBatchConfig,At=0,Ge=null,ke=null,cn=0,Ai=0,cu=Ia(0),Ne=0,Mf=null,Ec=0,_y=0,dA=0,hf=null,Yn=null,fA=0,sd=1/0,ps=null,k0=!1,Uw=null,Sa=null,em=!1,ya=null,P0=0,df=0,zw=null,_m=-1,Cm=0;function Fn(){return At&6?Ee():_m!==-1?_m:_m=Ee()}function Ea(n){return n.mode&1?At&2&&cn!==0?cn&-cn:zR.transition!==null?(Cm===0&&(Cm=M_()),Cm):(n=Dt,n!==0||(n=window.event,n=n===void 0?16:j_(n.type)),n):1}function Sr(n,t,e,i){if(50<df)throw df=0,zw=null,Error(O(185));_g(n,e,i),(!(At&2)||n!==Ge)&&(n===Ge&&(!(At&2)&&(_y|=e),Ne===4&&Ao(n,cn)),Jn(n,i),e===1&&At===0&&!(t.mode&1)&&(sd=Ee()+500,Ay&&Oa()))}function Jn(n,t){var e=n.callbackNode;zD(n,t);var i=d0(n,n===Ge?cn:0);if(i===0)e!==null&&Cx(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&Cx(e),t===1)n.tag===0?UR(vS.bind(null,n)):rC(vS.bind(null,n)),OR(function(){!(At&6)&&Oa()}),e=null;else{switch(L_(i)){case 1:e=j1;break;case 4:e=D_;break;case 16:e=h0;break;case 536870912:e=R_;break;default:e=h0}e=nT(e,YC.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function YC(n,t){if(_m=-1,Cm=0,At&6)throw Error(O(327));var e=n.callbackNode;if(Su()&&n.callbackNode!==e)return null;var i=d0(n,n===Ge?cn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=D0(n,i);else{t=i;var r=At;At|=2;var s=QC();(Ge!==n||cn!==t)&&(ps=null,sd=Ee()+500,mc(n,t));do try{lM();break}catch(l){KC(n,l)}while(!0);Z1(),T0.current=s,At=r,ke!==null?t=0:(Ge=null,cn=0,t=Ne)}if(t!==0){if(t===2&&(r=gw(n),r!==0&&(i=r,t=Hw(n,r))),t===1)throw e=Mf,mc(n,0),Ao(n,i),Jn(n,Ee()),e;if(t===6)Ao(n,i);else{if(r=n.current.alternate,!(i&30)&&!oM(r)&&(t=D0(n,i),t===2&&(s=gw(n),s!==0&&(i=s,t=Hw(n,s))),t===1))throw e=Mf,mc(n,0),Ao(n,i),Jn(n,Ee()),e;switch(n.finishedWork=r,n.finishedLanes=i,t){case 0:case 1:throw Error(O(345));case 2:Ga(n,Yn,ps);break;case 3:if(Ao(n,i),(i&130023424)===i&&(t=fA+500-Ee(),10<t)){if(d0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Fn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Sw(Ga.bind(null,n,Yn,ps),t);break}Ga(n,Yn,ps);break;case 4:if(Ao(n,i),(i&4194240)===i)break;for(t=n.eventTimes,r=-1;0<i;){var o=31-xr(i);s=1<<o,o=t[o],o>r&&(r=o),i&=~s}if(i=r,i=Ee()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*sM(i/1960))-i,10<i){n.timeoutHandle=Sw(Ga.bind(null,n,Yn,ps),i);break}Ga(n,Yn,ps);break;case 5:Ga(n,Yn,ps);break;default:throw Error(O(329))}}}return Jn(n,Ee()),n.callbackNode===e?YC.bind(null,n):null}function Hw(n,t){var e=hf;return n.current.memoizedState.isDehydrated&&(mc(n,t).flags|=256),n=D0(n,t),n!==2&&(t=Yn,Yn=e,t!==null&&Vw(t)),n}function Vw(n){Yn===null?Yn=n:Yn.push.apply(Yn,n)}function oM(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var r=e[i],s=r.getSnapshot;r=r.value;try{if(!Er(s(),r))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ao(n,t){for(t&=~dA,t&=~_y,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-xr(t),i=1<<e;n[e]=-1,t&=~i}}function vS(n){if(At&6)throw Error(O(327));Su();var t=d0(n,0);if(!(t&1))return Jn(n,Ee()),null;var e=D0(n,t);if(n.tag!==0&&e===2){var i=gw(n);i!==0&&(t=i,e=Hw(n,i))}if(e===1)throw e=Mf,mc(n,0),Ao(n,t),Jn(n,Ee()),e;if(e===6)throw Error(O(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Ga(n,Yn,ps),Jn(n,Ee()),null}function pA(n,t){var e=At;At|=1;try{return n(t)}finally{At=e,At===0&&(sd=Ee()+500,Ay&&Oa())}}function _c(n){ya!==null&&ya.tag===0&&!(At&6)&&Su();var t=At;At|=1;var e=Qi.transition,i=Dt;try{if(Qi.transition=null,Dt=1,n)return n()}finally{Dt=i,Qi.transition=e,At=t,!(At&6)&&Oa()}}function gA(){Ai=cu.current,ee(cu)}function mc(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,IR(e)),ke!==null)for(e=ke.return;e!==null;){var i=e;switch(Y1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&y0();break;case 3:id(),ee(Qn),ee(En),rA();break;case 5:iA(i);break;case 4:id();break;case 13:ee(le);break;case 19:ee(le);break;case 10:J1(i.type._context);break;case 22:case 23:gA()}e=e.return}if(Ge=n,ke=n=_a(n.current,null),cn=Ai=t,Ne=0,Mf=null,dA=_y=Ec=0,Yn=hf=null,el!==null){for(t=0;t<el.length;t++)if(e=el[t],i=e.interleaved,i!==null){e.interleaved=null;var r=i.next,s=e.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}e.pending=i}el=null}return n}function KC(n,t){do{var e=ke;try{if(Z1(),xm.current=C0,_0){for(var i=he.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_0=!1}if(Sc=0,We=Fe=he=null,cf=!1,Pf=0,hA.current=null,e===null||e.return===null){Ne=1,Mf=t,ke=null;break}t:{var s=n,o=e.return,l=e,c=t;if(t=cn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=sS(o);if(g!==null){g.flags&=-257,oS(g,o,l,s,t),g.mode&1&&rS(s,u,t),t=g,c=u;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break t}else{if(!(t&1)){rS(s,u,t),mA();break t}c=Error(O(426))}}else if(se&&l.mode&1){var S=sS(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),oS(S,o,l,s,t),K1(rd(c,l));break t}}s=c=rd(c,l),Ne!==4&&(Ne=2),hf===null?hf=[s]:hf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=LC(s,c,t);Zx(s,m);break t;case 1:l=c;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Sa===null||!Sa.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=FC(s,l,t);Zx(s,E);break t}}s=s.return}while(s!==null)}JC(e)}catch(C){t=C,ke===e&&e!==null&&(ke=e=e.return);continue}break}while(!0)}function QC(){var n=T0.current;return T0.current=C0,n===null?C0:n}function mA(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Ge===null||!(Ec&268435455)&&!(_y&268435455)||Ao(Ge,cn)}function D0(n,t){var e=At;At|=2;var i=QC();(Ge!==n||cn!==t)&&(ps=null,mc(n,t));do try{aM();break}catch(r){KC(n,r)}while(!0);if(Z1(),At=e,T0.current=i,ke!==null)throw Error(O(261));return Ge=null,cn=0,Ne}function aM(){for(;ke!==null;)ZC(ke)}function lM(){for(;ke!==null&&!LD();)ZC(ke)}function ZC(n){var t=eT(n.alternate,n,Ai);n.memoizedProps=n.pendingProps,t===null?JC(n):ke=t,hA.current=null}function JC(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=eM(e,t),e!==null){e.flags&=32767,ke=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ne=6,ke=null;return}}else if(e=tM(e,t,Ai),e!==null){ke=e;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=n}while(t!==null);Ne===0&&(Ne=5)}function Ga(n,t,e){var i=Dt,r=Qi.transition;try{Qi.transition=null,Dt=1,cM(n,t,e,i)}finally{Qi.transition=r,Dt=i}return null}function cM(n,t,e,i){do Su();while(ya!==null);if(At&6)throw Error(O(327));e=n.finishedWork;var r=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(O(177));n.callbackNode=null,n.callbackPriority=0;var s=e.lanes|e.childLanes;if(HD(n,s),n===Ge&&(ke=Ge=null,cn=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||em||(em=!0,nT(h0,function(){return Su(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=Qi.transition,Qi.transition=null;var o=Dt;Dt=1;var l=At;At|=4,hA.current=null,iM(n,e),XC(e,n),PR(Aw),f0=!!bw,Aw=bw=null,n.current=e,rM(e),FD(),At=l,Dt=o,Qi.transition=s}else n.current=e;if(em&&(em=!1,ya=n,P0=r),s=n.pendingLanes,s===0&&(Sa=null),OD(e.stateNode),Jn(n,Ee()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)r=t[e],i(r.value,{componentStack:r.stack,digest:r.digest});if(k0)throw k0=!1,n=Uw,Uw=null,n;return P0&1&&n.tag!==0&&Su(),s=n.pendingLanes,s&1?n===zw?df++:(df=0,zw=n):df=0,Oa(),null}function Su(){if(ya!==null){var n=L_(P0),t=Qi.transition,e=Dt;try{if(Qi.transition=null,Dt=16>n?16:n,ya===null)var i=!1;else{if(n=ya,ya=null,P0=0,At&6)throw Error(O(331));var r=At;for(At|=4,Y=n.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Y=u;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:uf(8,h,s)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var f=h.sibling,g=h.return;if(VC(h),h===u){Y=null;break}if(f!==null){f.return=g,Y=f;break}Y=g}}}var b=s.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else t:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uf(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Y=m;break t}Y=s.return}}var w=n.current;for(Y=w;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else t:for(o=w;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ey(9,l)}}catch(C){we(l,l.return,C)}if(l===o){Y=null;break t}var E=l.sibling;if(E!==null){E.return=l.return,Y=E;break t}Y=l.return}}if(At=r,Oa(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(my,n)}catch{}i=!0}return i}finally{Dt=e,Qi.transition=t}}return!1}function wS(n,t,e){t=rd(e,t),t=LC(n,t,1),n=xa(n,t,1),t=Fn(),n!==null&&(_g(n,1,t),Jn(n,t))}function we(n,t,e){if(n.tag===3)wS(n,n,e);else for(;t!==null;){if(t.tag===3){wS(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Sa===null||!Sa.has(i))){n=rd(e,n),n=FC(t,n,1),t=xa(t,n,1),n=Fn(),t!==null&&(_g(t,1,n),Jn(t,n));break}}t=t.return}}function uM(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=Fn(),n.pingedLanes|=n.suspendedLanes&e,Ge===n&&(cn&e)===e&&(Ne===4||Ne===3&&(cn&130023424)===cn&&500>Ee()-fA?mc(n,0):dA|=e),Jn(n,t)}function tT(n,t){t===0&&(n.mode&1?(t=Wg,Wg<<=1,!(Wg&130023424)&&(Wg=4194304)):t=1);var e=Fn();n=oo(n,t),n!==null&&(_g(n,t,e),Jn(n,e))}function hM(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),tT(n,e)}function dM(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(e=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(O(314))}i!==null&&i.delete(t),tT(n,e)}var eT;eT=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||Qn.current)Kn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Kn=!1,JR(n,t,e);Kn=!!(n.flags&131072)}else Kn=!1,se&&t.flags&1048576&&sC(t,b0,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Em(n,t),n=t.pendingProps;var r=td(t,En.current);xu(t,e),r=oA(null,t,i,n,r,e);var s=aA();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zn(i)?(s=!0,v0(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eA(t),r.updater=Sy,t.stateNode=r,r._reactInternals=t,Dw(t,i,n,e),t=Lw(null,t,i,!0,s,e)):(t.tag=0,se&&s&&q1(t),Rn(null,t,r,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Em(n,t),n=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=pM(i),n=or(i,n),r){case 0:t=Mw(null,t,i,n,e);break t;case 1:t=cS(null,t,i,n,e);break t;case 11:t=aS(null,t,i,n,e);break t;case 14:t=lS(null,t,i,or(i.type,n),e);break t}throw Error(O(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:or(i,r),Mw(n,t,i,r,e);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:or(i,r),cS(n,t,i,r,e);case 3:t:{if(BC(t),n===null)throw Error(O(387));i=t.pendingProps,s=t.memoizedState,r=s.element,hC(n,t),S0(t,i,null,e);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=rd(Error(O(423)),t),t=uS(n,t,i,e,r);break t}else if(i!==r){r=rd(Error(O(424)),t),t=uS(n,t,i,e,r);break t}else for(Ei=Aa(t.stateNode.containerInfo.firstChild),_i=t,se=!0,br=null,e=cC(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(ed(),i===r){t=ao(n,t,e);break t}Rn(n,t,i,e)}t=t.child}return t;case 5:return dC(t),n===null&&Tw(t),i=t.type,r=t.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,xw(i,r)?o=null:s!==null&&xw(i,s)&&(t.flags|=32),OC(n,t),Rn(n,t,o,e),t.child;case 6:return n===null&&Tw(t),null;case 13:return jC(n,t,e);case 4:return nA(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=nd(t,null,i,e):Rn(n,t,i,e),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:or(i,r),aS(n,t,i,r,e);case 7:return Rn(n,t,t.pendingProps,e),t.child;case 8:return Rn(n,t,t.pendingProps.children,e),t.child;case 12:return Rn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Xt(A0,i._currentValue),i._currentValue=o,s!==null)if(Er(s.value,o)){if(s.children===r.children&&!Qn.current){t=ao(n,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=eo(-1,e&-e),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=e,c=s.alternate,c!==null&&(c.lanes|=e),kw(s.return,e,t),l.lanes|=e;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),kw(o,e,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rn(n,t,r.children,e),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,xu(t,e),r=Ji(r),i=i(r),t.flags|=1,Rn(n,t,i,e),t.child;case 14:return i=t.type,r=or(i,t.pendingProps),r=or(i.type,r),lS(n,t,i,r,e);case 15:return NC(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:or(i,r),Em(n,t),t.tag=1,Zn(i)?(n=!0,v0(t)):n=!1,xu(t,e),MC(t,i,r),Dw(t,i,r,e),Lw(null,t,i,!0,n,e);case 19:return $C(n,t,e);case 22:return IC(n,t,e)}throw Error(O(156,t.tag))};function nT(n,t){return P_(n,t)}function fM(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(n,t,e,i){return new fM(n,t,e,i)}function yA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pM(n){if(typeof n=="function")return yA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===I1)return 11;if(n===O1)return 14}return 2}function _a(n,t){var e=n.alternate;return e===null?(e=Ki(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Tm(n,t,e,i,r,s){var o=2;if(i=n,typeof n=="function")yA(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Jc:return yc(e.children,r,s,t);case N1:o=8,r|=8;break;case tw:return n=Ki(12,e,t,r|2),n.elementType=tw,n.lanes=s,n;case ew:return n=Ki(13,e,t,r),n.elementType=ew,n.lanes=s,n;case nw:return n=Ki(19,e,t,r),n.elementType=nw,n.lanes=s,n;case d_:return Cy(e,r,s,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case u_:o=10;break t;case h_:o=9;break t;case I1:o=11;break t;case O1:o=14;break t;case vo:o=16,i=null;break t}throw Error(O(130,n==null?n:typeof n,""))}return t=Ki(o,e,t,r),t.elementType=n,t.type=i,t.lanes=s,t}function yc(n,t,e,i){return n=Ki(7,n,i,t),n.lanes=e,n}function Cy(n,t,e,i){return n=Ki(22,n,i,t),n.elementType=d_,n.lanes=e,n.stateNode={isHidden:!1},n}function Nv(n,t,e){return n=Ki(6,n,null,t),n.lanes=e,n}function Iv(n,t,e){return t=Ki(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function gM(n,t,e,i,r){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mv(0),this.expirationTimes=mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function vA(n,t,e,i,r,s,o,l,c){return n=new gM(n,t,e,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ki(3,null,null,t),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},eA(s),n}function mM(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zc,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function iT(n){if(!n)return ka;n=n._reactInternals;t:{if(Rc(n)!==n||n.tag!==1)throw Error(O(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(O(171))}if(n.tag===1){var e=n.type;if(Zn(e))return iC(n,e,t)}return t}function rT(n,t,e,i,r,s,o,l,c){return n=vA(e,i,!0,n,r,s,o,l,c),n.context=iT(null),e=n.current,i=Fn(),r=Ea(e),s=eo(i,r),s.callback=t??null,xa(e,s,r),n.current.lanes=r,_g(n,r,i),Jn(n,i),n}function Ty(n,t,e,i){var r=t.current,s=Fn(),o=Ea(r);return e=iT(e),t.context===null?t.context=e:t.pendingContext=e,t=eo(s,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=xa(r,t,o),n!==null&&(Sr(n,r,o,s),Am(n,r,o)),o}function R0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bS(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function wA(n,t){bS(n,t),(n=n.alternate)&&bS(n,t)}function yM(){return null}var sT=typeof reportError=="function"?reportError:function(n){console.error(n)};function bA(n){this._internalRoot=n}ky.prototype.render=bA.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(O(409));Ty(n,t,null,null)};ky.prototype.unmount=bA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;_c(function(){Ty(null,n,null,null)}),t[so]=null}};function ky(n){this._internalRoot=n}ky.prototype.unstable_scheduleHydration=function(n){if(n){var t=I_();n={blockedOn:null,target:n,priority:t};for(var e=0;e<bo.length&&t!==0&&t<bo[e].priority;e++);bo.splice(e,0,n),e===0&&B_(n)}};function AA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Py(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function AS(){}function vM(n,t,e,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=R0(o);s.call(u)}}var o=rT(t,i,n,0,null,!1,!1,"",AS);return n._reactRootContainer=o,n[so]=o.current,Ef(n.nodeType===8?n.parentNode:n),_c(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=R0(c);l.call(u)}}var c=vA(n,0,!1,null,null,!1,!1,"",AS);return n._reactRootContainer=c,n[so]=c.current,Ef(n.nodeType===8?n.parentNode:n),_c(function(){Ty(t,c,e,i)}),c}function Dy(n,t,e,i,r){var s=e._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var c=R0(o);l.call(c)}}Ty(t,o,n,r)}else o=vM(e,t,n,r,i);return R0(o)}F_=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=Ld(t.pendingLanes);e!==0&&($1(t,e|1),Jn(t,Ee()),!(At&6)&&(sd=Ee()+500,Oa()))}break;case 13:_c(function(){var i=oo(n,1);if(i!==null){var r=Fn();Sr(i,n,1,r)}}),wA(n,1)}};U1=function(n){if(n.tag===13){var t=oo(n,134217728);if(t!==null){var e=Fn();Sr(t,n,134217728,e)}wA(n,134217728)}};N_=function(n){if(n.tag===13){var t=Ea(n),e=oo(n,t);if(e!==null){var i=Fn();Sr(e,n,t,i)}wA(n,t)}};I_=function(){return Dt};O_=function(n,t){var e=Dt;try{return Dt=n,t()}finally{Dt=e}};dw=function(n,t,e){switch(t){case"input":if(sw(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var r=by(i);if(!r)throw Error(O(90));p_(i),sw(i,r)}}}break;case"textarea":m_(n,e);break;case"select":t=e.value,t!=null&&vu(n,!!e.multiple,t,!1)}};S_=pA;E_=_c;var wM={usingClientEntryPoint:!1,Events:[Tg,iu,by,A_,x_,pA]},_d={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bM={bundleType:_d.bundleType,version:_d.version,rendererPackageName:_d.rendererPackageName,rendererConfig:_d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=T_(n),n===null?null:n.stateNode},findFiberByHostInstance:_d.findFiberByHostInstance||yM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nm.isDisabled&&nm.supportsFiber)try{my=nm.inject(bM),ss=nm}catch{}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;Pi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AA(t))throw Error(O(200));return mM(n,t,null,e)};Pi.createRoot=function(n,t){if(!AA(n))throw Error(O(299));var e=!1,i="",r=sT;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=vA(n,1,!1,null,null,e,!1,i,r),n[so]=t.current,Ef(n.nodeType===8?n.parentNode:n),new bA(t)};Pi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(O(188)):(n=Object.keys(n).join(","),Error(O(268,n)));return n=T_(t),n=n===null?null:n.stateNode,n};Pi.flushSync=function(n){return _c(n)};Pi.hydrate=function(n,t,e){if(!Py(t))throw Error(O(200));return Dy(null,n,t,!0,e)};Pi.hydrateRoot=function(n,t,e){if(!AA(n))throw Error(O(405));var i=e!=null&&e.hydratedSources||null,r=!1,s="",o=sT;if(e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=rT(t,null,n,1,e??null,r,!1,s,o),n[so]=t.current,Ef(n),i)for(n=0;n<i.length;n++)e=i[n],r=e._getVersion,r=r(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,r]:t.mutableSourceEagerHydrationData.push(e,r);return new ky(t)};Pi.render=function(n,t,e){if(!Py(t))throw Error(O(200));return Dy(null,n,t,!1,e)};Pi.unmountComponentAtNode=function(n){if(!Py(n))throw Error(O(40));return n._reactRootContainer?(_c(function(){Dy(null,null,n,!1,function(){n._reactRootContainer=null,n[so]=null})}),!0):!1};Pi.unstable_batchedUpdates=pA;Pi.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!Py(e))throw Error(O(200));if(n==null||n._reactInternals===void 0)throw Error(O(38));return Dy(n,t,e,!1,i)};Pi.version="18.3.1-next-f1338f8080-20240426";function oT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oT)}catch(n){console.error(n)}}oT(),o_.exports=Pi;var AM=o_.exports,aT,xS=AM;aT=xS.createRoot,xS.hydrateRoot;function xM(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,i,r,s,o=[],l="",c=n.split("/");for(c[0]||c.shift();r=c.shift();)e=r[0],e==="*"?(o.push(e),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):e===":"?(i=r.indexOf("?",1),s=r.indexOf(".",1),o.push(r.substring(1,~i?i:~s?s:r.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+r.substring(s))):l+="/"+r;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var lT={exports:{}},cT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=P;function SM(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var EM=typeof Object.is=="function"?Object.is:SM,_M=od.useState,CM=od.useEffect,TM=od.useLayoutEffect,kM=od.useDebugValue;function PM(n,t){var e=t(),i=_M({inst:{value:e,getSnapshot:t}}),r=i[0].inst,s=i[1];return TM(function(){r.value=e,r.getSnapshot=t,Ov(r)&&s({inst:r})},[n,e,t]),CM(function(){return Ov(r)&&s({inst:r}),n(function(){Ov(r)&&s({inst:r})})},[n]),kM(e),e}function Ov(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!EM(n,e)}catch{return!0}}function DM(n,t){return t()}var RM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DM:PM;cT.useSyncExternalStore=od.useSyncExternalStore!==void 0?od.useSyncExternalStore:RM;lT.exports=cT;var MM=lT.exports;const LM=uD.useInsertionEffect,FM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uT=FM?P.useLayoutEffect:P.useEffect,NM=LM||uT,xA=n=>{const t=P.useRef([n,(...e)=>t[0](...e)]).current;return NM(()=>{t[0]=n}),t[1]},IM="popstate",SA="pushState",EA="replaceState",OM="hashchange",SS=[IM,SA,EA,OM],BM=n=>{for(const t of SS)addEventListener(t,n);return()=>{for(const t of SS)removeEventListener(t,n)}},hT=(n,t)=>MM.useSyncExternalStore(BM,n,t),jM=()=>location.search,$M=({ssrSearch:n=""}={})=>hT(jM,()=>n),ES=()=>location.pathname,UM=({ssrPath:n}={})=>hT(ES,n?()=>n:ES),zM=(n,{replace:t=!1,state:e=null}={})=>history[t?EA:SA](e,"",n),HM=(n={})=>[UM(n),zM],_S=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[_S]>"u"){for(const n of[SA,EA]){const t=history[n];history[n]=function(){const e=t.apply(this,arguments),i=new Event(n);return i.arguments=arguments,dispatchEvent(i),e}}Object.defineProperty(window,_S,{value:!0})}const VM=(n,t)=>t.toLowerCase().indexOf(n.toLowerCase())?"~"+t:t.slice(n.length)||"/",dT=(n="")=>n==="/"?"":n,WM=(n,t)=>n[0]==="~"?n.slice(1):dT(t)+n,GM=(n="",t)=>VM(CS(dT(n)),CS(t)),CS=n=>{try{return decodeURI(n)}catch{return n}},fT={hook:HM,searchHook:$M,parser:xM,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},pT=P.createContext(fT),pd=()=>P.useContext(pT),gT={},mT=P.createContext(gT),XM=()=>P.useContext(mT),Ry=n=>{const[t,e]=n.hook(n);return[GM(n.base,t),xA((i,r)=>e(WM(i,n.base),r))]},Pg=()=>Ry(pd()),_A=(n,t,e,i)=>{const{pattern:r,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:n(t||"*",i),o=r.exec(e)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=s!==!1?Object.fromEntries(s.map((d,f)=>[d,c[f]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...i?[l]:[]]:[!1,null]},qM=n=>_A(pd().parser,n,Pg()[0]),YM=({children:n,...t})=>{var h,d;const e=pd(),i=t.hook?fT:e;let r=i;const[s,o]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=s),t.hrefs=t.hrefs??((d=t.hook)==null?void 0:d.hrefs);let l=P.useRef({}),c=l.current,u=c;for(let f in i){const g=f==="base"?i[f]+(t[f]||""):t[f]||i[f];c===u&&g!==u[f]&&(l.current=u={...u}),u[f]=g,g!==i[f]&&(r=u)}return P.createElement(pT.Provider,{value:r,children:n})},TS=({children:n,component:t},e)=>t?P.createElement(t,{params:e}):typeof n=="function"?n(e):n,KM=n=>{let t=P.useRef(gT),e=t.current;for(const i in n)n[i]!==e[i]&&(e=n);return Object.keys(n).length===0&&(e=n),t.current=e},za=({path:n,nest:t,match:e,...i})=>{const r=pd(),[s]=Ry(r),[o,l,c]=e??_A(r.parser,n,s,t),u=KM({...XM(),...l});if(!o)return null;const h=c?P.createElement(YM,{base:c},TS(i,u)):TS(i,u);return P.createElement(mT.Provider,{value:u,children:h})},Nd=P.forwardRef((n,t)=>{const e=pd(),[i,r]=Ry(e),{to:s="",href:o=s,onClick:l,asChild:c,children:u,className:h,replace:d,state:f,...g}=n,b=xA(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(l==null||l(S),S.defaultPrevented||(S.preventDefault(),r(o,n)))}),v=e.hrefs(o[0]==="~"?o.slice(1):e.base+o,e);return c&&P.isValidElement(u)?P.cloneElement(u,{onClick:b,href:v}):P.createElement("a",{...g,onClick:b,href:v,className:h!=null&&h.call?h(i===o):h,children:u,ref:t})}),yT=n=>Array.isArray(n)?n.flatMap(t=>yT(t&&t.type===P.Fragment?t.props.children:t)):[n],QM=({children:n,location:t})=>{const e=pd(),[i]=Ry(e);for(const r of yT(n)){let s=0;if(P.isValidElement(r)&&(s=_A(e.parser,r.props.path,t||i,r.props.nest))[0])return P.cloneElement(r,{match:s})}return null},ZM=n=>{const{to:t,href:e=t}=n,[,i]=Pg(),r=xA(()=>i(t||e,n));return uT(()=>{r()},[]),null},te={get:n=>{try{const t=localStorage.getItem(n);return t?JSON.parse(t):null}catch(t){return console.error("Error reading from localStorage:",t),null}},set:(n,t)=>{try{localStorage.setItem(n,JSON.stringify(t))}catch(e){console.error("Error writing to localStorage:",e)}},remove:n=>{try{localStorage.removeItem(n)}catch(t){console.error("Error removing from localStorage:",t)}},clear:()=>{try{localStorage.clear()}catch(n){console.error("Error clearing localStorage:",n)}}},ue={AUTH:"gs_auth",WORKSPACES:"gs_workspaces",PDFS:n=>`gs_pdfs::${n}`,ANNOTATIONS:(n,t)=>`gs_annotations::${n}::${t}`,THREADS:(n,t,e)=>`gs_threads::${n}::${t}::${e}`,BOT:n=>`gs_bot::${n}`,MAIN_CHAT:n=>`gs_mainchat::${n}`},uu={HIGHLIGHT:"highlight",UNDERLINE:"underline",TEXTBOX:"textbox",SELECT:"select"},vT=P.createContext(),My=()=>{const n=P.useContext(vT);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},JM=({children:n})=>{const[t,e]=P.useState(null),[i,r]=P.useState(!0);P.useEffect(()=>{const c=te.get(ue.AUTH);c&&e(c),r(!1)},[]);const l={user:t,loading:i,login:(c,u)=>{const h={email:c,loggedInAt:new Date().toISOString()};return te.set(ue.AUTH,h),e(h),h},logout:()=>{te.remove(ue.AUTH),e(null)},isAuthenticated:!!t};return _.jsx(vT.Provider,{value:l,children:n})},Ke=[];for(let n=0;n<256;++n)Ke.push((n+256).toString(16).slice(1));function tL(n,t=0){return(Ke[n[t+0]]+Ke[n[t+1]]+Ke[n[t+2]]+Ke[n[t+3]]+"-"+Ke[n[t+4]]+Ke[n[t+5]]+"-"+Ke[n[t+6]]+Ke[n[t+7]]+"-"+Ke[n[t+8]]+Ke[n[t+9]]+"-"+Ke[n[t+10]]+Ke[n[t+11]]+Ke[n[t+12]]+Ke[n[t+13]]+Ke[n[t+14]]+Ke[n[t+15]]).toLowerCase()}let Bv;const eL=new Uint8Array(16);function nL(){if(!Bv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Bv=crypto.getRandomValues.bind(crypto)}return Bv(eL)}const iL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kS={randomUUID:iL};function rL(n,t,e){var r;n=n||{};const i=n.random??((r=n.rng)==null?void 0:r.call(n))??nL();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,tL(i)}function sL(n,t,e){return kS.randomUUID&&!t&&!n?kS.randomUUID():rL(n)}const sn=()=>sL(),wT=P.createContext(),bT=()=>{const n=P.useContext(wT);if(!n)throw new Error("useApp must be used within AppProvider");return n},oL=({children:n})=>{const[t,e]=P.useState([]);P.useEffect(()=>{const c=te.get(ue.WORKSPACES)||[];e(c)},[]);const i=(c,u)=>{const h={id:sn(),name:c,description:u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},d=[...t,h];return e(d),te.set(ue.WORKSPACES,d),h},r=c=>{const u=t.filter(h=>h.id!==c);e(u),te.set(ue.WORKSPACES,u)},s=c=>te.get(ue.PDFS(c))||[],l={workspaces:t,createWorkspace:i,deleteWorkspace:r,getPdfs:s,addPdf:(c,u,h)=>{const d={id:sn(),name:u,url:h,uploadedAt:new Date().toISOString()},g=[...s(c),d];return te.set(ue.PDFS(c),g),d}};return _.jsx(wT.Provider,{value:l,children:n})},aL=()=>{if(te.get("gs_seeded"))return;const t=sn(),e={id:t,name:"Machine Learning Research",description:"Collaborative space for ML paper reviews and discussions",createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString()};te.set(ue.WORKSPACES,[e]);const i=sn(),r={id:i,name:"Sample Research Paper.pdf",url:"https://arxiv.org/pdf/1706.03762.pdf",uploadedAt:new Date("2024-01-15").toISOString()};te.set(ue.PDFS(t),[r]);const s=sn(),o=[{id:s,selectionId:s,type:"highlight",pageNumber:1,rects:[{x:100,y:200,w:300,h:20}],text:"Attention mechanisms have become an integral part",createdAt:new Date("2024-01-16").toISOString()}];te.set(ue.ANNOTATIONS(t,i),o);const l=[{id:sn(),author:"other",content:"This is a key finding in the paper",createdAt:new Date("2024-01-16T10:00:00").toISOString()},{id:sn(),author:"me",content:"Agreed! The attention mechanism really changed the game",createdAt:new Date("2024-01-16T10:05:00").toISOString()}];te.set(ue.THREADS(t,i,s),l);const c=[{id:sn(),author:"other",content:"Welcome to the workspace!",createdAt:new Date("2024-01-15T09:00:00").toISOString()},{id:sn(),author:"me",content:"Thanks! Excited to collaborate",createdAt:new Date("2024-01-15T09:05:00").toISOString()}];te.set(ue.MAIN_CHAT(t),c);const u=[{id:sn(),role:"user",content:"Can you summarize this paper?",createdAt:new Date("2024-01-16T14:00:00").toISOString()},{id:sn(),role:"assistant",content:"AI: This paper introduces the Transformer architecture. This is a mock response.",createdAt:new Date("2024-01-16T14:00:05").toISOString()}];te.set(ue.BOT(t),u),te.set("gs_seeded",!0),console.log("Seed data initialized")},AT="/assets/logo-Dh2BSOlF.jpg",xT="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%3e%3cpath%20d='M12%202.163c3.204%200%203.584.012%204.85.07%203.252.148%204.771%201.691%204.919%204.919.058%201.265.069%201.645.069%204.849%200%203.205-.012%203.584-.069%204.849-.149%203.225-1.664%204.771-4.919%204.919-1.266.058-1.644.07-4.85.07-3.204%200-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849%200-3.204.013-3.583.07-4.849.149-3.227%201.664-4.771%204.919-4.919%201.266-.057%201.645-.069%204.849-.069zm0-2.163c-3.259%200-3.667.014-4.947.072-4.358.2-6.78%202.618-6.98%206.98-.059%201.281-.073%201.689-.073%204.948%200%203.259.014%203.668.072%204.948.2%204.358%202.618%206.78%206.98%206.98%201.281.058%201.689.072%204.948.072%203.259%200%203.668-.014%204.948-.072%204.354-.2%206.782-2.618%206.979-6.98.059-1.28.073-1.689.073-4.948%200-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0%205.838c-3.403%200-6.162%202.759-6.162%206.162s2.759%206.163%206.162%206.163%206.162-2.759%206.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0%2010.162c-2.209%200-4-1.79-4-4%200-2.209%201.791-4%204-4s4%201.791%204%204c0%202.21-1.791%204-4%204zm6.406-11.845c-.796%200-1.441.645-1.441%201.44s.645%201.44%201.441%201.44c.795%200%201.439-.645%201.439-1.44s-.644-1.44-1.439-1.44z'/%3e%3c/svg%3e",ST="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%3e%3cpath%20d='M18.244%202.25h3.308l-7.227%208.26%208.502%2011.24H16.17l-5.214-6.817L4.99%2021.75H1.68l7.73-8.835L1.254%202.25H8.08l4.713%206.231zm-1.161%2017.52h1.833L7.084%204.126H5.117z'/%3e%3c/svg%3e";function ET(){return _.jsx("footer",{className:"mt-12 pt-8 border-t border-[#2A2A2A]",children:_.jsxs("div",{className:"flex items-center justify-center gap-4",children:[_.jsx("span",{className:"text-[#BDBDBD]",children:"Follow us"}),_.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:text-[#3BA7D1]","data-testid":"link-instagram",children:_.jsx("img",{src:xT,alt:"Instagram",className:"w-6 h-6"})}),_.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:text-[#3BA7D1]","data-testid":"link-twitter",children:_.jsx("img",{src:ST,alt:"Twitter",className:"w-6 h-6"})})]})})}function vc({children:n,onClick:t,variant:e="primary",type:i="button",className:r="",...s}){const o="px-6 py-2 rounded-md font-medium transition-colors cursor-pointer border",l={primary:"bg-[#4FC3F7] text-white border-[#4FC3F7] hover:bg-[#3BA7D1]",secondary:"bg-transparent text-[#4FC3F7] border-[#4FC3F7] hover:bg-[#4FC3F7]/10",danger:"bg-[#EF5350] text-white border-[#EF5350] hover:bg-[#D73935]"};return _.jsx("button",{type:i,onClick:t,className:`${o} ${l[e]} ${r}`,...s,children:n})}function lL(){const[,n]=Pg();return _.jsxs("div",{className:"min-h-screen bg-[#121212] flex flex-col",children:[_.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:_.jsxs("div",{className:"max-w-[600px] w-full text-center",children:[_.jsx("img",{src:AT,alt:"GenScholar Logo",className:"landing-logo mx-auto"}),_.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-[#E0E0E0] mb-4",children:"GenScholar"}),_.jsx("p",{className:"text-xl text-[#BDBDBD] mb-8",children:"Collaborative Research Explorer"}),_.jsx("p",{className:"text-[#BDBDBD] mb-12 leading-relaxed",children:"Streamline your research workflow with collaborative PDF annotation, threaded discussions, and AI-powered insights. Work together on research papers in real-time with your team."}),_.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[_.jsx(vc,{onClick:()=>n("/auth?tab=create"),variant:"primary","data-testid":"button-get-started",children:"Get Started"}),_.jsx(vc,{onClick:()=>n("/auth?tab=login"),variant:"secondary","data-testid":"button-login",children:"Login"})]})]})}),_.jsx(ET,{})]})}var cL=function(t){return uL(t)&&!hL(t)};function uL(n){return!!n&&typeof n=="object"}function hL(n){var t=Object.prototype.toString.call(n);return t==="[object RegExp]"||t==="[object Date]"||pL(n)}var dL=typeof Symbol=="function"&&Symbol.for,fL=dL?Symbol.for("react.element"):60103;function pL(n){return n.$$typeof===fL}function gL(n){return Array.isArray(n)?[]:{}}function M0(n,t){return t.clone!==!1&&t.isMergeableObject(n)?Lf(gL(n),n,t):n}function mL(n,t,e){return n.concat(t).map(function(i){return M0(i,e)})}function yL(n,t,e){var i={};return e.isMergeableObject(n)&&Object.keys(n).forEach(function(r){i[r]=M0(n[r],e)}),Object.keys(t).forEach(function(r){!e.isMergeableObject(t[r])||!n[r]?i[r]=M0(t[r],e):i[r]=Lf(n[r],t[r],e)}),i}function Lf(n,t,e){e=e||{},e.arrayMerge=e.arrayMerge||mL,e.isMergeableObject=e.isMergeableObject||cL;var i=Array.isArray(t),r=Array.isArray(n),s=i===r;return s?i?e.arrayMerge(n,t,e):yL(n,t,e):M0(t,e)}Lf.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(i,r){return Lf(i,r,e)},{})};var Ww=Lf,_T=typeof global=="object"&&global&&global.Object===Object&&global,vL=typeof self=="object"&&self&&self.Object===Object&&self,cs=_T||vL||Function("return this")(),Pa=cs.Symbol,CT=Object.prototype,wL=CT.hasOwnProperty,bL=CT.toString,Cd=Pa?Pa.toStringTag:void 0;function AL(n){var t=wL.call(n,Cd),e=n[Cd];try{n[Cd]=void 0;var i=!0}catch{}var r=bL.call(n);return i&&(t?n[Cd]=e:delete n[Cd]),r}var xL=Object.prototype,SL=xL.toString;function EL(n){return SL.call(n)}var _L="[object Null]",CL="[object Undefined]",PS=Pa?Pa.toStringTag:void 0;function Mc(n){return n==null?n===void 0?CL:_L:PS&&PS in Object(n)?AL(n):EL(n)}function TT(n,t){return function(e){return n(t(e))}}var CA=TT(Object.getPrototypeOf,Object);function Lc(n){return n!=null&&typeof n=="object"}var TL="[object Object]",kL=Function.prototype,PL=Object.prototype,kT=kL.toString,DL=PL.hasOwnProperty,RL=kT.call(Object);function DS(n){if(!Lc(n)||Mc(n)!=TL)return!1;var t=CA(n);if(t===null)return!0;var e=DL.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&kT.call(e)==RL}function ML(){this.__data__=[],this.size=0}function PT(n,t){return n===t||n!==n&&t!==t}function Ly(n,t){for(var e=n.length;e--;)if(PT(n[e][0],t))return e;return-1}var LL=Array.prototype,FL=LL.splice;function NL(n){var t=this.__data__,e=Ly(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():FL.call(t,e,1),--this.size,!0}function IL(n){var t=this.__data__,e=Ly(t,n);return e<0?void 0:t[e][1]}function OL(n){return Ly(this.__data__,n)>-1}function BL(n,t){var e=this.__data__,i=Ly(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}function po(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}po.prototype.clear=ML;po.prototype.delete=NL;po.prototype.get=IL;po.prototype.has=OL;po.prototype.set=BL;function jL(){this.__data__=new po,this.size=0}function $L(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function UL(n){return this.__data__.get(n)}function zL(n){return this.__data__.has(n)}function Dg(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var HL="[object AsyncFunction]",VL="[object Function]",WL="[object GeneratorFunction]",GL="[object Proxy]";function DT(n){if(!Dg(n))return!1;var t=Mc(n);return t==VL||t==WL||t==HL||t==GL}var jv=cs["__core-js_shared__"],RS=function(){var n=/[^.]+$/.exec(jv&&jv.keys&&jv.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function XL(n){return!!RS&&RS in n}var qL=Function.prototype,YL=qL.toString;function Fc(n){if(n!=null){try{return YL.call(n)}catch{}try{return n+""}catch{}}return""}var KL=/[\\^$.*+?()[\]{}|]/g,QL=/^\[object .+?Constructor\]$/,ZL=Function.prototype,JL=Object.prototype,tF=ZL.toString,eF=JL.hasOwnProperty,nF=RegExp("^"+tF.call(eF).replace(KL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function iF(n){if(!Dg(n)||XL(n))return!1;var t=DT(n)?nF:QL;return t.test(Fc(n))}function rF(n,t){return n==null?void 0:n[t]}function Nc(n,t){var e=rF(n,t);return iF(e)?e:void 0}var Ff=Nc(cs,"Map"),Nf=Nc(Object,"create");function sF(){this.__data__=Nf?Nf(null):{},this.size=0}function oF(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var aF="__lodash_hash_undefined__",lF=Object.prototype,cF=lF.hasOwnProperty;function uF(n){var t=this.__data__;if(Nf){var e=t[n];return e===aF?void 0:e}return cF.call(t,n)?t[n]:void 0}var hF=Object.prototype,dF=hF.hasOwnProperty;function fF(n){var t=this.__data__;return Nf?t[n]!==void 0:dF.call(t,n)}var pF="__lodash_hash_undefined__";function gF(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Nf&&t===void 0?pF:t,this}function Cc(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Cc.prototype.clear=sF;Cc.prototype.delete=oF;Cc.prototype.get=uF;Cc.prototype.has=fF;Cc.prototype.set=gF;function mF(){this.size=0,this.__data__={hash:new Cc,map:new(Ff||po),string:new Cc}}function yF(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Fy(n,t){var e=n.__data__;return yF(t)?e[typeof t=="string"?"string":"hash"]:e.map}function vF(n){var t=Fy(this,n).delete(n);return this.size-=t?1:0,t}function wF(n){return Fy(this,n).get(n)}function bF(n){return Fy(this,n).has(n)}function AF(n,t){var e=Fy(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}function Ba(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Ba.prototype.clear=mF;Ba.prototype.delete=vF;Ba.prototype.get=wF;Ba.prototype.has=bF;Ba.prototype.set=AF;var xF=200;function SF(n,t){var e=this.__data__;if(e instanceof po){var i=e.__data__;if(!Ff||i.length<xF-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Ba(i)}return e.set(n,t),this.size=e.size,this}function gd(n){var t=this.__data__=new po(n);this.size=t.size}gd.prototype.clear=jL;gd.prototype.delete=$L;gd.prototype.get=UL;gd.prototype.has=zL;gd.prototype.set=SF;function EF(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}var MS=function(){try{var n=Nc(Object,"defineProperty");return n({},"",{}),n}catch{}}();function RT(n,t,e){t=="__proto__"&&MS?MS(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var _F=Object.prototype,CF=_F.hasOwnProperty;function MT(n,t,e){var i=n[t];(!(CF.call(n,t)&&PT(i,e))||e===void 0&&!(t in n))&&RT(n,t,e)}function Ny(n,t,e,i){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var l=t[s],c=void 0;c===void 0&&(c=n[l]),r?RT(e,l,c):MT(e,l,c)}return e}function TF(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var kF="[object Arguments]";function LS(n){return Lc(n)&&Mc(n)==kF}var LT=Object.prototype,PF=LT.hasOwnProperty,DF=LT.propertyIsEnumerable,RF=LS(function(){return arguments}())?LS:function(n){return Lc(n)&&PF.call(n,"callee")&&!DF.call(n,"callee")},Rg=Array.isArray;function MF(){return!1}var FT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,FS=FT&&typeof module=="object"&&module&&!module.nodeType&&module,LF=FS&&FS.exports===FT,NS=LF?cs.Buffer:void 0,FF=NS?NS.isBuffer:void 0,NT=FF||MF,NF=9007199254740991,IF=/^(?:0|[1-9]\d*)$/;function OF(n,t){var e=typeof n;return t=t??NF,!!t&&(e=="number"||e!="symbol"&&IF.test(n))&&n>-1&&n%1==0&&n<t}var BF=9007199254740991;function IT(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=BF}var jF="[object Arguments]",$F="[object Array]",UF="[object Boolean]",zF="[object Date]",HF="[object Error]",VF="[object Function]",WF="[object Map]",GF="[object Number]",XF="[object Object]",qF="[object RegExp]",YF="[object Set]",KF="[object String]",QF="[object WeakMap]",ZF="[object ArrayBuffer]",JF="[object DataView]",tN="[object Float32Array]",eN="[object Float64Array]",nN="[object Int8Array]",iN="[object Int16Array]",rN="[object Int32Array]",sN="[object Uint8Array]",oN="[object Uint8ClampedArray]",aN="[object Uint16Array]",lN="[object Uint32Array]",Zt={};Zt[tN]=Zt[eN]=Zt[nN]=Zt[iN]=Zt[rN]=Zt[sN]=Zt[oN]=Zt[aN]=Zt[lN]=!0;Zt[jF]=Zt[$F]=Zt[ZF]=Zt[UF]=Zt[JF]=Zt[zF]=Zt[HF]=Zt[VF]=Zt[WF]=Zt[GF]=Zt[XF]=Zt[qF]=Zt[YF]=Zt[KF]=Zt[QF]=!1;function cN(n){return Lc(n)&&IT(n.length)&&!!Zt[Mc(n)]}function TA(n){return function(t){return n(t)}}var OT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ff=OT&&typeof module=="object"&&module&&!module.nodeType&&module,uN=ff&&ff.exports===OT,$v=uN&&_T.process,ad=function(){try{var n=ff&&ff.require&&ff.require("util").types;return n||$v&&$v.binding&&$v.binding("util")}catch{}}(),IS=ad&&ad.isTypedArray,hN=IS?TA(IS):cN,dN=Object.prototype,fN=dN.hasOwnProperty;function BT(n,t){var e=Rg(n),i=!e&&RF(n),r=!e&&!i&&NT(n),s=!e&&!i&&!r&&hN(n),o=e||i||r||s,l=o?TF(n.length,String):[],c=l.length;for(var u in n)(t||fN.call(n,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||OF(u,c)))&&l.push(u);return l}var pN=Object.prototype;function kA(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||pN;return n===e}var gN=TT(Object.keys,Object),mN=Object.prototype,yN=mN.hasOwnProperty;function vN(n){if(!kA(n))return gN(n);var t=[];for(var e in Object(n))yN.call(n,e)&&e!="constructor"&&t.push(e);return t}function jT(n){return n!=null&&IT(n.length)&&!DT(n)}function PA(n){return jT(n)?BT(n):vN(n)}function wN(n,t){return n&&Ny(t,PA(t),n)}function bN(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var AN=Object.prototype,xN=AN.hasOwnProperty;function SN(n){if(!Dg(n))return bN(n);var t=kA(n),e=[];for(var i in n)i=="constructor"&&(t||!xN.call(n,i))||e.push(i);return e}function DA(n){return jT(n)?BT(n,!0):SN(n)}function EN(n,t){return n&&Ny(t,DA(t),n)}var $T=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OS=$T&&typeof module=="object"&&module&&!module.nodeType&&module,_N=OS&&OS.exports===$T,BS=_N?cs.Buffer:void 0,jS=BS?BS.allocUnsafe:void 0;function CN(n,t){if(t)return n.slice();var e=n.length,i=jS?jS(e):new n.constructor(e);return n.copy(i),i}function UT(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}function TN(n,t){for(var e=-1,i=n==null?0:n.length,r=0,s=[];++e<i;){var o=n[e];t(o,e,n)&&(s[r++]=o)}return s}function zT(){return[]}var kN=Object.prototype,PN=kN.propertyIsEnumerable,$S=Object.getOwnPropertySymbols,RA=$S?function(n){return n==null?[]:(n=Object(n),TN($S(n),function(t){return PN.call(n,t)}))}:zT;function DN(n,t){return Ny(n,RA(n),t)}function HT(n,t){for(var e=-1,i=t.length,r=n.length;++e<i;)n[r+e]=t[e];return n}var RN=Object.getOwnPropertySymbols,VT=RN?function(n){for(var t=[];n;)HT(t,RA(n)),n=CA(n);return t}:zT;function MN(n,t){return Ny(n,VT(n),t)}function WT(n,t,e){var i=t(n);return Rg(n)?i:HT(i,e(n))}function LN(n){return WT(n,PA,RA)}function FN(n){return WT(n,DA,VT)}var Gw=Nc(cs,"DataView"),Xw=Nc(cs,"Promise"),qw=Nc(cs,"Set"),Yw=Nc(cs,"WeakMap"),US="[object Map]",NN="[object Object]",zS="[object Promise]",HS="[object Set]",VS="[object WeakMap]",WS="[object DataView]",IN=Fc(Gw),ON=Fc(Ff),BN=Fc(Xw),jN=Fc(qw),$N=Fc(Yw),vs=Mc;(Gw&&vs(new Gw(new ArrayBuffer(1)))!=WS||Ff&&vs(new Ff)!=US||Xw&&vs(Xw.resolve())!=zS||qw&&vs(new qw)!=HS||Yw&&vs(new Yw)!=VS)&&(vs=function(n){var t=Mc(n),e=t==NN?n.constructor:void 0,i=e?Fc(e):"";if(i)switch(i){case IN:return WS;case ON:return US;case BN:return zS;case jN:return HS;case $N:return VS}return t});var UN=Object.prototype,zN=UN.hasOwnProperty;function HN(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&zN.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var GS=cs.Uint8Array;function MA(n){var t=new n.constructor(n.byteLength);return new GS(t).set(new GS(n)),t}function VN(n,t){var e=t?MA(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var WN=/\w*$/;function GN(n){var t=new n.constructor(n.source,WN.exec(n));return t.lastIndex=n.lastIndex,t}var XS=Pa?Pa.prototype:void 0,qS=XS?XS.valueOf:void 0;function XN(n){return qS?Object(qS.call(n)):{}}function qN(n,t){var e=t?MA(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var YN="[object Boolean]",KN="[object Date]",QN="[object Map]",ZN="[object Number]",JN="[object RegExp]",tI="[object Set]",eI="[object String]",nI="[object Symbol]",iI="[object ArrayBuffer]",rI="[object DataView]",sI="[object Float32Array]",oI="[object Float64Array]",aI="[object Int8Array]",lI="[object Int16Array]",cI="[object Int32Array]",uI="[object Uint8Array]",hI="[object Uint8ClampedArray]",dI="[object Uint16Array]",fI="[object Uint32Array]";function pI(n,t,e){var i=n.constructor;switch(t){case iI:return MA(n);case YN:case KN:return new i(+n);case rI:return VN(n,e);case sI:case oI:case aI:case lI:case cI:case uI:case hI:case dI:case fI:return qN(n,e);case QN:return new i;case ZN:case eI:return new i(n);case JN:return GN(n);case tI:return new i;case nI:return XN(n)}}var YS=Object.create,gI=function(){function n(){}return function(t){if(!Dg(t))return{};if(YS)return YS(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function mI(n){return typeof n.constructor=="function"&&!kA(n)?gI(CA(n)):{}}var yI="[object Map]";function vI(n){return Lc(n)&&vs(n)==yI}var KS=ad&&ad.isMap,wI=KS?TA(KS):vI,bI="[object Set]";function AI(n){return Lc(n)&&vs(n)==bI}var QS=ad&&ad.isSet,xI=QS?TA(QS):AI,SI=1,EI=2,_I=4,GT="[object Arguments]",CI="[object Array]",TI="[object Boolean]",kI="[object Date]",PI="[object Error]",XT="[object Function]",DI="[object GeneratorFunction]",RI="[object Map]",MI="[object Number]",qT="[object Object]",LI="[object RegExp]",FI="[object Set]",NI="[object String]",II="[object Symbol]",OI="[object WeakMap]",BI="[object ArrayBuffer]",jI="[object DataView]",$I="[object Float32Array]",UI="[object Float64Array]",zI="[object Int8Array]",HI="[object Int16Array]",VI="[object Int32Array]",WI="[object Uint8Array]",GI="[object Uint8ClampedArray]",XI="[object Uint16Array]",qI="[object Uint32Array]",Gt={};Gt[GT]=Gt[CI]=Gt[BI]=Gt[jI]=Gt[TI]=Gt[kI]=Gt[$I]=Gt[UI]=Gt[zI]=Gt[HI]=Gt[VI]=Gt[RI]=Gt[MI]=Gt[qT]=Gt[LI]=Gt[FI]=Gt[NI]=Gt[II]=Gt[WI]=Gt[GI]=Gt[XI]=Gt[qI]=!0;Gt[PI]=Gt[XT]=Gt[OI]=!1;function pf(n,t,e,i,r,s){var o,l=t&SI,c=t&EI,u=t&_I;if(o!==void 0)return o;if(!Dg(n))return n;var h=Rg(n);if(h){if(o=HN(n),!l)return UT(n,o)}else{var d=vs(n),f=d==XT||d==DI;if(NT(n))return CN(n,l);if(d==qT||d==GT||f&&!r){if(o=c||f?{}:mI(n),!l)return c?MN(n,EN(o,n)):DN(n,wN(o,n))}else{if(!Gt[d])return r?n:{};o=pI(n,d,l)}}s||(s=new gd);var g=s.get(n);if(g)return g;s.set(n,o),xI(n)?n.forEach(function(S){o.add(pf(S,t,e,S,n,s))}):wI(n)&&n.forEach(function(S,m){o.set(m,pf(S,t,e,m,n,s))});var b=u?c?FN:LN:c?DA:PA,v=h?void 0:b(n);return EF(v||n,function(S,m){v&&(m=S,S=n[m]),MT(o,m,pf(S,t,e,m,n,s))}),o}var YI=1,KI=4;function im(n){return pf(n,YI|KI)}var ZS=Array.isArray,JS=Object.keys,QI=Object.prototype.hasOwnProperty,ZI=typeof Element<"u";function Kw(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){var e=ZS(n),i=ZS(t),r,s,o;if(e&&i){if(s=n.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!Kw(n[r],t[r]))return!1;return!0}if(e!=i)return!1;var l=n instanceof Date,c=t instanceof Date;if(l!=c)return!1;if(l&&c)return n.getTime()==t.getTime();var u=n instanceof RegExp,h=t instanceof RegExp;if(u!=h)return!1;if(u&&h)return n.toString()==t.toString();var d=JS(n);if(s=d.length,s!==JS(t).length)return!1;for(r=s;r--!==0;)if(!QI.call(t,d[r]))return!1;if(ZI&&n instanceof Element&&t instanceof Element)return n===t;for(r=s;r--!==0;)if(o=d[r],!(o==="_owner"&&n.$$typeof)&&!Kw(n[o],t[o]))return!1;return!0}return n!==n&&t!==t}var JI=function(t,e){try{return Kw(t,e)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}};const Xa=py(JI);var tO=4;function tE(n){return pf(n,tO)}function YT(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}var eO="[object Symbol]";function LA(n){return typeof n=="symbol"||Lc(n)&&Mc(n)==eO}var nO="Expected a function";function FA(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(nO);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=e.cache;if(s.has(r))return s.get(r);var o=n.apply(this,i);return e.cache=s.set(r,o)||s,o};return e.cache=new(FA.Cache||Ba),e}FA.Cache=Ba;var iO=500;function rO(n){var t=FA(n,function(i){return e.size===iO&&e.clear(),i}),e=t.cache;return t}var sO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oO=/\\(\\)?/g,aO=rO(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(sO,function(e,i,r,s){t.push(r?s.replace(oO,"$1"):i||e)}),t}),lO=1/0;function cO(n){if(typeof n=="string"||LA(n))return n;var t=n+"";return t=="0"&&1/n==-lO?"-0":t}var uO=1/0,eE=Pa?Pa.prototype:void 0,nE=eE?eE.toString:void 0;function KT(n){if(typeof n=="string")return n;if(Rg(n))return YT(n,KT)+"";if(LA(n))return nE?nE.call(n):"";var t=n+"";return t=="0"&&1/n==-uO?"-0":t}function hO(n){return n==null?"":KT(n)}function QT(n){return Rg(n)?YT(n,cO):LA(n)?[n]:UT(aO(hO(n)))}var ZT={exports:{}},Rt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=typeof Symbol=="function"&&Symbol.for,NA=qe?Symbol.for("react.element"):60103,IA=qe?Symbol.for("react.portal"):60106,Iy=qe?Symbol.for("react.fragment"):60107,Oy=qe?Symbol.for("react.strict_mode"):60108,By=qe?Symbol.for("react.profiler"):60114,jy=qe?Symbol.for("react.provider"):60109,$y=qe?Symbol.for("react.context"):60110,OA=qe?Symbol.for("react.async_mode"):60111,Uy=qe?Symbol.for("react.concurrent_mode"):60111,zy=qe?Symbol.for("react.forward_ref"):60112,Hy=qe?Symbol.for("react.suspense"):60113,dO=qe?Symbol.for("react.suspense_list"):60120,Vy=qe?Symbol.for("react.memo"):60115,Wy=qe?Symbol.for("react.lazy"):60116,fO=qe?Symbol.for("react.block"):60121,pO=qe?Symbol.for("react.fundamental"):60117,gO=qe?Symbol.for("react.responder"):60118,mO=qe?Symbol.for("react.scope"):60119;function Ri(n){if(typeof n=="object"&&n!==null){var t=n.$$typeof;switch(t){case NA:switch(n=n.type,n){case OA:case Uy:case Iy:case By:case Oy:case Hy:return n;default:switch(n=n&&n.$$typeof,n){case $y:case zy:case Wy:case Vy:case jy:return n;default:return t}}case IA:return t}}}function JT(n){return Ri(n)===Uy}Rt.AsyncMode=OA;Rt.ConcurrentMode=Uy;Rt.ContextConsumer=$y;Rt.ContextProvider=jy;Rt.Element=NA;Rt.ForwardRef=zy;Rt.Fragment=Iy;Rt.Lazy=Wy;Rt.Memo=Vy;Rt.Portal=IA;Rt.Profiler=By;Rt.StrictMode=Oy;Rt.Suspense=Hy;Rt.isAsyncMode=function(n){return JT(n)||Ri(n)===OA};Rt.isConcurrentMode=JT;Rt.isContextConsumer=function(n){return Ri(n)===$y};Rt.isContextProvider=function(n){return Ri(n)===jy};Rt.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===NA};Rt.isForwardRef=function(n){return Ri(n)===zy};Rt.isFragment=function(n){return Ri(n)===Iy};Rt.isLazy=function(n){return Ri(n)===Wy};Rt.isMemo=function(n){return Ri(n)===Vy};Rt.isPortal=function(n){return Ri(n)===IA};Rt.isProfiler=function(n){return Ri(n)===By};Rt.isStrictMode=function(n){return Ri(n)===Oy};Rt.isSuspense=function(n){return Ri(n)===Hy};Rt.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Iy||n===Uy||n===By||n===Oy||n===Hy||n===dO||typeof n=="object"&&n!==null&&(n.$$typeof===Wy||n.$$typeof===Vy||n.$$typeof===jy||n.$$typeof===$y||n.$$typeof===zy||n.$$typeof===pO||n.$$typeof===gO||n.$$typeof===mO||n.$$typeof===fO)};Rt.typeOf=Ri;ZT.exports=Rt;var yO=ZT.exports,t2=yO,vO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},e2={};e2[t2.ForwardRef]=vO;e2[t2.Memo]=wO;function Jt(){return Jt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Jt.apply(this,arguments)}function hu(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}var Gy=P.createContext(void 0);Gy.displayName="FormikContext";var bO=Gy.Provider;Gy.Consumer;function n2(){var n=P.useContext(Gy);return n}var ni=function(t){return typeof t=="function"},Xy=function(t){return t!==null&&typeof t=="object"},AO=function(t){return String(Math.floor(Number(t)))===t},Uv=function(t){return Object.prototype.toString.call(t)==="[object String]"},xO=function(t){return P.Children.count(t)===0},zv=function(t){return Xy(t)&&ni(t.then)};function ti(n,t,e,i){i===void 0&&(i=0);for(var r=QT(t);n&&i<r.length;)n=n[r[i++]];return i!==r.length&&!n||n===void 0?e:n}function wc(n,t,e){for(var i=tE(n),r=i,s=0,o=QT(t);s<o.length-1;s++){var l=o[s],c=ti(n,o.slice(0,s+1));if(c&&(Xy(c)||Array.isArray(c)))r=r[l]=tE(c);else{var u=o[s+1];r=r[l]=AO(u)&&Number(u)>=0?[]:{}}}return(s===0?n:r)[o[s]]===e?n:(e===void 0?delete r[o[s]]:r[o[s]]=e,s===0&&e===void 0&&delete i[o[s]],i)}function i2(n,t,e,i){e===void 0&&(e=new WeakMap),i===void 0&&(i={});for(var r=0,s=Object.keys(n);r<s.length;r++){var o=s[r],l=n[o];Xy(l)?e.get(l)||(e.set(l,!0),i[o]=Array.isArray(l)?[]:{},i2(l,t,e,i[o])):i[o]=t}return i}function SO(n,t){switch(t.type){case"SET_VALUES":return Jt({},n,{values:t.payload});case"SET_TOUCHED":return Jt({},n,{touched:t.payload});case"SET_ERRORS":return Xa(n.errors,t.payload)?n:Jt({},n,{errors:t.payload});case"SET_STATUS":return Jt({},n,{status:t.payload});case"SET_ISSUBMITTING":return Jt({},n,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Jt({},n,{isValidating:t.payload});case"SET_FIELD_VALUE":return Jt({},n,{values:wc(n.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Jt({},n,{touched:wc(n.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Jt({},n,{errors:wc(n.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Jt({},n,t.payload);case"SET_FORMIK_STATE":return t.payload(n);case"SUBMIT_ATTEMPT":return Jt({},n,{touched:i2(n.values,!0),isSubmitting:!0,submitCount:n.submitCount+1});case"SUBMIT_FAILURE":return Jt({},n,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Jt({},n,{isSubmitting:!1});default:return n}}var Ha={},rm={};function EO(n){var t=n.validateOnChange,e=t===void 0?!0:t,i=n.validateOnBlur,r=i===void 0?!0:i,s=n.validateOnMount,o=s===void 0?!1:s,l=n.isInitialValid,c=n.enableReinitialize,u=c===void 0?!1:c,h=n.onSubmit,d=hu(n,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=Jt({validateOnChange:e,validateOnBlur:r,validateOnMount:o,onSubmit:h},d),g=P.useRef(f.initialValues),b=P.useRef(f.initialErrors||Ha),v=P.useRef(f.initialTouched||rm),S=P.useRef(f.initialStatus),m=P.useRef(!1),w=P.useRef({});P.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var x=P.useState(0),E=x[1],C=P.useRef({values:im(f.initialValues),errors:im(f.initialErrors)||Ha,touched:im(f.initialTouched)||rm,status:im(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),T=C.current,k=P.useCallback(function(R){var W=C.current;C.current=SO(W,R),W!==C.current&&E(function(tt){return tt+1})},[]),D=P.useCallback(function(R,W){return new Promise(function(tt,nt){var ft=f.validate(R,W);ft==null?tt(Ha):zv(ft)?ft.then(function(pt){tt(pt||Ha)},function(pt){nt(pt)}):tt(ft)})},[f.validate]),M=P.useCallback(function(R,W){var tt=f.validationSchema,nt=ni(tt)?tt(W):tt,ft=W&&nt.validateAt?nt.validateAt(W,R):CO(R,nt);return new Promise(function(pt,Yt){ft.then(function(){pt(Ha)},function(Oe){Oe.name==="ValidationError"?pt(_O(Oe)):Yt(Oe)})})},[f.validationSchema]),L=P.useCallback(function(R,W){return new Promise(function(tt){return tt(w.current[R].validate(W))})},[]),F=P.useCallback(function(R){var W=Object.keys(w.current).filter(function(nt){return ni(w.current[nt].validate)}),tt=W.length>0?W.map(function(nt){return L(nt,ti(R,nt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(tt).then(function(nt){return nt.reduce(function(ft,pt,Yt){return pt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||pt&&(ft=wc(ft,W[Yt],pt)),ft},{})})},[L]),B=P.useCallback(function(R){return Promise.all([F(R),f.validationSchema?M(R):{},f.validate?D(R):{}]).then(function(W){var tt=W[0],nt=W[1],ft=W[2],pt=Ww.all([tt,nt,ft],{arrayMerge:TO});return pt})},[f.validate,f.validationSchema,F,D,M]),z=Mi(function(R){return R===void 0&&(R=T.values),k({type:"SET_ISVALIDATING",payload:!0}),B(R).then(function(W){return m.current&&(k({type:"SET_ISVALIDATING",payload:!1}),k({type:"SET_ERRORS",payload:W})),W})});P.useEffect(function(){o&&m.current===!0&&Xa(g.current,f.initialValues)&&z(g.current)},[o,z]);var H=P.useCallback(function(R){var W=R&&R.values?R.values:g.current,tt=R&&R.errors?R.errors:b.current?b.current:f.initialErrors||{},nt=R&&R.touched?R.touched:v.current?v.current:f.initialTouched||{},ft=R&&R.status?R.status:S.current?S.current:f.initialStatus;g.current=W,b.current=tt,v.current=nt,S.current=ft;var pt=function(){k({type:"RESET_FORM",payload:{isSubmitting:!!R&&!!R.isSubmitting,errors:tt,touched:nt,status:ft,values:W,isValidating:!!R&&!!R.isValidating,submitCount:R&&R.submitCount&&typeof R.submitCount=="number"?R.submitCount:0}})};if(f.onReset){var Yt=f.onReset(T.values,bt);zv(Yt)?Yt.then(pt):pt()}else pt()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);P.useEffect(function(){m.current===!0&&!Xa(g.current,f.initialValues)&&u&&(g.current=f.initialValues,H(),o&&z(g.current))},[u,f.initialValues,H,o,z]),P.useEffect(function(){u&&m.current===!0&&!Xa(b.current,f.initialErrors)&&(b.current=f.initialErrors||Ha,k({type:"SET_ERRORS",payload:f.initialErrors||Ha}))},[u,f.initialErrors]),P.useEffect(function(){u&&m.current===!0&&!Xa(v.current,f.initialTouched)&&(v.current=f.initialTouched||rm,k({type:"SET_TOUCHED",payload:f.initialTouched||rm}))},[u,f.initialTouched]),P.useEffect(function(){u&&m.current===!0&&!Xa(S.current,f.initialStatus)&&(S.current=f.initialStatus,k({type:"SET_STATUS",payload:f.initialStatus}))},[u,f.initialStatus,f.initialTouched]);var et=Mi(function(R){if(w.current[R]&&ni(w.current[R].validate)){var W=ti(T.values,R),tt=w.current[R].validate(W);return zv(tt)?(k({type:"SET_ISVALIDATING",payload:!0}),tt.then(function(nt){return nt}).then(function(nt){k({type:"SET_FIELD_ERROR",payload:{field:R,value:nt}}),k({type:"SET_ISVALIDATING",payload:!1})})):(k({type:"SET_FIELD_ERROR",payload:{field:R,value:tt}}),Promise.resolve(tt))}else if(f.validationSchema)return k({type:"SET_ISVALIDATING",payload:!0}),M(T.values,R).then(function(nt){return nt}).then(function(nt){k({type:"SET_FIELD_ERROR",payload:{field:R,value:ti(nt,R)}}),k({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),$=P.useCallback(function(R,W){var tt=W.validate;w.current[R]={validate:tt}},[]),j=P.useCallback(function(R){delete w.current[R]},[]),N=Mi(function(R,W){k({type:"SET_TOUCHED",payload:R});var tt=W===void 0?r:W;return tt?z(T.values):Promise.resolve()}),V=P.useCallback(function(R){k({type:"SET_ERRORS",payload:R})},[]),Z=Mi(function(R,W){var tt=ni(R)?R(T.values):R;k({type:"SET_VALUES",payload:tt});var nt=W===void 0?e:W;return nt?z(tt):Promise.resolve()}),dt=P.useCallback(function(R,W){k({type:"SET_FIELD_ERROR",payload:{field:R,value:W}})},[]),J=Mi(function(R,W,tt){k({type:"SET_FIELD_VALUE",payload:{field:R,value:W}});var nt=tt===void 0?e:tt;return nt?z(wc(T.values,R,W)):Promise.resolve()}),at=P.useCallback(function(R,W){var tt=W,nt=R,ft;if(!Uv(R)){R.persist&&R.persist();var pt=R.target?R.target:R.currentTarget,Yt=pt.type,Oe=pt.name,Ua=pt.id,cv=pt.value,HP=pt.checked,T$=pt.outerHTML,dx=pt.options,VP=pt.multiple;tt=W||Oe||Ua,nt=/number|range/.test(Yt)?(ft=parseFloat(cv),isNaN(ft)?"":ft):/checkbox/.test(Yt)?PO(ti(T.values,tt),HP,cv):dx&&VP?kO(dx):cv}tt&&J(tt,nt)},[J,T.values]),Et=Mi(function(R){if(Uv(R))return function(W){return at(W,R)};at(R)}),Mt=Mi(function(R,W,tt){W===void 0&&(W=!0),k({type:"SET_FIELD_TOUCHED",payload:{field:R,value:W}});var nt=tt===void 0?r:tt;return nt?z(T.values):Promise.resolve()}),Bt=P.useCallback(function(R,W){R.persist&&R.persist();var tt=R.target,nt=tt.name,ft=tt.id,pt=tt.outerHTML,Yt=W||nt||ft;Mt(Yt,!0)},[Mt]),vt=Mi(function(R){if(Uv(R))return function(W){return Bt(W,R)};Bt(R)}),er=P.useCallback(function(R){ni(R)?k({type:"SET_FORMIK_STATE",payload:R}):k({type:"SET_FORMIK_STATE",payload:function(){return R}})},[]),hn=P.useCallback(function(R){k({type:"SET_STATUS",payload:R})},[]),Ct=P.useCallback(function(R){k({type:"SET_ISSUBMITTING",payload:R})},[]),Ye=Mi(function(){return k({type:"SUBMIT_ATTEMPT"}),z().then(function(R){var W=R instanceof Error,tt=!W&&Object.keys(R).length===0;if(tt){var nt;try{if(nt=Vt(),nt===void 0)return}catch(ft){throw ft}return Promise.resolve(nt).then(function(ft){return m.current&&k({type:"SUBMIT_SUCCESS"}),ft}).catch(function(ft){if(m.current)throw k({type:"SUBMIT_FAILURE"}),ft})}else if(m.current&&(k({type:"SUBMIT_FAILURE"}),W))throw R})}),nr=Mi(function(R){R&&R.preventDefault&&ni(R.preventDefault)&&R.preventDefault(),R&&R.stopPropagation&&ni(R.stopPropagation)&&R.stopPropagation(),Ye().catch(function(W){console.warn("Warning: An unhandled error was caught from submitForm()",W)})}),bt={resetForm:H,validateForm:z,validateField:et,setErrors:V,setFieldError:dt,setFieldTouched:Mt,setFieldValue:J,setStatus:hn,setSubmitting:Ct,setTouched:N,setValues:Z,setFormikState:er,submitForm:Ye},Vt=Mi(function(){return h(T.values,bt)}),be=Mi(function(R){R&&R.preventDefault&&ni(R.preventDefault)&&R.preventDefault(),R&&R.stopPropagation&&ni(R.stopPropagation)&&R.stopPropagation(),H()}),_e=P.useCallback(function(R){return{value:ti(T.values,R),error:ti(T.errors,R),touched:!!ti(T.touched,R),initialValue:ti(g.current,R),initialTouched:!!ti(v.current,R),initialError:ti(b.current,R)}},[T.errors,T.touched,T.values]),go=P.useCallback(function(R){return{setValue:function(tt,nt){return J(R,tt,nt)},setTouched:function(tt,nt){return Mt(R,tt,nt)},setError:function(tt){return dt(R,tt)}}},[J,Mt,dt]),ja=P.useCallback(function(R){var W=Xy(R),tt=W?R.name:R,nt=ti(T.values,tt),ft={name:tt,value:nt,onChange:Et,onBlur:vt};if(W){var pt=R.type,Yt=R.value,Oe=R.as,Ua=R.multiple;pt==="checkbox"?Yt===void 0?ft.checked=!!nt:(ft.checked=!!(Array.isArray(nt)&&~nt.indexOf(Yt)),ft.value=Yt):pt==="radio"?(ft.checked=nt===Yt,ft.value=Yt):Oe==="select"&&Ua&&(ft.value=ft.value||[],ft.multiple=!0)}return ft},[vt,Et,T.values]),$a=P.useMemo(function(){return!Xa(g.current,T.values)},[g.current,T.values]),lv=P.useMemo(function(){return typeof l<"u"?$a?T.errors&&Object.keys(T.errors).length===0:l!==!1&&ni(l)?l(f):l:T.errors&&Object.keys(T.errors).length===0},[l,$a,T.errors,f]),$c=Jt({},T,{initialValues:g.current,initialErrors:b.current,initialTouched:v.current,initialStatus:S.current,handleBlur:vt,handleChange:Et,handleReset:be,handleSubmit:nr,resetForm:H,setErrors:V,setFormikState:er,setFieldTouched:Mt,setFieldValue:J,setFieldError:dt,setStatus:hn,setSubmitting:Ct,setTouched:N,setValues:Z,submitForm:Ye,validateForm:z,validateField:et,isValid:lv,dirty:$a,unregisterField:j,registerField:$,getFieldProps:ja,getFieldMeta:_e,getFieldHelpers:go,validateOnBlur:r,validateOnChange:e,validateOnMount:o});return $c}function r2(n){var t=EO(n),e=n.component,i=n.children,r=n.render,s=n.innerRef;return P.useImperativeHandle(s,function(){return t}),P.createElement(bO,{value:t},e?P.createElement(e,t):r?r(t):i?ni(i)?i(t):xO(i)?null:P.Children.only(i):null)}function _O(n){var t={};if(n.inner){if(n.inner.length===0)return wc(t,n.path,n.message);for(var r=n.inner,e=Array.isArray(r),i=0,r=e?r:r[Symbol.iterator]();;){var s;if(e){if(i>=r.length)break;s=r[i++]}else{if(i=r.next(),i.done)break;s=i.value}var o=s;ti(t,o.path)||(t=wc(t,o.path,o.message))}}return t}function CO(n,t,e,i){e===void 0&&(e=!1);var r=Qw(n);return t[e?"validateSync":"validate"](r,{abortEarly:!1,context:r})}function Qw(n){var t=Array.isArray(n)?[]:{};for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e)){var i=String(e);Array.isArray(n[i])===!0?t[i]=n[i].map(function(r){return Array.isArray(r)===!0||DS(r)?Qw(r):r!==""?r:void 0}):DS(n[i])?t[i]=Qw(n[i]):t[i]=n[i]!==""?n[i]:void 0}return t}function TO(n,t,e){var i=n.slice();return t.forEach(function(s,o){if(typeof i[o]>"u"){var l=e.clone!==!1,c=l&&e.isMergeableObject(s);i[o]=c?Ww(Array.isArray(s)?[]:{},s,e):s}else e.isMergeableObject(s)?i[o]=Ww(n[o],s,e):n.indexOf(s)===-1&&i.push(s)}),i}function kO(n){return Array.from(n).filter(function(t){return t.selected}).map(function(t){return t.value})}function PO(n,t,e){if(typeof n=="boolean")return!!t;var i=[],r=!1,s=-1;if(Array.isArray(n))i=n,s=n.indexOf(e),r=s>=0;else if(!e||e=="true"||e=="false")return!!t;return t&&e&&!r?i.concat(e):r?i.slice(0,s).concat(i.slice(s+1)):i}var DO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?P.useLayoutEffect:P.useEffect;function Mi(n){var t=P.useRef(n);return DO(function(){t.current=n}),P.useCallback(function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.current.apply(void 0,i)},[])}function L0(n){var t=n.validate,e=n.name,i=n.render,r=n.children,s=n.as,o=n.component,l=n.className,c=hu(n,["validate","name","render","children","as","component","className"]),u=n2(),h=hu(u,["validate","validationSchema"]),d=h.registerField,f=h.unregisterField;P.useEffect(function(){return d(e,{validate:t}),function(){f(e)}},[d,f,e,t]);var g=h.getFieldProps(Jt({name:e},c)),b=h.getFieldMeta(e),v={field:g,form:h};if(i)return i(Jt({},v,{meta:b}));if(ni(r))return r(Jt({},v,{meta:b}));if(o){if(typeof o=="string"){var S=c.innerRef,m=hu(c,["innerRef"]);return P.createElement(o,Jt({ref:S},g,m,{className:l}),r)}return P.createElement(o,Jt({field:g,form:h},c,{className:l}),r)}var w=s||"input";if(typeof w=="string"){var x=c.innerRef,E=hu(c,["innerRef"]);return P.createElement(w,Jt({ref:x},g,E,{className:l}),r)}return P.createElement(w,Jt({},g,c,{className:l}),r)}var BA=P.forwardRef(function(n,t){var e=n.action,i=hu(n,["action"]),r=e??"#",s=n2(),o=s.handleReset,l=s.handleSubmit;return P.createElement("form",Jt({onSubmit:l,ref:t,onReset:o,action:r},i))});BA.displayName="Form";function Ic(n){this._maxSize=n,this.clear()}Ic.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Ic.prototype.get=function(n){return this._values[n]};Ic.prototype.set=function(n,t){return this._size>=this._maxSize&&this.clear(),n in this._values||this._size++,this._values[n]=t};var RO=/[^.^\]^[]+|(?=\[\]|\.\.)/g,s2=/^\d+$/,MO=/^\d/,LO=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,FO=/^\s*(['"]?)(.*?)(\1)\s*$/,jA=512,iE=new Ic(jA),rE=new Ic(jA),sE=new Ic(jA),bc={Cache:Ic,split:Zw,normalizePath:Hv,setter:function(n){var t=Hv(n);return rE.get(n)||rE.set(n,function(i,r){for(var s=0,o=t.length,l=i;s<o-1;){var c=t[s];if(c==="__proto__"||c==="constructor"||c==="prototype")return i;l=l[t[s++]]}l[t[s]]=r})},getter:function(n,t){var e=Hv(n);return sE.get(n)||sE.set(n,function(r){for(var s=0,o=e.length;s<o;)if(r!=null||!t)r=r[e[s++]];else return;return r})},join:function(n){return n.reduce(function(t,e){return t+($A(e)||s2.test(e)?"["+e+"]":(t?".":"")+e)},"")},forEach:function(n,t,e){NO(Array.isArray(n)?n:Zw(n),t,e)}};function Hv(n){return iE.get(n)||iE.set(n,Zw(n).map(function(t){return t.replace(FO,"$2")}))}function Zw(n){return n.match(RO)||[""]}function NO(n,t,e){var i=n.length,r,s,o,l;for(s=0;s<i;s++)r=n[s],r&&(BO(r)&&(r='"'+r+'"'),l=$A(r),o=!l&&/^\d+$/.test(r),t.call(e,r,l,o,s,n))}function $A(n){return typeof n=="string"&&n&&["'",'"'].indexOf(n.charAt(0))!==-1}function IO(n){return n.match(MO)&&!n.match(s2)}function OO(n){return LO.test(n)}function BO(n){return!$A(n)&&(IO(n)||OO(n))}const jO=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,qy=n=>n.match(jO)||[],Yy=n=>n[0].toUpperCase()+n.slice(1),UA=(n,t)=>qy(n).join(t).toLowerCase(),o2=n=>qy(n).reduce((t,e)=>`${t}${t?e[0].toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()}`,""),$O=n=>Yy(o2(n)),UO=n=>UA(n,"_"),zO=n=>UA(n,"-"),HO=n=>Yy(UA(n," ")),VO=n=>qy(n).map(Yy).join(" ");var Vv={words:qy,upperFirst:Yy,camelCase:o2,pascalCase:$O,snakeCase:UO,kebabCase:zO,sentenceCase:HO,titleCase:VO},zA={exports:{}};zA.exports=function(n){return a2(WO(n),n)};zA.exports.array=a2;function a2(n,t){var e=n.length,i=new Array(e),r={},s=e,o=GO(t),l=XO(n);for(t.forEach(function(u){if(!l.has(u[0])||!l.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)r[s]||c(n[s],s,new Set);return i;function c(u,h,d){if(d.has(u)){var f;try{f=", node was:"+JSON.stringify(u)}catch{f=""}throw new Error("Cyclic dependency"+f)}if(!l.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!r[h]){r[h]=!0;var g=o.get(u)||new Set;if(g=Array.from(g),h=g.length){d.add(u);do{var b=g[--h];c(b,l.get(b),d)}while(h);d.delete(u)}i[--e]=u}}}function WO(n){for(var t=new Set,e=0,i=n.length;e<i;e++){var r=n[e];t.add(r[0]),t.add(r[1])}return Array.from(t)}function GO(n){for(var t=new Map,e=0,i=n.length;e<i;e++){var r=n[e];t.has(r[0])||t.set(r[0],new Set),t.has(r[1])||t.set(r[1],new Set),t.get(r[0]).add(r[1])}return t}function XO(n){for(var t=new Map,e=0,i=n.length;e<i;e++)t.set(n[e],e);return t}var qO=zA.exports;const YO=py(qO),KO=Object.prototype.toString,QO=Error.prototype.toString,ZO=RegExp.prototype.toString,JO=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",tB=/^Symbol\((.*)\)(.*)$/;function eB(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function oE(n,t=!1){if(n==null||n===!0||n===!1)return""+n;const e=typeof n;if(e==="number")return eB(n);if(e==="string")return t?`"${n}"`:n;if(e==="function")return"[Function "+(n.name||"anonymous")+"]";if(e==="symbol")return JO.call(n).replace(tB,"Symbol($1)");const i=KO.call(n).slice(8,-1);return i==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):i==="Error"||n instanceof Error?"["+QO.call(n)+"]":i==="RegExp"?ZO.call(n):null}function Ca(n,t){let e=oE(n,t);return e!==null?e:JSON.stringify(n,function(i,r){let s=oE(this[i],t);return s!==null?s:r},2)}function l2(n){return n==null?[]:[].concat(n)}let c2,u2,h2,nB=/\$\{\s*(\w+)\s*\}/g;c2=Symbol.toStringTag;class aE{constructor(t,e,i,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[c2]="Error",this.name="ValidationError",this.value=e,this.path=i,this.type=r,this.errors=[],this.inner=[],l2(t).forEach(s=>{if(Mn.isError(s)){this.errors.push(...s.errors);const o=s.inner.length?s.inner:[s];this.inner.push(...o)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}u2=Symbol.hasInstance;h2=Symbol.toStringTag;class Mn extends Error{static formatError(t,e){const i=e.label||e.path||"this";return e=Object.assign({},e,{path:i,originalPath:e.path}),typeof t=="string"?t.replace(nB,(r,s)=>Ca(e[s])):typeof t=="function"?t(e):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,e,i,r,s){const o=new aE(t,e,i,r);if(s)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[h2]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Mn)}static[u2](t){return aE[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Mr={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:t,value:e,originalValue:i})=>{const r=i!=null&&i!==e?` (cast from the value \`${Ca(i,!0)}\`).`:".";return t!=="mixed"?`${n} must be a \`${t}\` type, but the final value was: \`${Ca(e,!0)}\``+r:`${n} must match the configured type. The validated value was: \`${Ca(e,!0)}\``+r}},Bn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},iB={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Jw={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},rB={isValue:"${path} field must be ${value}"},km={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},sB={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},oB={notType:n=>{const{path:t,value:e,spec:i}=n,r=i.types.length;if(Array.isArray(e)){if(e.length<r)return`${t} tuple value has too few items, expected a length of ${r} but got ${e.length} for value: \`${Ca(e,!0)}\``;if(e.length>r)return`${t} tuple value has too many items, expected a length of ${r} but got ${e.length} for value: \`${Ca(e,!0)}\``}return Mn.formatError(Mr.notType,n)}};Object.assign(Object.create(null),{mixed:Mr,string:Bn,number:iB,date:Jw,object:km,array:sB,boolean:rB,tuple:oB});const HA=n=>n&&n.__isYupSchema__;class F0{static fromOptions(t,e){if(!e.then&&!e.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:r,otherwise:s}=e,o=typeof i=="function"?i:(...l)=>l.every(c=>c===i);return new F0(t,(l,c)=>{var u;let h=o(...l)?r:s;return(u=h==null?void 0:h(c))!=null?u:c})}constructor(t,e){this.fn=void 0,this.refs=t,this.refs=t,this.fn=e}resolve(t,e){let i=this.refs.map(s=>s.getValue(e==null?void 0:e.value,e==null?void 0:e.parent,e==null?void 0:e.context)),r=this.fn(i,t,e);if(r===void 0||r===t)return t;if(!HA(r))throw new TypeError("conditions must return a schema object");return r.resolve(e)}}const sm={context:"$",value:"."};class Oc{constructor(t,e={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===sm.context,this.isValue=this.key[0]===sm.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?sm.context:this.isValue?sm.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&bc.getter(this.path,!0),this.map=e.map}getValue(t,e,i){let r=this.isContext?i:this.isValue?t:e;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(t,e){return this.getValue(t,e==null?void 0:e.parent,e==null?void 0:e.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Oc.prototype.__isYupRef=!0;const il=n=>n==null;function zc(n){function t({value:e,path:i="",options:r,originalValue:s,schema:o},l,c){const{name:u,test:h,params:d,message:f,skipAbsent:g}=n;let{parent:b,context:v,abortEarly:S=o.spec.abortEarly,disableStackTrace:m=o.spec.disableStackTrace}=r;const w={value:e,parent:b,context:v};function x(F={}){const B=d2(Object.assign({value:e,originalValue:s,label:o.spec.label,path:F.path||i,spec:o.spec,disableStackTrace:F.disableStackTrace||m},d,F.params),w),z=new Mn(Mn.formatError(F.message||f,B),e,B.path,F.type||u,B.disableStackTrace);return z.params=B,z}const E=S?l:c;let C={path:i,parent:b,type:u,from:r.from,createError:x,resolve(F){return f2(F,w)},options:r,originalValue:s,schema:o};const T=F=>{Mn.isError(F)?E(F):F?c(null):E(x())},k=F=>{Mn.isError(F)?E(F):l(F)};if(g&&il(e))return T(!0);let M;try{var L;if(M=h.call(C,e,C),typeof((L=M)==null?void 0:L.then)=="function"){if(r.sync)throw new Error(`Validation test of type: "${C.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(M).then(T,k)}}catch(F){k(F);return}T(M)}return t.OPTIONS=n,t}function d2(n,t){if(!n)return n;for(const e of Object.keys(n))n[e]=f2(n[e],t);return n}function f2(n,t){return Oc.isRef(n)?n.getValue(t.value,t.parent,t.context):n}function aB(n,t,e,i=e){let r,s,o;return t?(bc.forEach(t,(l,c,u)=>{let h=c?l.slice(1,l.length-1):l;n=n.resolve({context:i,parent:r,value:e});let d=n.type==="tuple",f=u?parseInt(h,10):0;if(n.innerType||d){if(d&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(e&&f>=e.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);r=e,e=e&&e[f],n=d?n.spec.types[f]:n.innerType}if(!u){if(!n.fields||!n.fields[h])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${n.type}")`);r=e,e=e&&e[h],n=n.fields[h]}s=h,o=c?"["+l+"]":"."+l}),{schema:n,parent:r,parentPath:s}):{parent:r,parentPath:t,schema:n}}class N0 extends Set{describe(){const t=[];for(const e of this.values())t.push(Oc.isRef(e)?e.describe():e);return t}resolveAll(t){let e=[];for(const i of this.values())e.push(t(i));return e}clone(){return new N0(this.values())}merge(t,e){const i=this.clone();return t.forEach(r=>i.add(r)),e.forEach(r=>i.delete(r)),i}}function du(n,t=new Map){if(HA(n)||!n||typeof n!="object")return n;if(t.has(n))return t.get(n);let e;if(n instanceof Date)e=new Date(n.getTime()),t.set(n,e);else if(n instanceof RegExp)e=new RegExp(n),t.set(n,e);else if(Array.isArray(n)){e=new Array(n.length),t.set(n,e);for(let i=0;i<n.length;i++)e[i]=du(n[i],t)}else if(n instanceof Map){e=new Map,t.set(n,e);for(const[i,r]of n.entries())e.set(i,du(r,t))}else if(n instanceof Set){e=new Set,t.set(n,e);for(const i of n)e.add(du(i,t))}else if(n instanceof Object){e={},t.set(n,e);for(const[i,r]of Object.entries(n))e[i]=du(r,t)}else throw Error(`Unable to clone ${n}`);return e}function lB(n){if(!(n!=null&&n.length))return;const t=[];let e="",i=!1,r=!1;for(let s=0;s<n.length;s++){const o=n[s];if(o==="["&&!r){e&&(t.push(...e.split(".").filter(Boolean)),e=""),i=!0;continue}if(o==="]"&&!r){e&&(/^\d+$/.test(e)?t.push(e):t.push(e.replace(/^"|"$/g,"")),e=""),i=!1;continue}if(o==='"'){r=!r;continue}if(o==="."&&!i&&!r){e&&(t.push(e),e="");continue}e+=o}return e&&t.push(...e.split(".").filter(Boolean)),t}function cB(n,t){const e=t?`${t}.${n.path}`:n.path;return n.errors.map(i=>({message:i,path:lB(e)}))}function p2(n,t){var e;if(!((e=n.inner)!=null&&e.length)&&n.errors.length)return cB(n,t);const i=t?`${t}.${n.path}`:n.path;return n.inner.flatMap(r=>p2(r,i))}class as{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new N0,this._blacklist=new N0,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Mr.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e._typeCheck=this._typeCheck,e._whitelist=this._whitelist.clone(),e._blacklist=this._blacklist.clone(),e.internalTests=Object.assign({},this.internalTests),e.exclusiveTests=Object.assign({},this.exclusiveTests),e.deps=[...this.deps],e.conditions=[...this.conditions],e.tests=[...this.tests],e.transforms=[...this.transforms],e.spec=du(Object.assign({},this.spec,t)),e}label(t){let e=this.clone();return e.spec.label=t,e}meta(...t){if(t.length===0)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}withMutation(t){let e=this._mutate;this._mutate=!0;let i=t(this);return this._mutate=e,i}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let e=this,i=t.clone();const r=Object.assign({},e.spec,i.spec);return i.spec=r,i.internalTests=Object.assign({},e.internalTests,i.internalTests),i._whitelist=e._whitelist.merge(t._whitelist,t._blacklist),i._blacklist=e._blacklist.merge(t._blacklist,t._whitelist),i.tests=e.tests,i.exclusiveTests=e.exclusiveTests,i.withMutation(s=>{t.tests.forEach(o=>{s.test(o.OPTIONS)})}),i.transforms=[...e.transforms,...i.transforms],i}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let e=this;if(e.conditions.length){let i=e.conditions;e=e.clone(),e.conditions=[],e=i.reduce((r,s)=>s.resolve(r,t),e),e=e.resolve(t)}return e}resolveOptions(t){var e,i,r,s;return Object.assign({},t,{from:t.from||[],strict:(e=t.strict)!=null?e:this.spec.strict,abortEarly:(i=t.abortEarly)!=null?i:this.spec.abortEarly,recursive:(r=t.recursive)!=null?r:this.spec.recursive,disableStackTrace:(s=t.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(t,e={}){let i=this.resolve(Object.assign({},e,{value:t})),r=e.assert==="ignore-optionality",s=i._cast(t,e);if(e.assert!==!1&&!i.isType(s)){if(r&&il(s))return s;let o=Ca(t),l=Ca(s);throw new TypeError(`The value of ${e.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${o} 
`+(l!==o?`result of cast: ${l}`:""))}return s}_cast(t,e){let i=t===void 0?t:this.transforms.reduce((r,s)=>s.call(this,r,t,this,e),t);return i===void 0&&(i=this.getDefault(e)),i}_validate(t,e={},i,r){let{path:s,originalValue:o=t,strict:l=this.spec.strict}=e,c=t;l||(c=this._cast(c,Object.assign({assert:!1},e)));let u=[];for(let h of Object.values(this.internalTests))h&&u.push(h);this.runTests({path:s,value:c,originalValue:o,options:e,tests:u},i,h=>{if(h.length)return r(h,c);this.runTests({path:s,value:c,originalValue:o,options:e,tests:this.tests},i,r)})}runTests(t,e,i){let r=!1,{tests:s,value:o,originalValue:l,path:c,options:u}=t,h=v=>{r||(r=!0,e(v,o))},d=v=>{r||(r=!0,i(v,o))},f=s.length,g=[];if(!f)return d([]);let b={value:o,originalValue:l,path:c,options:u,schema:this};for(let v=0;v<s.length;v++){const S=s[v];S(b,h,function(w){w&&(Array.isArray(w)?g.push(...w):g.push(w)),--f<=0&&d(g)})}}asNestedTest({key:t,index:e,parent:i,parentPath:r,originalParent:s,options:o}){const l=t??e;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof l=="number";let u=i[l];const h=Object.assign({},o,{strict:!0,parent:i,value:u,originalValue:s[l],key:void 0,[c?"index":"key"]:l,path:c||l.includes(".")?`${r||""}[${c?l:`"${l}"`}]`:(r?`${r}.`:"")+t});return(d,f,g)=>this.resolve(h)._validate(u,h,f,g)}validate(t,e){var i;let r=this.resolve(Object.assign({},e,{value:t})),s=(i=e==null?void 0:e.disableStackTrace)!=null?i:r.spec.disableStackTrace;return new Promise((o,l)=>r._validate(t,e,(c,u)=>{Mn.isError(c)&&(c.value=u),l(c)},(c,u)=>{c.length?l(new Mn(c,u,void 0,void 0,s)):o(u)}))}validateSync(t,e){var i;let r=this.resolve(Object.assign({},e,{value:t})),s,o=(i=e==null?void 0:e.disableStackTrace)!=null?i:r.spec.disableStackTrace;return r._validate(t,Object.assign({},e,{sync:!0}),(l,c)=>{throw Mn.isError(l)&&(l.value=c),l},(l,c)=>{if(l.length)throw new Mn(l,t,void 0,void 0,o);s=c}),s}isValid(t,e){return this.validate(t,e).then(()=>!0,i=>{if(Mn.isError(i))return!1;throw i})}isValidSync(t,e){try{return this.validateSync(t,e),!0}catch(i){if(Mn.isError(i))return!1;throw i}}_getDefault(t){let e=this.spec.default;return e==null?e:typeof e=="function"?e.call(this,t):du(e)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,e){const i=this.clone({nullable:t});return i.internalTests.nullable=zc({message:e,name:"nullable",test(r){return r===null?this.schema.spec.nullable:!0}}),i}optionality(t,e){const i=this.clone({optional:t});return i.internalTests.optionality=zc({message:e,name:"optionality",test(r){return r===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(t=Mr.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Mr.notNull){return this.nullability(!1,t)}required(t=Mr.required){return this.clone().withMutation(e=>e.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let e=this.clone();return e.transforms.push(t),e}test(...t){let e;if(t.length===1?typeof t[0]=="function"?e={test:t[0]}:e=t[0]:t.length===2?e={name:t[0],test:t[1]}:e={name:t[0],message:t[1],test:t[2]},e.message===void 0&&(e.message=Mr.default),typeof e.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),r=zc(e),s=e.exclusive||e.name&&i.exclusiveTests[e.name]===!0;if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(i.exclusiveTests[e.name]=!!e.exclusive),i.tests=i.tests.filter(o=>!(o.OPTIONS.name===e.name&&(s||o.OPTIONS.test===r.OPTIONS.test))),i.tests.push(r),i}when(t,e){!Array.isArray(t)&&typeof t!="string"&&(e=t,t=".");let i=this.clone(),r=l2(t).map(s=>new Oc(s));return r.forEach(s=>{s.isSibling&&i.deps.push(s.key)}),i.conditions.push(typeof e=="function"?new F0(r,e):F0.fromOptions(r,e)),i}typeError(t){let e=this.clone();return e.internalTests.typeError=zc({message:t,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),e}oneOf(t,e=Mr.oneOf){let i=this.clone();return t.forEach(r=>{i._whitelist.add(r),i._blacklist.delete(r)}),i.internalTests.whiteList=zc({message:e,name:"oneOf",skipAbsent:!0,test(r){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(r)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),i}notOneOf(t,e=Mr.notOneOf){let i=this.clone();return t.forEach(r=>{i._blacklist.add(r),i._whitelist.delete(r)}),i.internalTests.blacklist=zc({message:e,name:"notOneOf",test(r){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(r)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),i}strip(t=!0){let e=this.clone();return e.spec.strip=t,e}describe(t){const e=(t?this.resolve(t):this).clone(),{label:i,meta:r,optional:s,nullable:o}=e.spec;return{meta:r,label:i,optional:s,nullable:o,default:e.getDefault(t),type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.filter((c,u,h)=>h.findIndex(d=>d.OPTIONS.name===c.OPTIONS.name)===u).map(c=>{const u=c.OPTIONS.params&&t?d2(Object.assign({},c.OPTIONS.params),t):c.OPTIONS.params;return{name:c.OPTIONS.name,params:u}})}}get"~standard"(){const t=this;return{version:1,vendor:"yup",async validate(i){try{return{value:await t.validate(i,{abortEarly:!1})}}catch(r){if(r instanceof Mn)return{issues:p2(r)};throw r}}}}}as.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])as.prototype[`${n}At`]=function(t,e,i={}){const{parent:r,parentPath:s,schema:o}=aB(this,t,e,i.context);return o[n](r&&r[s],Object.assign({},i,{parent:r,path:t}))};for(const n of["equals","is"])as.prototype[n]=as.prototype.oneOf;for(const n of["not","nope"])as.prototype[n]=as.prototype.notOneOf;const uB=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function hB(n){const t=tb(n);if(!t)return Date.parse?Date.parse(n):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let e=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(e=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(e=0-e)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+e,t.second,t.millisecond)}function tb(n){var t,e;const i=uB.exec(n);return i?{year:us(i[1]),month:us(i[2],1)-1,day:us(i[3],1),hour:us(i[4]),minute:us(i[5]),second:us(i[6]),millisecond:i[7]?us(i[7].substring(0,3)):0,precision:(t=(e=i[7])==null?void 0:e.length)!=null?t:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:us(i[10]),minuteOffset:us(i[11])}:null}function us(n,t=0){return Number(n)||t}let dB=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fB=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,pB=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gB="^\\d{4}-\\d{2}-\\d{2}",mB="\\d{2}:\\d{2}:\\d{2}",yB="(([+-]\\d{2}(:?\\d{2})?)|Z)",vB=new RegExp(`${gB}T${mB}(\\.\\d+)?${yB}$`),wB=n=>il(n)||n===n.trim(),bB={}.toString();function Tc(){return new g2}class g2 extends as{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,e)=>{if(!this.spec.coerce||this.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===bB?t:i})})}required(t){return super.required(t).withMutation(e=>e.test({message:t||Mr.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(e=>e.OPTIONS.name!=="required"),t))}length(t,e=Bn.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(i){return i.length===this.resolve(t)}})}min(t,e=Bn.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i.length>=this.resolve(t)}})}max(t,e=Bn.max){return this.test({name:"max",exclusive:!0,message:e,params:{max:t},skipAbsent:!0,test(i){return i.length<=this.resolve(t)}})}matches(t,e){let i=!1,r,s;return e&&(typeof e=="object"?{excludeEmptyString:i=!1,message:r,name:s}=e:r=e),this.test({name:s||"matches",message:r||Bn.matches,params:{regex:t},skipAbsent:!0,test:o=>o===""&&i||o.search(t)!==-1})}email(t=Bn.email){return this.matches(dB,{name:"email",message:t,excludeEmptyString:!0})}url(t=Bn.url){return this.matches(fB,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Bn.uuid){return this.matches(pB,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let e="",i,r;return t&&(typeof t=="object"?{message:e="",allowOffset:i=!1,precision:r=void 0}=t:e=t),this.matches(vB,{name:"datetime",message:e||Bn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:e||Bn.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:s=>{if(!s||i)return!0;const o=tb(s);return o?!!o.z:!1}}).test({name:"datetime_precision",message:e||Bn.datetime_precision,params:{precision:r},skipAbsent:!0,test:s=>{if(!s||r==null)return!0;const o=tb(s);return o?o.precision===r:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Bn.trim){return this.transform(e=>e!=null?e.trim():e).test({message:t,name:"trim",test:wB})}lowercase(t=Bn.lowercase){return this.transform(e=>il(e)?e:e.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>il(e)||e===e.toLowerCase()})}uppercase(t=Bn.uppercase){return this.transform(e=>il(e)?e:e.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>il(e)||e===e.toUpperCase()})}}Tc.prototype=g2.prototype;let AB=new Date(""),xB=n=>Object.prototype.toString.call(n)==="[object Date]";class Ky extends as{constructor(){super({type:"date",check(t){return xB(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,e)=>!this.spec.coerce||this.isType(t)||t===null?t:(t=hB(t),isNaN(t)?Ky.INVALID_DATE:new Date(t)))})}prepareParam(t,e){let i;if(Oc.isRef(t))i=t;else{let r=this.cast(t);if(!this._typeCheck(r))throw new TypeError(`\`${e}\` must be a Date or a value that can be \`cast()\` to a Date`);i=r}return i}min(t,e=Jw.min){let i=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r>=this.resolve(i)}})}max(t,e=Jw.max){let i=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(r){return r<=this.resolve(i)}})}}Ky.INVALID_DATE=AB;Ky.prototype;function SB(n,t=[]){let e=[],i=new Set,r=new Set(t.map(([o,l])=>`${o}-${l}`));function s(o,l){let c=bc.split(o)[0];i.add(c),r.has(`${l}-${c}`)||e.push([l,c])}for(const o of Object.keys(n)){let l=n[o];i.add(o),Oc.isRef(l)&&l.isSibling?s(l.path,o):HA(l)&&"deps"in l&&l.deps.forEach(c=>s(c,o))}return YO.array(Array.from(i),e).reverse()}function lE(n,t){let e=1/0;return n.some((i,r)=>{var s;if((s=t.path)!=null&&s.includes(i))return e=r,!0}),e}function m2(n){return(t,e)=>lE(n,t)-lE(n,e)}const EB=(n,t,e)=>{if(typeof n!="string")return n;let i=n;try{i=JSON.parse(n)}catch{}return e.isType(i)?i:n};function Pm(n){if("fields"in n){const t={};for(const[e,i]of Object.entries(n.fields))t[e]=Pm(i);return n.setFields(t)}if(n.type==="array"){const t=n.optional();return t.innerType&&(t.innerType=Pm(t.innerType)),t}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(Pm)}):"optional"in n?n.optional():n}const _B=(n,t)=>{const e=[...bc.normalizePath(t)];if(e.length===1)return e[0]in n;let i=e.pop(),r=bc.getter(bc.join(e),!0)(n);return!!(r&&i in r)};let cE=n=>Object.prototype.toString.call(n)==="[object Object]";function uE(n,t){let e=Object.keys(n.fields);return Object.keys(t).filter(i=>e.indexOf(i)===-1)}const CB=m2([]);function Qy(n){return new y2(n)}class y2 extends as{constructor(t){super({type:"object",check(e){return cE(e)||typeof e=="function"}}),this.fields=Object.create(null),this._sortErrors=CB,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,e={}){var i;let r=super._cast(t,e);if(r===void 0)return this.getDefault(e);if(!this._typeCheck(r))return r;let s=this.fields,o=(i=e.stripUnknown)!=null?i:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(r).filter(d=>!this._nodes.includes(d))),c={},u=Object.assign({},e,{parent:c,__validating:e.__validating||!1}),h=!1;for(const d of l){let f=s[d],g=d in r,b=r[d];if(f){let v;u.path=(e.path?`${e.path}.`:"")+d,f=f.resolve({value:b,context:e.context,parent:c});let S=f instanceof as?f.spec:void 0,m=S==null?void 0:S.strict;if(S!=null&&S.strip){h=h||d in r;continue}v=!e.__validating||!m?f.cast(b,u):b,v!==void 0&&(c[d]=v)}else g&&!o&&(c[d]=b);(g!==d in c||c[d]!==b)&&(h=!0)}return h?c:r}_validate(t,e={},i,r){let{from:s=[],originalValue:o=t,recursive:l=this.spec.recursive}=e;e.from=[{schema:this,value:o},...s],e.__validating=!0,e.originalValue=o,super._validate(t,e,i,(c,u)=>{if(!l||!cE(u)){r(c,u);return}o=o||u;let h=[];for(let d of this._nodes){let f=this.fields[d];!f||Oc.isRef(f)||h.push(f.asNestedTest({options:e,key:d,parent:u,parentPath:e.path,originalParent:o}))}this.runTests({tests:h,value:u,originalValue:o,options:e},i,d=>{r(d.sort(this._sortErrors).concat(c),u)})})}clone(t){const e=super.clone(t);return e.fields=Object.assign({},this.fields),e._nodes=this._nodes,e._excludedEdges=this._excludedEdges,e._sortErrors=this._sortErrors,e}concat(t){let e=super.concat(t),i=e.fields;for(let[r,s]of Object.entries(this.fields)){const o=i[r];i[r]=o===void 0?s:o}return e.withMutation(r=>r.setFields(i,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let e={};return this._nodes.forEach(i=>{var r;const s=this.fields[i];let o=t;(r=o)!=null&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[i]})),e[i]=s&&"getDefault"in s?s.getDefault(o):void 0}),e}setFields(t,e){let i=this.clone();return i.fields=t,i._nodes=SB(t,e),i._sortErrors=m2(Object.keys(t)),e&&(i._excludedEdges=e),i}shape(t,e=[]){return this.clone().withMutation(i=>{let r=i._excludedEdges;return e.length&&(Array.isArray(e[0])||(e=[e]),r=[...i._excludedEdges,...e]),i.setFields(Object.assign(i.fields,t),r)})}partial(){const t={};for(const[e,i]of Object.entries(this.fields))t[e]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(t)}deepPartial(){return Pm(this)}pick(t){const e={};for(const i of t)this.fields[i]&&(e[i]=this.fields[i]);return this.setFields(e,this._excludedEdges.filter(([i,r])=>t.includes(i)&&t.includes(r)))}omit(t){const e=[];for(const i of Object.keys(this.fields))t.includes(i)||e.push(i);return this.pick(e)}from(t,e,i){let r=bc.getter(t,!0);return this.transform(s=>{if(!s)return s;let o=s;return _B(s,t)&&(o=Object.assign({},s),i||delete o[t],o[e]=r(s)),o})}json(){return this.transform(EB)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||km.exact,test(e){if(e==null)return!0;const i=uE(this.schema,e);return i.length===0||this.createError({params:{properties:i.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,e=km.noUnknown){typeof t!="boolean"&&(e=t,t=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:e,test(r){if(r==null)return!0;const s=uE(this.schema,r);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return i.spec.noUnknown=t,i}unknown(t=!0,e=km.noUnknown){return this.noUnknown(!t,e)}transformKeys(t){return this.transform(e=>{if(!e)return e;const i={};for(const r of Object.keys(e))i[t(r)]=e[r];return i})}camelCase(){return this.transformKeys(Vv.camelCase)}snakeCase(){return this.transformKeys(Vv.snakeCase)}constantCase(){return this.transformKeys(t=>Vv.snakeCase(t).toUpperCase())}describe(t){const e=(t?this.resolve(t):this).clone(),i=super.describe(t);i.fields={};for(const[s,o]of Object.entries(e.fields)){var r;let l=t;(r=l)!=null&&r.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[s]})),i.fields[s]=o.describe(l)}return i}}Qy.prototype=y2.prototype;const TB=Qy({email:Tc().email("Invalid email address").required("Email is required"),password:Tc().min(6,"Password must be at least 6 characters").required("Password is required")}),kB=Qy({email:Tc().email("Invalid email address").required("Email is required"),password:Tc().min(6,"Password must be at least 6 characters").required("Password is required")}),PB=Qy({name:Tc().required("Workspace name is required").max(100,"Name must be less than 100 characters"),description:Tc().max(500,"Description must be less than 500 characters")});function eb({label:n,error:t,className:e="",...i}){return _.jsxs("div",{className:"mb-4",children:[n&&_.jsx("label",{className:"block text-sm font-medium text-[#E0E0E0] mb-2",children:n}),_.jsx("input",{className:`w-full px-4 py-2 bg-[#2A2A2A] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7] ${e}`,...i}),t&&_.jsx("p",{className:"mt-1 text-sm text-[#EF5350]",children:t})]})}function DB(){const[n,t]=Pg(),{login:e,isAuthenticated:i}=My(),s=new URLSearchParams(n.split("?")[1]).get("tab")==="create"?"create":"login",[o,l]=P.useState(s);P.useEffect(()=>{i&&t("/dashboard")},[i,t]);const c=async(u,{setSubmitting:h})=>{try{e(u.email,u.password),t("/dashboard")}catch(d){console.error("Auth error:",d)}finally{h(!1)}};return _.jsx("div",{className:"min-h-screen bg-[#121212] flex items-center justify-center px-4",children:_.jsx("div",{className:"w-full max-w-[400px]",children:_.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2A2A2A] rounded-lg p-8",children:[_.jsx("h1",{className:"text-2xl font-bold text-[#E0E0E0] mb-6 text-center",children:"GenScholar"}),_.jsxs("div",{className:"flex mb-6 border-b border-[#2A2A2A]",children:[_.jsx("button",{onClick:()=>l("login"),className:`flex-1 pb-3 text-sm font-medium transition-colors ${o==="login"?"text-[#4FC3F7] border-b-2 border-[#4FC3F7]":"text-[#BDBDBD] hover:text-[#E0E0E0]"}`,"data-testid":"button-tab-login",children:"Login"}),_.jsx("button",{onClick:()=>l("create"),className:`flex-1 pb-3 text-sm font-medium transition-colors ${o==="create"?"text-[#4FC3F7] border-b-2 border-[#4FC3F7]":"text-[#BDBDBD] hover:text-[#E0E0E0]"}`,"data-testid":"button-tab-create",children:"Create Account"})]}),_.jsx(r2,{initialValues:{email:"",password:""},validationSchema:o==="login"?TB:kB,onSubmit:c,children:({errors:u,touched:h,isSubmitting:d})=>_.jsxs(BA,{children:[_.jsx(L0,{name:"email",children:({field:f})=>_.jsx(eb,{...f,type:"email",label:"Email",placeholder:"Enter your email",error:h.email&&u.email,"data-testid":"input-email"})}),_.jsx(L0,{name:"password",children:({field:f})=>_.jsx(eb,{...f,type:"password",label:"Password",placeholder:"Enter your password",error:h.password&&u.password,"data-testid":"input-password"})}),_.jsx(vc,{type:"submit",variant:"primary",className:"w-full",disabled:d,"data-testid":"button-submit-auth",children:o==="login"?"Login":"Create Account"})]})})]})})})}function I0(){const{isAuthenticated:n}=My();return _.jsx("nav",{className:"bg-[#1E1E1E] border-b border-[#2A2A2A] px-6 py-3",children:_.jsxs("div",{className:"max-w-[1400px] mx-auto flex justify-between items-center",children:[_.jsxs(Nd,{to:"/",className:"logo","data-testid":"link-home",children:[_.jsx("img",{src:AT,alt:"GenScholar Logo",className:"logo-img"}),_.jsx("span",{className:"logo-text",children:"GenScholar"})]}),n&&_.jsxs("div",{className:"flex gap-6",children:[_.jsx(Nd,{to:"/dashboard",className:"text-[#E0E0E0] hover:text-[#4FC3F7] transition-colors","data-testid":"link-dashboard",children:"Dashboard"}),_.jsx(Nd,{to:"/contact",className:"text-[#E0E0E0] hover:text-[#4FC3F7] transition-colors","data-testid":"link-contact",children:"Contact"}),_.jsx(Nd,{to:"/logout",className:"text-[#E0E0E0] hover:text-[#4FC3F7] transition-colors","data-testid":"link-logout",children:"Logout"})]})]})})}function Da({name:n,className:t="",size:e=24}){const i={search:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("circle",{cx:"11",cy:"11",r:"8"}),_.jsx("path",{d:"m21 21-4.35-4.35"})]}),plus:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),_.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),upload:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),_.jsx("polyline",{points:"17 8 12 3 7 8"}),_.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),file:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),_.jsx("polyline",{points:"13 2 13 9 20 9"})]}),send:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),_.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),highlight:_.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("rect",{x:"3",y:"10",width:"18",height:"8",rx:"1"})}),underline:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),_.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]}),text:_.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("polyline",{points:"4 7 4 4 20 4 20 7"}),_.jsx("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),_.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),cursor:_.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"})})};return _.jsx("span",{className:t,children:i[n]})}function RB({value:n,onChange:t,placeholder:e="Search..."}){return _.jsxs("div",{className:"relative w-full",children:[_.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#BDBDBD]",children:_.jsx(Da,{name:"search",size:20})}),_.jsx("input",{type:"text",value:n,onChange:i=>t(i.target.value),placeholder:e,className:"w-full pl-12 pr-4 py-3 bg-[#1E1E1E] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7]","data-testid":"input-search"})]})}function MB({workspace:n}){return _.jsx(Nd,{to:`/workspace/${n.id}`,"data-testid":`card-workspace-${n.id}`,children:_.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2A2A2A] rounded-lg p-6 hover:border-[#4FC3F7] transition-colors cursor-pointer",children:[_.jsx("h3",{className:"text-xl font-semibold text-[#E0E0E0] mb-2",children:n.name}),_.jsx("p",{className:"text-[#BDBDBD] text-sm mb-4 line-clamp-2",children:n.description}),_.jsxs("p",{className:"text-xs text-[#BDBDBD]",children:["Created ",new Date(n.createdAt).toLocaleDateString()]})]})})}function LB({workspaces:n,searchQuery:t}){const e=n.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())||i.description.toLowerCase().includes(t.toLowerCase()));return e.length===0?_.jsx("div",{className:"text-center py-12",children:_.jsx("p",{className:"text-[#BDBDBD]",children:"No workspaces found"})}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>_.jsx(MB,{workspace:i},i.id))})}function FB({isOpen:n,onClose:t,title:e,children:i}){return P.useEffect(()=>{const r=s=>{s.key==="Escape"&&t()};return n&&document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,t]),n?_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:t,children:_.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2A2A2A] rounded-lg p-6 w-full max-w-[600px] mx-4",onClick:r=>r.stopPropagation(),children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-semibold text-[#E0E0E0]",children:e}),_.jsx("button",{onClick:t,className:"text-[#BDBDBD] hover:text-[#E0E0E0] text-2xl leading-none","data-testid":"button-close-modal",children:""})]}),i]})}):null}function NB({label:n,error:t,className:e="",...i}){return _.jsxs("div",{className:"mb-4",children:[n&&_.jsx("label",{className:"block text-sm font-medium text-[#E0E0E0] mb-2",children:n}),_.jsx("textarea",{className:`w-full px-4 py-2 bg-[#2A2A2A] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7] resize-none ${e}`,...i}),t&&_.jsx("p",{className:"mt-1 text-sm text-[#EF5350]",children:t})]})}function IB(){const{workspaces:n,createWorkspace:t}=bT(),[e,i]=P.useState(""),[r,s]=P.useState(!1),o=(l,{setSubmitting:c,resetForm:u})=>{t(l.name,l.description),c(!1),u(),s(!1)};return _.jsxs("div",{className:"min-h-screen bg-[#121212] flex flex-col",children:[_.jsx(I0,{}),_.jsxs("div",{className:"flex-1 max-w-[1400px] w-full mx-auto px-6 py-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-8",children:[_.jsx("h1",{className:"text-3xl font-bold text-[#E0E0E0]",children:"Workspaces"}),_.jsxs(vc,{onClick:()=>s(!0),variant:"primary",className:"flex items-center gap-2","data-testid":"button-create-workspace",children:[_.jsx(Da,{name:"plus",size:20}),"Create Workspace"]})]}),_.jsx("div",{className:"mb-8",children:_.jsx(RB,{value:e,onChange:i,placeholder:"Search workspaces..."})}),_.jsx(LB,{workspaces:n,searchQuery:e}),_.jsxs("div",{className:"mt-12 pt-8 border-t border-[#2A2A2A]",children:[_.jsx("h2",{className:"text-xl font-semibold text-[#E0E0E0] mb-4",children:"Recent Collaborations"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2A2A2A] rounded-lg p-4",children:[_.jsxs("p",{className:"text-[#BDBDBD] text-sm",children:["Collaborated on ",_.jsx("span",{className:"text-[#4FC3F7]",children:"ML Research"})]}),_.jsx("p",{className:"text-xs text-[#BDBDBD] mt-1",children:"2 days ago"})]})})]})]}),_.jsx(ET,{}),_.jsx(FB,{isOpen:r,onClose:()=>s(!1),title:"Create New Workspace",children:_.jsx(r2,{initialValues:{name:"",description:""},validationSchema:PB,onSubmit:o,children:({errors:l,touched:c,isSubmitting:u})=>_.jsxs(BA,{children:[_.jsx(L0,{name:"name",children:({field:h})=>_.jsx(eb,{...h,label:"Workspace Name",placeholder:"Enter workspace name",error:c.name&&l.name,"data-testid":"input-workspace-name"})}),_.jsx(L0,{name:"description",children:({field:h})=>_.jsx(NB,{...h,label:"Description",placeholder:"Enter workspace description",rows:4,error:c.description&&l.description,"data-testid":"input-workspace-description"})}),_.jsxs("div",{className:"flex gap-2 justify-end",children:[_.jsx(vc,{type:"button",variant:"secondary",onClick:()=>s(!1),"data-testid":"button-cancel",children:"Cancel"}),_.jsx(vc,{type:"submit",variant:"primary",disabled:u,"data-testid":"button-submit-workspace",children:"Create"})]})]})})})]})}const Dn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),nb=[.001,0,0,.001,0,0],Wv=1.35,bi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},is={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},If="pdfjs_internal_editor_",rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},yt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},v2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},gf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ae={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Vc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Mg={ERRORS:0,WARNINGS:1,INFOS:5},ld={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},om={moveTo:0,lineTo:1,curveTo:2,closePath:3},w2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Zy=Mg.WARNINGS;function OB(n){Number.isInteger(n)&&(Zy=n)}function BB(){return Zy}function Jy(n){Zy>=Mg.INFOS&&console.info(`Info: ${n}`)}function st(n){Zy>=Mg.WARNINGS&&console.warn(`Warning: ${n}`)}function Ht(n){throw new Error(n)}function wt(n,t){n||Ht(t)}function jB(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VA(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=VB(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return jB(i)?i:null}function WA(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&VA(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ct(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Bc=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class hE extends Bc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gv extends Bc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class O0 extends Bc{constructor(t){super(t,"InvalidPDFException")}}class Of extends Bc{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class $B extends Bc{constructor(t){super(t,"FormatError")}}class lo extends Bc{constructor(t){super(t,"AbortException")}}function b2(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ht("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<t;r+=e){const s=Math.min(r+e,t),o=n.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Lg(n){typeof n!="string"&&Ht("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function UB(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function zB(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function HB(){try{return new Function(""),!0}catch{return!1}}class Xe{static get isLittleEndian(){return ct(this,"isLittleEndian",zB())}static get isEvalSupported(){return ct(this,"isEvalSupported",HB())}static get isOffscreenCanvasSupported(){return ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return ct(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Xv=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var no,Dm,ib;class q{static makeHexColor(t,e,i){return`#${Xv[t]}${Xv[e]}${Xv[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const r=t[i],s=t[i+1];t[i]=r*e[0]+s*e[2]+e[4],t[i+1]=r*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const r=e[0],s=e[1],o=e[2],l=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[i+h],f=t[i+h+1];t[i+h]=d*r+f*o+c,t[i+h+1]=d*s+f*l+u}}static applyInverseTransform(t,e){const i=t[0],r=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,i){const r=e[0],s=e[1],o=e[2],l=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],g=t[3];let b=r*h+c,v=b,S=r*f+c,m=S,w=l*d+u,x=w,E=l*g+u,C=E;if(s!==0||o!==0){const T=s*h,k=s*f,D=o*d,M=o*g;b+=D,m+=D,S+=M,v+=M,w+=T,C+=T,E+=k,x+=k}i[0]=Math.min(i[0],b,S,v,m),i[1]=Math.min(i[1],w,E,x,C),i[2]=Math.max(i[2],b,S,v,m),i[3]=Math.max(i[3],w,E,x,C)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],r=t[1],s=t[2],o=t[3],l=i**2+r**2,c=i*s+r*o,u=s**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>o?null:[i,s,r,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,s){s[0]=Math.min(s[0],t,i),s[1]=Math.min(s[1],e,r),s[2]=Math.max(s[2],t,i),s[3]=Math.max(s[3],e,r)}static bezierBoundingBox(t,e,i,r,s,o,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),A(this,no,ib).call(this,t,i,s,l,e,r,o,c,3*(-t+3*(i-s)+l),6*(t-2*i+s),3*(i-t),u),A(this,no,ib).call(this,t,i,s,l,e,r,o,c,3*(-e+3*(r-o)+c),6*(e-2*r+o),3*(r-e),u)}}no=new WeakSet,Dm=function(t,e,i,r,s,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,b=d*(d*(d*t+3*u*e)+3*f*i)+g*r,v=d*(d*(d*s+3*u*o)+3*f*l)+g*c;h[0]=Math.min(h[0],b),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],b),h[3]=Math.max(h[3],v)},ib=function(t,e,i,r,s,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,no,Dm).call(this,t,e,i,r,s,o,l,c,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const b=Math.sqrt(g),v=2*u;A(this,no,Dm).call(this,t,e,i,r,s,o,l,c,(-h+b)/v,f),A(this,no,Dm).call(this,t,e,i,r,s,o,l,c,(-h-b)/v,f)},y(q,no);function VB(n){return decodeURIComponent(escape(n))}let qv=null,dE=null;function A2(n){return qv||(qv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,dE=new Map([["","t"]])),n.replaceAll(qv,(t,e,i)=>e?e.normalize("NFKC"):dE.get(i))}function GA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),b2(n)}const XA="pdfjs_internal_id_";function WB(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,r,...s]=e;if(!n(i)&&!Number.isInteger(i)||!t(r))return!1;const o=s.length;let l=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function An(n,t,e){return Math.min(Math.max(n,t),e)}function x2(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(b2(n))}function GB(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Lg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class Bf{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(s){var c;if(!s)return;let o=null;const l=s.name;if(l==="#text")o=s.value;else if(Bf.shouldBuildText(l))(c=s==null?void 0:s.attributes)!=null&&c.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&e.push({str:o}),!!s.children)for(const u of s.children)r(u)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class qA{static setupStorage(t,e,i,r,s){const o=r.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),s==="print")break;t.addEventListener("input",l=>{r.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",l=>{r.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),s==="print")break;t.addEventListener("input",l=>{r.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:s}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&s.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,s=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const l=s!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),l&&Bf.shouldBuildText(r.name)&&u.push(g)}return{textDivs:u}}const h=[[r,-1,o]];for(;h.length>0;){const[g,b,v]=h.at(-1);if(b+1===g.children.length){h.pop();continue}const S=g.children[++h.at(-1)[1]];if(S===null)continue;const{name:m}=S;if(m==="#text"){const x=document.createTextNode(S.value);u.push(x),v.append(x);continue}const w=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,m):document.createElement(m);if(v.append(w),S.attributes&&this.setAttributes({html:w,element:S,storage:e,intent:s,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,w]);else if(S.value){const x=document.createTextNode(S.value);l&&Bf.shouldBuildText(m)&&u.push(x),w.append(x)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const hs="http://www.w3.org/2000/svg",Qa=class Qa{};I(Qa,"CSS",96),I(Qa,"PDF",72),I(Qa,"PDF_TO_CSS_UNITS",Qa.CSS/Qa.PDF);let co=Qa;async function md(n,t="text"){if(Id(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Fg{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:s=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=o,i*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,d=0,f=0,g=1;break;case 90:h=0,d=1,f=1,g=0;break;case 270:h=0,d=-1,f=-1,g=0;break;case 0:h=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,g=-g);let b,v,S,m;h===0?(b=Math.abs(u-t[1])*i+s,v=Math.abs(c-t[0])*i+o,S=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(b=Math.abs(c-t[0])*i+s,v=Math.abs(u-t[1])*i+o,S=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,g*i,b-h*i*c-f*i*u,v-d*i*c-g*i*u],this.width=S,this.height=m}get rawDims(){const t=this.viewBox;return ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Fg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(t,e){const i=[t,e];return q.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];q.applyTransform(e,this.transform);const i=[t[2],t[3]];return q.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return q.applyInverseTransform(i,this.transform),i}}class tv extends Bc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ng(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function ev(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function S2(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function E2(n,t="document.pdf"){if(typeof n!="string")return t;if(Ng(n))return st('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},s=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(s.test(o))return r(o);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const u of l)if(s.test(u))return r(u);const c=Array.from(i.searchParams.keys()).reverse();for(const u of c)if(s.test(u))return r(u)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return r(c[0])}return t}class fE{constructor(){I(this,"started",Object.create(null));I(this,"times",[])}time(t){t in this.started&&st(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||st(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-r}ms
`);return t.join("")}}function Id(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ki(n){n.preventDefault()}function ce(n){n.preventDefault(),n.stopPropagation()}function XB(n){console.log("Deprecated API usage: "+n)}var Vf;class jf{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Vf)||p(this,Vf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Vf).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(i,r,s,o,l,c))}}Vf=new WeakMap,y(jf,Vf);function _2(n,{scale:t=1,rotation:e=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Fg({viewBox:s,userUnit:1,scale:t,rotation:e})}function yd(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(st(`Not a valid color format: "${n}"`),[0,0,0])}function qB(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,yd(i))}t.remove()}function ae(n){const{a:t,b:e,c:i,d:r,e:s,f:o}=n.getTransform();return[t,e,i,r,s,o]}function kr(n){const{a:t,b:e,c:i,d:r,e:s,f:o}=n.getTransform().invertSelf();return[t,e,i,r,s,o]}function Ra(n,t,e=!1,i=!0){if(t instanceof Fg){const{pageWidth:r,pageHeight:s}=t.rawDims,{style:o}=n,l=Xe.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${s}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class _r{constructor(){const{pixelRatio:t}=_r;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,s=-1){let o=1/0,l=1/0,c=1/0;i=_r.capPixels(i,s),i>0&&(o=Math.sqrt(i/(t*e))),r!==-1&&(l=r/t,c=r/e);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const B0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class YB{static get isDarkMode(){var t;return ct(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class C2{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),ct(this,"commentForegroundColor",yd(i))}}function T2(n,t,e,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return n=Math.round(n*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[n,t,e]}function pE(n,t){const e=n[0]/255,i=n[1]/255,r=n[2]/255,s=Math.max(e,i,r),o=Math.min(e,i,r),l=(s+o)/2;if(s===o)t[0]=t[1]=0;else{const c=s-o;switch(t[1]=l<.5?c/(s+o):c/(2-s-o),s){case e:t[0]=((i-r)/c+(i<r?6:0))*60;break;case i:t[0]=((r-e)/c+2)*60;break;case r:t[0]=((e-i)/c+4)*60;break}}t[2]=l}function rb(n,t){const e=n[0],i=n[1],r=n[2],s=(1-Math.abs(2*r-1))*i,o=s*(1-Math.abs(e/60%2-1)),l=r-s/2;switch(Math.floor(e/60)){case 0:t[0]=s+l,t[1]=o+l,t[2]=l;break;case 1:t[0]=o+l,t[1]=s+l,t[2]=l;break;case 2:t[0]=l,t[1]=s+l,t[2]=o+l;break;case 3:t[0]=l,t[1]=o+l,t[2]=s+l;break;case 4:t[0]=o+l,t[1]=l,t[2]=s+l;break;case 5:case 6:t[0]=s+l,t[1]=l,t[2]=o+l;break}}function gE(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function mE(n,t,e){rb(n,e),e.map(gE);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];rb(t,e),e.map(gE);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const yE=new Map;function k2(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=yE.get(e);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),o=r.subarray(3,6);pE(n,o);const l=r.subarray(6,9);pE(t,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),mE(o,l,s)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const g=o[2]=(h+d)/2;c===mE(o,l,s)<u?h=g:d=g}o[2]=c?d:h}return rb(o,s),i=q.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),yE.set(e,i),i}function YA({html:n,dir:t,className:e},i){const r=document.createDocumentFragment();if(typeof n=="string"){const s=document.createElement("p");s.dir=t||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];s.append(document.createTextNode(u)),l<c-1&&s.append(document.createElement("br"))}r.append(s)}else qA.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}var xo,So,Ni,Ii,Wf,Eo,Tu,ku,Gf,Y0,P2,ln,D2,R2,Wc,Od;const gs=class gs{constructor(t){y(this,ln);y(this,xo,null);y(this,So,null);y(this,Ni);y(this,Ii,null);y(this,Wf,null);y(this,Eo,null);y(this,Tu,null);y(this,ku,null);p(this,Ni,t),a(gs,Gf)||p(gs,Gf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=p(this,xo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ni)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ki,{signal:e}),t.addEventListener("pointerdown",A(gs,Y0,P2),{signal:e}));const i=p(this,Ii,document.createElement("div"));i.className="buttons",t.append(i);const r=a(this,Ni).toolbarPosition;if(r){const{style:s}=t,o=a(this,Ni)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,xo)}hide(){var t;a(this,xo).classList.add("hidden"),(t=a(this,So))==null||t.hideDropdown()}show(){var t,e;a(this,xo).classList.remove("hidden"),(t=a(this,Wf))==null||t.shown(),(e=a(this,Eo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,Ni),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",a(gs,Gf)[t]),A(this,ln,Wc).call(this,i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,Ii).append(i)}async addAltText(t){const e=await t.render();A(this,ln,Wc).call(this,e),a(this,Ii).append(e,a(this,ln,Od)),p(this,Wf,t)}addComment(t,e=null){if(a(this,Eo))return;const i=t.renderForToolbar();if(!i)return;A(this,ln,Wc).call(this,i);const r=p(this,Tu,a(this,ln,Od));e?(a(this,Ii).insertBefore(i,e),a(this,Ii).insertBefore(r,e)):a(this,Ii).append(i,r),p(this,Eo,t),t.toolbar=this}addColorPicker(t){if(a(this,So))return;p(this,So,t);const e=t.renderButton();A(this,ln,Wc).call(this,e),a(this,Ii).append(e,a(this,ln,Od))}async addEditSignatureButton(t){const e=p(this,ku,await t.renderEditButton(a(this,Ni)));A(this,ln,Wc).call(this,e),a(this,Ii).append(e,a(this,ln,Od))}removeButton(t){var e,i;switch(t){case"comment":(e=a(this,Eo))==null||e.removeToolbarCommentButton(),p(this,Eo,null),(i=a(this,Tu))==null||i.remove(),p(this,Tu,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const r=a(this,Ii).querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){a(this,ku)&&(a(this,ku).title=t)}remove(){var t;a(this,xo).remove(),(t=a(this,So))==null||t.destroy(),p(this,So,null)}};xo=new WeakMap,So=new WeakMap,Ni=new WeakMap,Ii=new WeakMap,Wf=new WeakMap,Eo=new WeakMap,Tu=new WeakMap,ku=new WeakMap,Gf=new WeakMap,Y0=new WeakSet,P2=function(t){t.stopPropagation()},ln=new WeakSet,D2=function(t){a(this,Ni)._focusEventsAllowed=!1,ce(t)},R2=function(t){a(this,Ni)._focusEventsAllowed=!0,ce(t)},Wc=function(t){const e=a(this,Ni)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",A(this,ln,D2).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,ln,R2).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ki,{signal:e}),!0)},Od=function(){const t=document.createElement("div");return t.className="divider",t},y(gs,Y0),y(gs,Gf,null);let sb=gs;var Xf,rl,ws,uo,M2,L2,ob;class KB{constructor(t){y(this,uo);y(this,Xf,null);y(this,rl,null);y(this,ws);p(this,ws,t)}show(t,e,i){const[r,s]=A(this,uo,L2).call(this,e,i),{style:o}=a(this,rl)||p(this,rl,A(this,uo,M2).call(this));t.append(a(this,rl)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,rl).remove()}}Xf=new WeakMap,rl=new WeakMap,ws=new WeakMap,uo=new WeakSet,M2=function(){const t=p(this,rl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,ws)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ki,{signal:e});const i=p(this,Xf,document.createElement("div"));return i.className="buttons",t.append(i),a(this,ws).hasCommentManager()&&A(this,uo,ob).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,ws).commentSelection("floating_button")}),A(this,uo,ob).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,ws).highlightSelection("floating_button")}),t},L2=function(t,e){let i=0,r=0;for(const s of t){const o=s.y+s.height;if(o<i)continue;const l=s.x+(e?s.width:0);if(o>i){r=l,i=o;continue}e?l>r&&(r=l):l<r&&(r=l)}return[e?1-r:r,i]},ob=function(t,e,i,r){const s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const l=a(this,ws)._signal;l instanceof AbortSignal&&!l.aborted&&(s.addEventListener("contextmenu",ki,{signal:l}),s.addEventListener("click",r,{signal:l})),a(this,Xf).append(s)};function F2(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var K0;class QB{constructor(){y(this,K0,0)}get id(){return`${If}${De(this,K0)._++}`}}K0=new WeakMap;var Pu,qf,gn,Du,Rm;const ax=class ax{constructor(){y(this,Du);y(this,Pu,GA());y(this,qf,0);y(this,gn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ct(this,"_isSVGFittingCanvas",s)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:s}=t;return A(this,Du,Rm).call(this,`${e}_${i}_${r}_${s}`,t)}async getFromUrl(t){return A(this,Du,Rm).call(this,t,t)}async getFromBlob(t,e){const i=await e;return A(this,Du,Rm).call(this,t,i)}async getFromId(t){a(this,gn)||p(this,gn,new Map);const e=a(this,gn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,gn)||p(this,gn,new Map);let i=a(this,gn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${a(this,Pu)}_${De(this,qf)._++}`,refCounter:1,isSvg:!1},a(this,gn).set(t,i),a(this,gn).set(i.id,i),i}getSvgUrl(t){const e=a(this,gn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,gn)||p(this,gn,new Map);const e=a(this,gn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Pu)}_`)}};Pu=new WeakMap,qf=new WeakMap,gn=new WeakMap,Du=new WeakSet,Rm=async function(t,e){a(this,gn)||p(this,gn,new Map);let i=a(this,gn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,Pu)}_${De(this,qf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await md(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const s=ax._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;l.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){st(r),i=null}return a(this,gn).set(t,i),i&&a(this,gn).set(i.id,i),i};let ab=ax;var xe,_o,Yf,oe;class ZB{constructor(t=128){y(this,xe,[]);y(this,_o,!1);y(this,Yf);y(this,oe,-1);p(this,Yf,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(r&&t(),a(this,_o))return;const c={cmd:t,undo:e,post:i,type:s};if(a(this,oe)===-1){a(this,xe).length>0&&(a(this,xe).length=0),p(this,oe,0),a(this,xe).push(c);return}if(o&&a(this,xe)[a(this,oe)].type===s){l&&(c.undo=a(this,xe)[a(this,oe)].undo),a(this,xe)[a(this,oe)]=c;return}const u=a(this,oe)+1;u===a(this,Yf)?a(this,xe).splice(0,1):(p(this,oe,u),u<a(this,xe).length&&a(this,xe).splice(u)),a(this,xe).push(c)}undo(){if(a(this,oe)===-1)return;p(this,_o,!0);const{undo:t,post:e}=a(this,xe)[a(this,oe)];t(),e==null||e(),p(this,_o,!1),p(this,oe,a(this,oe)-1)}redo(){if(a(this,oe)<a(this,xe).length-1){p(this,oe,a(this,oe)+1),p(this,_o,!0);const{cmd:t,post:e}=a(this,xe)[a(this,oe)];t(),e==null||e(),p(this,_o,!1)}}hasSomethingToUndo(){return a(this,oe)!==-1}hasSomethingToRedo(){return a(this,oe)<a(this,xe).length-1}cleanType(t){if(a(this,oe)!==-1){for(let e=a(this,oe);e>=0;e--)if(a(this,xe)[e].type!==t){a(this,xe).splice(e+1,a(this,oe)-e),p(this,oe,e);return}a(this,xe).length=0,p(this,oe,-1)}}destroy(){p(this,xe,null)}}xe=new WeakMap,_o=new WeakMap,Yf=new WeakMap,oe=new WeakMap;var Q0,N2;class Ig{constructor(t){y(this,Q0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Xe.platform;for(const[i,r,s={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(A(this,Q0,N2).call(this,e));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(r.bind(t,...o,e)(),s||ce(e))}}Q0=new WeakSet,N2=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Z0=class Z0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return qB(t),ct(this,"_colors",t)}convert(t){const e=yd(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((s,o)=>s===e[o]))return Z0._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?q.makeHexColor(...e):t}};I(Z0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let lb=Z0;var Ru,ii,Mu,pe,Me,Lu,Oi,Fu,Bi,mn,Co,To,Nu,ko,Lr,ji,sl,Kf,Qf,Iu,Zf,Fr,Po,Ou,Do,Nr,J0,Ro,Bu,Jf,Mo,ol,ju,Lo,tp,Te,kt,bs,Fo,No,ep,$u,np,Io,Ir,As,ip,rp,$i,U,Mm,cb,I2,O2,Bd,B2,j2,$2,ub,U2,hb,db,z2,_n,ds,H2,V2,fb,W2,jd,pb;const pu=class pu{constructor(t,e,i,r,s,o,l,c,u,h,d,f,g,b,v,S){y(this,U);y(this,Ru,new AbortController);y(this,ii,null);y(this,Mu,null);y(this,pe,new Map);y(this,Me,new Map);y(this,Lu,null);y(this,Oi,null);y(this,Fu,null);y(this,Bi,new ZB);y(this,mn,null);y(this,Co,null);y(this,To,null);y(this,Nu,0);y(this,ko,new Set);y(this,Lr,null);y(this,ji,null);y(this,sl,new Set);I(this,"_editorUndoBar",null);y(this,Kf,!1);y(this,Qf,!1);y(this,Iu,!1);y(this,Zf,null);y(this,Fr,null);y(this,Po,null);y(this,Ou,null);y(this,Do,!1);y(this,Nr,null);y(this,J0,new QB);y(this,Ro,!1);y(this,Bu,!1);y(this,Jf,!1);y(this,Mo,null);y(this,ol,null);y(this,ju,null);y(this,Lo,null);y(this,tp,null);y(this,Te,rt.NONE);y(this,kt,new Set);y(this,bs,null);y(this,Fo,null);y(this,No,null);y(this,ep,null);y(this,$u,null);y(this,np,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});y(this,Io,[0,0]);y(this,Ir,null);y(this,As,null);y(this,ip,null);y(this,rp,null);y(this,$i,null);const m=this._signal=a(this,Ru).signal;p(this,As,t),p(this,ip,e),p(this,rp,i),p(this,Lu,r),p(this,mn,s),p(this,Fo,o),p(this,$u,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:m}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),l._on("setpreference",this.onSetPreference.bind(this),{signal:m}),l._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:m}),window.addEventListener("pointerdown",()=>{p(this,Bu,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{p(this,Bu,!1)},{capture:!0,signal:m}),A(this,U,B2).call(this),A(this,U,z2).call(this),A(this,U,ub).call(this),p(this,Oi,c.annotationStorage),p(this,Zf,c.filterFactory),p(this,No,u),p(this,Ou,h||null),p(this,Kf,d),p(this,Qf,f),p(this,Iu,g),p(this,tp,b||null),this.viewParameters={realScale:co.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const t=pu.prototype,e=o=>a(o,As).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ct(this,"_keyboardManager",new Ig([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,As).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,As).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}destroy(){var t,e,i,r,s,o,l,c,u;(t=a(this,$i))==null||t.resolve(),p(this,$i,null),(e=a(this,Ru))==null||e.abort(),p(this,Ru,null),this._signal=null;for(const h of a(this,Me).values())h.destroy();a(this,Me).clear(),a(this,pe).clear(),a(this,sl).clear(),(i=a(this,Lo))==null||i.clear(),p(this,ii,null),a(this,kt).clear(),a(this,Bi).destroy(),(r=a(this,Lu))==null||r.destroy(),(s=a(this,mn))==null||s.destroy(),(o=a(this,Fo))==null||o.destroy(),(l=a(this,Nr))==null||l.hide(),p(this,Nr,null),(c=a(this,ju))==null||c.destroy(),p(this,ju,null),p(this,Mu,null),a(this,Fr)&&(clearTimeout(a(this,Fr)),p(this,Fr,null)),a(this,Ir)&&(clearTimeout(a(this,Ir)),p(this,Ir,null)),(u=this._editorUndoBar)==null||u.destroy(),p(this,$u,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,tp)}get useNewAltTextFlow(){return a(this,Qf)}get useNewAltTextWhenAddingImage(){return a(this,Iu)}get hcmFilter(){return ct(this,"hcmFilter",a(this,No)?a(this,Zf).addHCMFilter(a(this,No).foreground,a(this,No).background):"none")}get direction(){return ct(this,"direction",getComputedStyle(a(this,As)).direction)}get _highlightColors(){return ct(this,"_highlightColors",a(this,Ou)?new Map(a(this,Ou).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return ct(this,"highlightColors",null);const e=new Map,i=!!a(this,No);for(const[r,s]of t){const o=r.endsWith("_HCM");if(i&&o){e.set(r.replace("_HCM",""),s);continue}!i&&!o&&e.set(r,s)}return ct(this,"highlightColors",e)}get highlightColorNames(){return ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),p(this,To,t)}setMainHighlightColorPicker(t){p(this,ju,t)}editAltText(t,e=!1){var i;(i=a(this,Lu))==null||i.editAltText(this,t,e)}hasCommentManager(){return!!a(this,mn)}editComment(t,e,i,r){var s;(s=a(this,mn))==null||s.showDialog(this,t,e,i,r)}selectComment(t,e){const i=a(this,Me).get(t),r=i==null?void 0:i.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,mn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,mn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,mn))==null||e.removeComments([t.uid])}toggleComment(t,e,i=void 0){var r;(r=a(this,mn))==null||r.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var i;return t&&((i=a(this,mn))==null?void 0:i.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,mn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,Me).has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),r=s=>{s.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){var e;(e=a(this,Fo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,Fo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":p(this,Iu,e);break}}onPageChanging({pageNumber:t}){p(this,Nu,t-1)}focusMainContainer(){a(this,As).focus()}findParent(t,e){for(const i of a(this,Me).values()){const{x:r,y:s,width:o,height:l}=i.div.getBoundingClientRect();if(t>=r&&t<=r+o&&e>=s&&e<=s+l)return i}return null}disableUserSelect(t=!1){a(this,ip).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,sl).add(t)}removeShouldRescale(t){a(this,sl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*co.PDF_TO_CSS_UNITS;for(const i of a(this,sl))i.onScaleChanging();(e=a(this,To))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:l}=i,c=i.toString(),h=A(this,U,Mm).call(this,i).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;i.empty();const f=A(this,U,cb).call(this,h),g=a(this,Te)===rt.NONE,b=()=>{const v=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:l,text:c});g&&this.showAllEditors("highlight",!0,!0),e&&(v==null||v.editComment())};if(g){this.switchToMode(rt.HIGHLIGHT,b);return}b()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,Oi))return null;const e=`${If}${t}`,i=a(this,Oi).getRawValue(e);return i&&a(this,Oi).remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Oi)&&!a(this,Oi).has(t.id)&&a(this,Oi).setValue(t.id,t)}a11yAlert(t,e=null){const i=a(this,rp);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,Do)&&(p(this,Do,!1),A(this,U,Bd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,kt))if(e.div.contains(t)){p(this,ol,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,ol))return;const[t,e]=a(this,ol);p(this,ol,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,U,ub).call(this),A(this,U,hb).call(this)}removeEditListeners(){A(this,U,U2).call(this),A(this,U,db).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,ji))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,ji))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,ii))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,kt)){const s=r.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const o of a(this,ji))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){st(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const u=await r.deserialize(c);if(!u)return;s.push(u)}const o=()=>{for(const c of s)A(this,U,fb).call(this,c);A(this,U,pb).call(this,s)},l=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(s){st(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,Te)!==rt.NONE&&!this.isEditorHandlingKeyboard&&pu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Do)&&(p(this,Do,!1),A(this,U,Bd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(A(this,U,j2).call(this),A(this,U,hb).call(this),A(this,U,_n).call(this,{isEditing:a(this,Te)!==rt.NONE,isEmpty:A(this,U,jd).call(this),hasSomethingToUndo:a(this,Bi).hasSomethingToUndo(),hasSomethingToRedo:a(this,Bi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,U,$2).call(this),A(this,U,db).call(this),A(this,U,_n).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,ji)){p(this,ji,t);for(const e of a(this,ji))A(this,U,ds).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,J0).id}get currentLayer(){return a(this,Me).get(a(this,Nu))}getLayer(t){return a(this,Me).get(t)}get currentPageIndex(){return a(this,Nu)}addLayer(t){a(this,Me).set(t.pageIndex,t),a(this,Ro)?t.enable():t.disable()}removeLayer(t){a(this,Me).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,s=!1){var o,l,c,u,h,d;if(a(this,Te)!==t&&!(a(this,$i)&&(await a(this,$i).promise,!a(this,$i)))){if(p(this,$i,Promise.withResolvers()),(o=a(this,To))==null||o.commitOrRemove(),a(this,Te)===rt.POPUP&&((l=a(this,mn))==null||l.hideSidebar()),(c=a(this,mn))==null||c.destroyPopup(),p(this,Te,t),t===rt.NONE){this.setEditingState(!1),A(this,U,V2).call(this);for(const f of a(this,pe).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,$i).resolve();return}for(const f of a(this,pe).values())f.addStandaloneCommentButton();t===rt.SIGNATURE&&await((h=a(this,Fo))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await A(this,U,H2).call(this),this.unselectAll();for(const f of a(this,Me).values())f.updateMode(t);if(t===rt.POPUP){a(this,Mu)||p(this,Mu,await a(this,$u).getAnnotationsByType(new Set(a(this,ji).map(b=>b._editorType))));const f=new Set,g=[];for(const b of a(this,pe).values()){const{annotationElementId:v,hasComment:S,deleted:m}=b;v&&f.add(v),S&&!m&&g.push(b.getData())}for(const b of a(this,Mu)){const{id:v,popupRef:S,contentsObj:m}=b;S&&(m!=null&&m.str)&&!f.has(v)&&!a(this,ko).has(v)&&g.push(b)}(d=a(this,mn))==null||d.showSidebar(g)}if(!e){i&&this.addNewEditorFromKeyboard(),a(this,$i).resolve();return}for(const f of a(this,pe).values())f.uid===e?(this.setSelected(f),s?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();a(this,$i).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,Te)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,ji)){switch(t){case yt.CREATE:this.currentLayer.addNewEditor(e);return;case yt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,ep)||p(this,ep,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of a(this,kt))i.updateParams(t,e);else for(const i of a(this,ji))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var s;for(const o of a(this,pe).values())o.editorType===t&&o.show(e);(((s=a(this,ep))==null?void 0:s.get(yt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,U,ds).call(this,[[yt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Jf)!==t){p(this,Jf,t);for(const e of a(this,Me).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,pe).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,pe).get(t)}addEditor(t){a(this,pe).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(a(this,Fr)&&clearTimeout(a(this,Fr)),p(this,Fr,setTimeout(()=>{this.focusMainContainer(),p(this,Fr,null)},0))),a(this,pe).delete(t.id),t.annotationElementId&&((e=a(this,Lo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,ko).has(t.annotationElementId))&&((i=a(this,Oi))==null||i.remove(t.id))}addDeletedAnnotationElement(t){a(this,ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,ko).has(t)}removeDeletedAnnotationElement(t){a(this,ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,ii)!==t&&(p(this,ii,t),t&&A(this,U,ds).call(this,t.propertiesToUpdate))}updateUI(t){a(this,U,W2)===t&&A(this,U,ds).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,U,ds).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,kt).has(t)){a(this,kt).delete(t),t.unselect(),A(this,U,_n).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,kt).add(t),t.select(),A(this,U,ds).call(this,t.propertiesToUpdate),A(this,U,_n).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=a(this,To))==null||e.commitOrRemove();for(const i of a(this,kt))i!==t&&i.unselect();a(this,kt).clear(),a(this,kt).add(t),t.select(),A(this,U,ds).call(this,t.propertiesToUpdate),A(this,U,_n).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,kt).has(t)}get firstSelectedEditor(){return a(this,kt).values().next().value}unselect(t){t.unselect(),a(this,kt).delete(t),A(this,U,_n).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,kt).size!==0}get isEnterHandled(){return a(this,kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Bi).undo(),A(this,U,_n).call(this,{hasSomethingToUndo:a(this,Bi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,U,jd).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Bi).redo(),A(this,U,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Bi).hasSomethingToRedo(),isEmpty:A(this,U,jd).call(this)})}addCommands(t){a(this,Bi).add(t),A(this,U,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,U,jd).call(this)})}cleanUndoStack(t){a(this,Bi).cleanType(t)}delete(){var s;this.commitOrRemove();const t=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,kt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},r=()=>{for(const o of e)A(this,U,fb).call(this,o)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,ii))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,ii)||this.hasSelection}selectAll(){for(const t of a(this,kt))t.commit();A(this,U,pb).call(this,a(this,pe).values())}unselectAll(){var t;if(!(a(this,ii)&&(a(this,ii).commitOrRemove(),a(this,Te)!==rt.NONE))&&!((t=a(this,To))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,kt))e.unselect();a(this,kt).clear(),A(this,U,_n).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Io)[0]+=t,a(this,Io)[1]+=e;const[r,s]=a(this,Io),o=[...a(this,kt)],l=1e3;a(this,Ir)&&clearTimeout(a(this,Ir)),p(this,Ir,setTimeout(()=>{p(this,Ir,null),a(this,Io)[0]=a(this,Io)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,pe).has(c.id)&&(c.translateInPage(r,s),c.translationDone())},undo:()=>{for(const c of o)a(this,pe).has(c.id)&&(c.translateInPage(-r,-s),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),p(this,Lr,new Map);for(const t of a(this,kt))a(this,Lr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Lr))return!1;this.disableUserSelect(!1);const t=a(this,Lr);p(this,Lr,null);let e=!1;for(const[{x:r,y:s,pageIndex:o},l]of t)l.newX=r,l.newY=s,l.newPageIndex=o,e||(e=r!==l.savedX||s!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(r,s,o,l)=>{if(a(this,pe).has(r.id)){const c=a(this,Me).get(l);c?r._setParentAndPosition(c,s,o):(r.pageIndex=l,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:l}]of t)i(r,s,o,l)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:l}]of t)i(r,s,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Lr))for(const i of a(this,Lr).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,ii)===t}getActive(){return a(this,ii)}getMode(){return a(this,Te)}isEditingMode(){return a(this,Te)!==rt.NONE}get imageManager(){return ct(this,"imageManager",new ab)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-r)/o,y:1-(u+d-i)/s,width:f/o,height:d/s});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-i)/s,y:1-(h+f-r)/o,width:d/s,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-r)/o,y:(u-i)/s,width:f/o,height:d/s});break;default:l=(u,h,d,f)=>({x:(u-i)/s,y:(h-r)/o,width:d/s,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:b,height:v}of d.getClientRects())b===0||v===0||c.push(l(f,g,b,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Fu)||p(this,Fu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Fu))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,Fu))==null?void 0:r.get(t.data.id);if(!e)return;const i=a(this,Oi).getRawValue(e);i&&(a(this,Te)===rt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var s;const r=(s=a(this,Lo))==null?void 0:s.get(t);r&&(r.setCanvas(e,i),a(this,Lo).delete(t))}addMissingCanvas(t,e){(a(this,Lo)||p(this,Lo,new Map)).set(t,e)}};Ru=new WeakMap,ii=new WeakMap,Mu=new WeakMap,pe=new WeakMap,Me=new WeakMap,Lu=new WeakMap,Oi=new WeakMap,Fu=new WeakMap,Bi=new WeakMap,mn=new WeakMap,Co=new WeakMap,To=new WeakMap,Nu=new WeakMap,ko=new WeakMap,Lr=new WeakMap,ji=new WeakMap,sl=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Iu=new WeakMap,Zf=new WeakMap,Fr=new WeakMap,Po=new WeakMap,Ou=new WeakMap,Do=new WeakMap,Nr=new WeakMap,J0=new WeakMap,Ro=new WeakMap,Bu=new WeakMap,Jf=new WeakMap,Mo=new WeakMap,ol=new WeakMap,ju=new WeakMap,Lo=new WeakMap,tp=new WeakMap,Te=new WeakMap,kt=new WeakMap,bs=new WeakMap,Fo=new WeakMap,No=new WeakMap,ep=new WeakMap,$u=new WeakMap,np=new WeakMap,Io=new WeakMap,Ir=new WeakMap,As=new WeakMap,ip=new WeakMap,rp=new WeakMap,$i=new WeakMap,U=new WeakSet,Mm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},cb=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,Me).values())if(i.hasTextLayer(t))return i;return null},I2=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=A(this,U,Mm).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(a(this,Nr)||p(this,Nr,new KB(this)),a(this,Nr).show(i,r,this.direction==="ltr"))},O2=function(){var s,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,bs)&&((s=a(this,Nr))==null||s.hide(),p(this,bs,null),A(this,U,_n).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,bs))return;const r=A(this,U,Mm).call(this,t).closest(".textLayer");if(!r){a(this,bs)&&((o=a(this,Nr))==null||o.hide(),p(this,bs,null),A(this,U,_n).call(this,{hasSelectedText:!1}));return}if((l=a(this,Nr))==null||l.hide(),p(this,bs,e),A(this,U,_n).call(this,{hasSelectedText:!0}),!(a(this,Te)!==rt.HIGHLIGHT&&a(this,Te)!==rt.NONE)&&(a(this,Te)===rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),p(this,Do,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,Te)===rt.HIGHLIGHT?A(this,U,cb).call(this,r):null;if(c==null||c.toggleDrawing(),a(this,Bu)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,U,Bd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),A(this,U,Bd).call(this,"main_toolbar")}},Bd=function(t=""){a(this,Te)===rt.HIGHLIGHT?this.highlightSelection(t):a(this,Kf)&&A(this,U,I2).call(this)},B2=function(){document.addEventListener("selectionchange",A(this,U,O2).bind(this),{signal:this._signal})},j2=function(){if(a(this,Po))return;p(this,Po,new AbortController);const t=this.combinedSignal(a(this,Po));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},$2=function(){var t;(t=a(this,Po))==null||t.abort(),p(this,Po,null)},ub=function(){if(a(this,Mo))return;p(this,Mo,new AbortController);const t=this.combinedSignal(a(this,Mo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},U2=function(){var t;(t=a(this,Mo))==null||t.abort(),p(this,Mo,null)},hb=function(){if(a(this,Co))return;p(this,Co,new AbortController);const t=this.combinedSignal(a(this,Co));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},db=function(){var t;(t=a(this,Co))==null||t.abort(),p(this,Co,null)},z2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},_n=function(t){Object.entries(t).some(([i,r])=>a(this,np)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,np),t)}),a(this,Te)===rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,U,ds).call(this,[[yt.HIGHLIGHT_FREE,!0]]))},ds=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},H2=async function(){if(!a(this,Ro)){p(this,Ro,!0);const t=[];for(const e of a(this,Me).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,pe).values())e.enable()}},V2=function(){if(this.unselectAll(),a(this,Ro)){p(this,Ro,!1);for(const t of a(this,Me).values())t.disable();for(const t of a(this,pe).values())t.disable()}},fb=function(t){const e=a(this,Me).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},W2=function(){let t=null;for(t of a(this,kt));return t},jd=function(){if(a(this,pe).size===0)return!0;if(a(this,pe).size===1)for(const t of a(this,pe).values())return t.isEmpty();return!1},pb=function(t){for(const e of a(this,kt))e.unselect();a(this,kt).clear();for(const e of t)e.isEmpty()||(a(this,kt).add(e),e.select());A(this,U,_n).call(this,{hasSelectedEditor:this.hasSelection})},I(pu,"TRANSLATE_SMALL",1),I(pu,"TRANSLATE_BIG",10);let Ma=pu;var Be,Or,ar,Uu,Br,ri,zu,jr,Un,xs,al,$r,Oo,Ar,$d,Lm;const Cn=class Cn{constructor(t){y(this,Ar);y(this,Be,null);y(this,Or,!1);y(this,ar,null);y(this,Uu,null);y(this,Br,null);y(this,ri,null);y(this,zu,!1);y(this,jr,null);y(this,Un,null);y(this,xs,null);y(this,al,null);y(this,$r,!1);p(this,Un,t),p(this,$r,t._uiManager.useNewAltTextFlow),a(Cn,Oo)||p(Cn,Oo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Cn._l10n??(Cn._l10n=t)}async render(){const t=p(this,ar,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=p(this,Uu,document.createElement("span"));t.append(e),a(this,$r)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Cn,Oo).missing),e.setAttribute("data-l10n-id",a(Cn,Oo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,Un)._uiManager._signal;t.addEventListener("contextmenu",ki,{signal:i}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),a(this,Un)._uiManager.editAltText(a(this,Un)),a(this,$r)&&a(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Ar,$d)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(p(this,zu,!0),r(s))},{signal:i}),await A(this,Ar,Lm).call(this),t}finish(){a(this,ar)&&(a(this,ar).focus({focusVisible:a(this,zu)}),p(this,zu,!1))}isEmpty(){return a(this,$r)?a(this,Be)===null:!a(this,Be)&&!a(this,Or)}hasData(){return a(this,$r)?a(this,Be)!==null||!!a(this,xs):this.isEmpty()}get guessedText(){return a(this,xs)}async setGuessedText(t){a(this,Be)===null&&(p(this,xs,t),p(this,al,await Cn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,Ar,Lm).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,$r)||a(this,Be)){(e=a(this,jr))==null||e.remove(),p(this,jr,null);return}if(!a(this,jr)){const i=p(this,jr,document.createElement("div"));i.className="noAltTextBadge",a(this,Un).div.append(i)}a(this,jr).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Be);return!t&&a(this,xs)===e&&(e=a(this,al)),{altText:e,decorative:a(this,Or),guessedText:a(this,xs),textWithDisclaimer:a(this,al)}}get data(){return{altText:a(this,Be),decorative:a(this,Or)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(p(this,xs,i),p(this,al,r)),!(a(this,Be)===t&&a(this,Or)===e)&&(s||(p(this,Be,t),p(this,Or,e)),A(this,Ar,Lm).call(this))}toggle(t=!1){a(this,ar)&&(!t&&a(this,ri)&&(clearTimeout(a(this,ri)),p(this,ri,null)),a(this,ar).disabled=!t)}shown(){a(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Ar,$d)}})}destroy(){var t,e;(t=a(this,ar))==null||t.remove(),p(this,ar,null),p(this,Uu,null),p(this,Br,null),(e=a(this,jr))==null||e.remove(),p(this,jr,null)}};Be=new WeakMap,Or=new WeakMap,ar=new WeakMap,Uu=new WeakMap,Br=new WeakMap,ri=new WeakMap,zu=new WeakMap,jr=new WeakMap,Un=new WeakMap,xs=new WeakMap,al=new WeakMap,$r=new WeakMap,Oo=new WeakMap,Ar=new WeakSet,$d=function(){return a(this,Be)&&"added"||a(this,Be)===null&&this.guessedText&&"review"||"missing"},Lm=async function(){var r,s,o;const t=a(this,ar);if(!t)return;if(a(this,$r)){if(t.classList.toggle("done",!!a(this,Be)),t.setAttribute("data-l10n-id",a(Cn,Oo)[a(this,Ar,$d)]),(r=a(this,Uu))==null||r.setAttribute("data-l10n-id",a(Cn,Oo)[`${a(this,Ar,$d)}-label`]),!a(this,Be)){(s=a(this,Br))==null||s.remove();return}}else{if(!a(this,Be)&&!a(this,Or)){t.classList.remove("done"),(o=a(this,Br))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Br);if(!e){p(this,Br,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Un).id}`;const l=100,c=a(this,Un)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,ri)),p(this,ri,null)},{once:!0}),t.addEventListener("mouseenter",()=>{p(this,ri,setTimeout(()=>{p(this,ri,null),a(this,Br).classList.add("show"),a(this,Un)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,ri)&&(clearTimeout(a(this,ri)),p(this,ri,null)),(u=a(this,Br))==null||u.classList.remove("show")},{signal:c})}a(this,Or)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Be)),e.parentNode||t.append(e);const i=a(this,Un).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},y(Cn,Oo,null),I(Cn,"_l10n",null);let j0=Cn;var Ze,Ui,ll,Wt,sp,cl,lr,ul,hl,dl,op,gb;class am{constructor(t){y(this,op);y(this,Ze,null);y(this,Ui,null);y(this,ll,!1);y(this,Wt,null);y(this,sp,null);y(this,cl,null);y(this,lr,null);y(this,ul,null);y(this,hl,!1);y(this,dl,null);p(this,Wt,t)}renderForToolbar(){const t=p(this,Ui,document.createElement("button"));return t.className="comment",A(this,op,gb).call(this,t,!1)}renderForStandalone(){const t=p(this,Ze,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Wt).commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(a(this,Wt)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=a(this,Wt).commentButtonColor;r&&(i.backgroundColor=r)}return A(this,op,gb).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,Ze)??a(this,Ui))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,Ze))return;const t=a(this,Wt).commentButtonColor;t&&(a(this,Ze).style.backgroundColor=t),a(this,Wt)._uiManager.updatePopupColor(a(this,Wt))}get commentButtonWidth(){var t;return(((t=a(this,Ze))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,Wt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,dl))return a(this,dl);if(!a(this,Ze))return null;const{x:t,y:e,height:i}=a(this,Ze).getBoundingClientRect(),{x:r,y:s,width:o,height:l}=a(this,Wt).parent.boundingClientRect;return[(t-r)/o,(e+i-s)/l]}set commentPopupPositionInLayer(t){p(this,dl,t)}hasDefaultPopupPosition(){return a(this,dl)===null}removeStandaloneCommentButton(){var t;(t=a(this,Ze))==null||t.remove(),p(this,Ze,null)}removeToolbarCommentButton(){var t;(t=a(this,Ui))==null||t.remove(),p(this,Ui,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Ze)&&(a(this,Ze).classList.toggle("selected",t),a(this,Ze).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let i,r;if(e)[i,r]=e;else{[i,r]=a(this,Wt).commentButtonPosition;const{width:h,height:d,x:f,y:g}=a(this,Wt);i=f+i*h,r=g+r*d}const s=a(this,Wt).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=s;a(this,Wt)._uiManager.editComment(a(this,Wt),o+i*c,l+r*u,{...t,parentDimensions:s})}finish(){a(this,Ui)&&(a(this,Ui).focus({focusVisible:a(this,ll)}),p(this,ll,!1))}isDeleted(){return a(this,hl)||a(this,lr)===""}isEmpty(){return a(this,lr)===null}hasBeenEdited(){return this.isDeleted()||a(this,lr)!==a(this,sp)}serialize(){return this.data}get data(){return{text:a(this,lr),richText:a(this,cl),date:a(this,ul),deleted:this.isDeleted()}}set data(t){if(t!==a(this,lr)&&p(this,cl,null),t===null){p(this,lr,""),p(this,hl,!0);return}p(this,lr,t),p(this,ul,new Date),p(this,hl,!1)}setInitialText(t,e=null){p(this,sp,t),this.data=t,p(this,ul,null),p(this,cl,e)}shown(){}destroy(){var t,e;(t=a(this,Ui))==null||t.remove(),p(this,Ui,null),(e=a(this,Ze))==null||e.remove(),p(this,Ze,null),p(this,lr,""),p(this,cl,null),p(this,ul,null),p(this,Wt,null),p(this,ll,!1),p(this,hl,!1)}}Ze=new WeakMap,Ui=new WeakMap,ll=new WeakMap,Wt=new WeakMap,sp=new WeakMap,cl=new WeakMap,lr=new WeakMap,ul=new WeakMap,hl=new WeakMap,dl=new WeakMap,op=new WeakSet,gb=function(t,e){if(!a(this,Wt)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,Wt)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=a(this,Wt)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",ki,{signal:i}),e&&(t.addEventListener("focusin",s=>{a(this,Wt)._focusEventsAllowed=!1,ce(s)},{capture:!0,signal:i}),t.addEventListener("focusout",s=>{a(this,Wt)._focusEventsAllowed=!0,ce(s)},{capture:!0,signal:i})),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),t===a(this,Ui)?this.edit():a(this,Wt).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(p(this,ll,!0),r(s))},{signal:i}),t.addEventListener("pointerenter",()=>{a(this,Wt).toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{a(this,Wt).toggleComment(!1,!1)},{signal:i}),t};var Hu,fl,ap,lp,cp,up,hp,Ss,pl,Es,gl,_s,La,G2,X2,q2;const lx=class lx{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:o=null,signal:l}){y(this,La);y(this,Hu);y(this,fl,!1);y(this,ap,null);y(this,lp);y(this,cp);y(this,up);y(this,hp);y(this,Ss,null);y(this,pl);y(this,Es,null);y(this,gl);y(this,_s,null);p(this,Hu,t),p(this,ap,i),p(this,lp,e),p(this,cp,r),p(this,up,s),p(this,hp,o),p(this,gl,new AbortController),p(this,pl,AbortSignal.any([l,a(this,gl).signal])),t.addEventListener("touchstart",A(this,La,G2).bind(this),{passive:!1,signal:a(this,pl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/_r.pixelRatio}destroy(){var t,e;(t=a(this,gl))==null||t.abort(),p(this,gl,null),(e=a(this,Ss))==null||e.abort(),p(this,Ss,null)}};Hu=new WeakMap,fl=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap,up=new WeakMap,hp=new WeakMap,Ss=new WeakMap,pl=new WeakMap,Es=new WeakMap,gl=new WeakMap,_s=new WeakMap,La=new WeakSet,G2=function(t){var r,s,o;if((r=a(this,lp))!=null&&r.call(this))return;if(t.touches.length===1){if(a(this,Ss))return;const l=p(this,Ss,new AbortController),c=AbortSignal.any([a(this,pl),l.signal]),u=a(this,Hu),h={capture:!0,signal:c,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=a(this,Ss))==null||g.abort(),p(this,Ss,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ce(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,_s)){p(this,_s,new AbortController);const l=AbortSignal.any([a(this,pl),a(this,_s).signal]),c=a(this,Hu),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,La,X2).bind(this),u);const h=A(this,La,q2).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",ce,u),c.addEventListener("pointermove",ce,u),c.addEventListener("pointercancel",ce,u),c.addEventListener("pointerup",ce,u),(s=a(this,cp))==null||s.call(this)}if(ce(t),t.touches.length!==2||(o=a(this,ap))!=null&&o.call(this)){p(this,Es,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),p(this,Es,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},X2=function(t){var E;if(!a(this,Es)||t.touches.length!==2)return;ce(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:s}=e,{screenX:o,screenY:l}=i,c=a(this,Es),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,g=d-u,b=f-h,v=o-r,S=l-s,m=Math.hypot(v,S)||1,w=Math.hypot(g,b)||1;if(!a(this,fl)&&Math.abs(w-m)<=lx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=o,c.touch1Y=l,!a(this,fl)){p(this,fl,!0);return}const x=[(r+o)/2,(s+l)/2];(E=a(this,up))==null||E.call(this,x,w,m)},q2=function(t){var e;t.touches.length>=2||(a(this,_s)&&(a(this,_s).abort(),p(this,_s,null),(e=a(this,hp))==null||e.call(this)),a(this,Es)&&(ce(t),p(this,Es,null),p(this,fl,!1)))};let $f=lx;var ml,cr,ie,jt,Cs,Vu,Bo,dp,Je,yl,Ts,Ur,jo,fp,vl,si,pp,wl,ks,zr,Wu,Gu,zi,bl,gp,ty,it,mb,mp,yb,Fm,Y2,K2,vb,Nm,wb,Q2,Z2,J2,bb,tk,Ab,ek,nk,ik,xb,Ud;const ot=class ot{constructor(t){y(this,it);y(this,ml,null);y(this,cr,null);y(this,ie,null);y(this,jt,null);y(this,Cs,null);y(this,Vu,!1);y(this,Bo,null);y(this,dp,"");y(this,Je,null);y(this,yl,null);y(this,Ts,null);y(this,Ur,null);y(this,jo,null);y(this,fp,"");y(this,vl,!1);y(this,si,null);y(this,pp,!1);y(this,wl,!1);y(this,ks,!1);y(this,zr,null);y(this,Wu,0);y(this,Gu,0);y(this,zi,null);y(this,bl,null);I(this,"isSelected",!1);I(this,"_isCopy",!1);I(this,"_editToolbar",null);I(this,"_initialOptions",Object.create(null));I(this,"_initialData",null);I(this,"_isVisible",!0);I(this,"_uiManager",null);I(this,"_focusEventsAllowed",!0);y(this,gp,!1);y(this,ty,ot._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=ot.prototype._resizeWithKeyboard,e=Ma.TRANSLATE_SMALL,i=Ma.TRANSLATE_BIG;return ct(this,"_resizerKeyboardManager",new Ig([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new JB({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ot._l10n??(ot._l10n=t),ot._l10nResizer||(ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ot._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ot._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ht("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,gp)}set _isDraggable(t){var e;p(this,gp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,ty)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(A(this,it,Ud).call(this),(e=a(this,Ur))==null||e.remove(),p(this,Ur,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,vl)?p(this,vl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/s,this.y=(e+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}translate(t,e){A(this,it,mb).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,si)||p(this,si,[this.x,this.y,this.width,this.height]),A(this,it,mb).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,si)||p(this,si,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,s]}=this;if(this.x+=t/r,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,si)&&(a(this,si)[0]!==this.x||a(this,si)[1]!==this.y)}get _hasBeenResized(){return!!a(this,si)&&(a(this,si)[2]!==this.width||a(this,si)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ot,r=i/t,s=i/e;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:s,y:o,width:l,height:c}=this;if(l*=i,c*=r,s*=i,o*=r,this._mustFixPosition)switch(t){case 0:s=An(s,0,i-l),o=An(o,0,r-c);break;case 90:s=An(s,0,i-c),o=An(o,l,r);break;case 180:s=An(s,l,i),o=An(o,c,r);break;case 270:s=An(s,c,i),o=An(o,0,r-l);break}this.x=s/=i,this.y=o/=r;const[u,h]=this.getBaseTranslation();s+=u,o+=h,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return A(i=ot,mp,yb).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return A(i=ot,mp,yb).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,ie))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,wl))return this._editToolbar;this._editToolbar=new sb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,ie))==null||e.destroy()}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,ie)||(j0.initialize(ot._l10n),p(this,ie,new j0(this)),a(this,ml)&&(a(this,ie).data=a(this,ml),p(this,ml,null))),a(this,ie)}get altTextData(){var t;return(t=a(this,ie))==null?void 0:t.data}set altTextData(t){a(this,ie)&&(a(this,ie).data=t)}get guessedAltText(){var t;return(t=a(this,ie))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,ie))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,ie))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,ie)&&!a(this,ie).isEmpty()}hasAltTextData(){var t;return((t=a(this,ie))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,jt))==null||t.focusButton()}addCommentButton(){return a(this,jt)||p(this,jt,new am(this))}addStandaloneCommentButton(){if(a(this,Cs)){this._uiManager.isEditingMode()&&a(this,Cs).classList.remove("hidden");return}this.hasComment&&(p(this,Cs,a(this,jt).renderForStandalone()),this.div.append(a(this,Cs)))}removeStandaloneCommentButton(){a(this,jt).removeStandaloneCommentButton(),p(this,Cs,null)}hideStandaloneCommentButton(){var t;(t=a(this,Cs))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:r}}=a(this,jt);return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,jt)||p(this,jt,new am(this)),a(this,jt).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(a(this,jt)||p(this,jt,new am(this)),a(this,jt).setInitialText(t,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=a(this,jt))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,jt))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,jt)&&!a(this,jt).isEmpty()&&!a(this,jt).isDeleted()}async editComment(t){a(this,jt)||p(this,jt,new am(this)),a(this,jt).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,jt).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,l=o+s+1,c=r-100,u=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,jt).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,Vu)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,it,Ab).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),F2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,bl)||p(this,bl,new $f({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,it,Q2).bind(this),onPinching:A(this,it,Z2).bind(this),onPinchEnd:A(this,it,J2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(p(this,vl,!0),this._isDraggable){A(this,it,tk).call(this,t);return}A(this,it,bb).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,zr)&&clearTimeout(a(this,zr)),p(this,zr,setTimeout(()=>{var t;p(this,zr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/r,h=e/r,d=this.x*s,f=this.y*o,g=this.width*s,b=this.height*o;switch(i){case 0:return[d+u+l,o-f-h-b+c,d+u+g+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+b+l,o-f+u+g+c];case 180:return[d-u-g+l,o-f+h+c,d-u+l,o-f+h+b+c];case 270:return[d-h-b+l,o-f-u-g+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,s,o]=t,l=s-i,c=o-r;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-r,c,l];case 180:return[s,e-r,l,c];case 270:return[s,e-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,jt))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:r,deleted:s,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:i||h,popupRef:!s,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),p(this,wl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),p(this,wl,!1),!0):!1}isInEditMode(){return a(this,wl)}shouldGetKeyboardEvents(){return a(this,ks)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return e<o&&r>0&&t<s&&i>0}rebuild(){A(this,it,Ab).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,p(r,ml,t.accessibilityData),r._isCopy=t.isCopy||!1;const[s,o]=r.pageDimensions,[l,c,u,h]=r.getRectInCurrentCoords(t.rect,o);return r.x=l/s,r.y=c/o,r.width=u/s,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,jo))==null||t.abort(),p(this,jo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,zr)&&(clearTimeout(a(this,zr)),p(this,zr,null)),A(this,it,Ud).call(this),this.removeEditToolbar(),a(this,zi)){for(const i of a(this,zi).values())clearTimeout(i);p(this,zi,null)}this.parent=null,(e=a(this,bl))==null||e.destroy(),p(this,bl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,it,Y2).call(this),a(this,Je).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,r,s,o]=this.getPDFRect();return[ot._round(i+(s-i)*t),ot._round(r+(o-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,jt).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,jt).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,jt).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,jt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){a(this,jt).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),p(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Je).children;if(!a(this,cr)){p(this,cr,Array.from(e));const o=A(this,it,ek).bind(this),l=A(this,it,nk).bind(this),c=this._uiManager._signal;for(const u of a(this,cr)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",A(this,it,ik).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ot._l10nResizer[h])}}const i=a(this,cr)[0];let r=0;for(const o of e){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(a(this,cr).length/4);if(s!==r){if(s<r)for(let l=0;l<r-s;l++)a(this,Je).append(a(this,Je).firstChild);else if(s>r)for(let l=0;l<s-r;l++)a(this,Je).firstChild.before(a(this,Je).lastChild);let o=0;for(const l of e){const u=a(this,cr)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",ot._l10nResizer[u])}}A(this,it,xb).call(this,0),p(this,ks,!0),a(this,Je).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,ks)&&A(this,it,wb).call(this,a(this,fp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,it,Ud).call(this),this.div.focus()}select(){var t,e,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,ie))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,i,r,s;this.isSelected&&(this.isSelected=!1,(t=a(this,Je))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=a(this,ie))==null||s.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,pp)}set isEditing(t){p(this,pp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,zi)||p(this,zi,new Map);const{action:i}=t;let r=a(this,zi).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,zi).delete(i),a(this,zi).size===0&&p(this,zi,null)},ot._telemetryTimeout),a(this,zi).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),p(this,Vu,!1)}disable(){this.div&&(this.div.tabIndex=-1),p(this,Vu,!0)}updateFakeAnnotationElement(t){if(!a(this,Ur)&&!this.deleted){p(this,Ur,t.addFakeAnnotation(this));return}if(this.deleted){a(this,Ur).remove(),p(this,Ur,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,Ur).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ml=new WeakMap,cr=new WeakMap,ie=new WeakMap,jt=new WeakMap,Cs=new WeakMap,Vu=new WeakMap,Bo=new WeakMap,dp=new WeakMap,Je=new WeakMap,yl=new WeakMap,Ts=new WeakMap,Ur=new WeakMap,jo=new WeakMap,fp=new WeakMap,vl=new WeakMap,si=new WeakMap,pp=new WeakMap,wl=new WeakMap,ks=new WeakMap,zr=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,zi=new WeakMap,bl=new WeakMap,gp=new WeakMap,ty=new WeakMap,it=new WeakSet,mb=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},mp=new WeakSet,yb=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Fm=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},Y2=function(){if(a(this,Je))return;p(this,Je,document.createElement("div")),a(this,Je).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");a(this,Je).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",A(this,it,K2).bind(this,i),{signal:e}),r.addEventListener("contextmenu",ki,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,Je))},K2=function(t,e){var h;e.preventDefault();const{isMac:i}=Xe.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=a(this,ie))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,p(this,yl,[e.screenX,e.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,it,wb).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ce,{passive:!1,signal:o}),window.addEventListener("contextmenu",ki,{signal:o}),p(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=a(this,ie))==null||d.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,it,Nm).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},vb=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Nm=function(){if(!a(this,Ts))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=a(this,Ts);p(this,Ts,null);const s=this.x,o=this.y,l=this.width,c=this.height;s===t&&o===e&&l===i&&c===r||this.addCommands({cmd:A(this,it,vb).bind(this,s,o,l,c),undo:A(this,it,vb).bind(this,t,e,i,r),mustExec:!0})},wb=function(t,e){const[i,r]=this.parentDimensions,s=this.x,o=this.y,l=this.width,c=this.height,u=ot.MIN_SIZE/i,h=ot.MIN_SIZE/r,d=A(this,it,Fm).call(this,this.rotation),f=($,j)=>[d[0]*$+d[2]*j,d[1]*$+d[3]*j],g=A(this,it,Fm).call(this,360-this.rotation),b=($,j)=>[g[0]*$+g[2]*j,g[1]*$+g[3]*j];let v,S,m=!1,w=!1;switch(t){case"topLeft":m=!0,v=($,j)=>[0,0],S=($,j)=>[$,j];break;case"topMiddle":v=($,j)=>[$/2,0],S=($,j)=>[$/2,j];break;case"topRight":m=!0,v=($,j)=>[$,0],S=($,j)=>[0,j];break;case"middleRight":w=!0,v=($,j)=>[$,j/2],S=($,j)=>[0,j/2];break;case"bottomRight":m=!0,v=($,j)=>[$,j],S=($,j)=>[0,0];break;case"bottomMiddle":v=($,j)=>[$/2,j],S=($,j)=>[$/2,0];break;case"bottomLeft":m=!0,v=($,j)=>[0,j],S=($,j)=>[$,0];break;case"middleLeft":w=!0,v=($,j)=>[0,j/2],S=($,j)=>[$,j/2];break}const x=v(l,c),E=S(l,c);let C=f(...E);const T=ot._round(s+C[0]),k=ot._round(o+C[1]);let D=1,M=1,L,F;if(e.fromKeyboard)({deltaX:L,deltaY:F}=e);else{const{screenX:$,screenY:j}=e,[N,V]=a(this,yl);[L,F]=this.screenToPageTranslation($-N,j-V),a(this,yl)[0]=$,a(this,yl)[1]=j}if([L,F]=b(L/i,F/r),m){const $=Math.hypot(l,c);D=M=Math.max(Math.min(Math.hypot(E[0]-x[0]-L,E[1]-x[1]-F)/$,1/l,1/c),u/l,h/c)}else w?D=An(Math.abs(E[0]-x[0]-L),u,1)/l:M=An(Math.abs(E[1]-x[1]-F),h,1)/c;const B=ot._round(l*D),z=ot._round(c*M);C=f(...S(B,z));const H=T-C[0],et=k-C[1];a(this,si)||p(this,si,[this.x,this.y,this.width,this.height]),this.width=B,this.height=z,this.x=H,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Q2=function(){var t;p(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,ie))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Z2=function(t,e,i){let s=.7*(i/e)+1-.7;if(s===1)return;const o=A(this,it,Fm).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,g=this.height,b=ot.MIN_SIZE/c,v=ot.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/g),b/f,v/g);const S=ot._round(f*s),m=ot._round(g*s);if(S===f&&m===g)return;a(this,si)||p(this,si,[h,d,f,g]);const w=l(f/2,g/2),x=ot._round(h+w[0]),E=ot._round(d+w[1]),C=l(S/2,m/2);this.x=x-C[0],this.y=E-C[1],this.width=S,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},J2=function(){var t;(t=a(this,ie))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,it,Nm).call(this)},bb=function(t){const{isMac:e}=Xe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},tk=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:s},l=u=>{r.abort(),p(this,Bo,null),p(this,vl,!1),this._uiManager.endDragSession()||A(this,it,bb).call(this,u),i&&this._onStopDragging()};e&&(p(this,Wu,t.clientX),p(this,Gu,t.clientY),p(this,Bo,t.pointerId),p(this,dp,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Bo)){ce(u);return}const[g,b]=this.screenToPageTranslation(h-a(this,Wu),d-a(this,Gu));p(this,Wu,h),p(this,Gu,d),this._uiManager.dragSelectedEditors(g,b)},o),window.addEventListener("touchmove",ce,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,dp)&&(a(this,bl)||u.isPrimary)&&l(u),ce(u)},o));const c=u=>{if(!a(this,Bo)||a(this,Bo)===u.pointerId){l(u);return}ce(u)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},Ab=function(){if(a(this,jo)||!this.div)return;p(this,jo,new AbortController);const t=this._uiManager.combinedSignal(a(this,jo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ek=function(t){ot._resizerKeyboardManager.exec(this,t)},nk=function(t){var e;a(this,ks)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Je)&&A(this,it,Ud).call(this)},ik=function(t){p(this,fp,a(this,ks)?t:"")},xb=function(t){if(a(this,cr))for(const e of a(this,cr))e.tabIndex=t},Ud=function(){p(this,ks,!1),A(this,it,xb).call(this,-1),A(this,it,Nm).call(this)},y(ot,mp),I(ot,"_l10n",null),I(ot,"_l10nResizer",null),I(ot,"_borderLineWidth",-1),I(ot,"_colorManager",new lb),I(ot,"_zIndex",1),I(ot,"_telemetryTimeout",1e3);let qt=ot;class JB extends qt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const vE=3285377520,Li=4294901760,Pr=65535;class rk{constructor(t){this.h1=t?t&4294967295:vE,this.h2=t?t&4294967295:vE}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let v=0,S=t.length;v<S;v++){const m=t.charCodeAt(v);m<=255?e[i++]=m:(e[i++]=m>>>8,e[i++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,o=new Uint32Array(e.buffer,0,r);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&Pr,b=f&Pr;for(let v=0;v<r;v++)v&1?(l=o[v],l=l*d&Li|l*g&Pr,l=l<<15|l>>>17,l=l*f&Li|l*b&Pr,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[v],c=c*d&Li|c*g&Pr,c=c<<15|c>>>17,c=c*f&Li|c*b&Pr,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,s){case 3:l^=e[r*4+2]<<16;case 2:l^=e[r*4+1]<<8;case 1:l^=e[r*4],l=l*d&Li|l*g&Pr,l=l<<15|l>>>17,l=l*f&Li|l*b&Pr,r&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Li|t*36045&Pr,e=e*4283543511&Li|((e<<16|t>>>16)*2950163797&Li)>>>16,t^=e>>>1,t=t*444984403&Li|t*60499&Pr,e=e*3301882366&Li|((e<<16|t>>>16)*3120437893&Li)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Sb=Object.freeze({map:null,hash:"",transfer:void 0});var Al,xl,Ps,tn,ey,sk;class KA{constructor(){y(this,ey);y(this,Al,!1);y(this,xl,null);y(this,Ps,null);y(this,tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,tn).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,tn).get(t)}remove(t){const e=a(this,tn).get(t);if(e!==void 0&&(e instanceof qt&&a(this,Ps).delete(e.annotationElementId),a(this,tn).delete(t),a(this,tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of a(this,tn).values())if(i instanceof qt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,tn).get(t);let r=!1;if(i!==void 0)for(const[s,o]of Object.entries(e))i[s]!==o&&(r=!0,i[s]=o);else r=!0,a(this,tn).set(t,e);r&&A(this,ey,sk).call(this),e instanceof qt&&((a(this,Ps)||p(this,Ps,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,tn).has(t)}get size(){return a(this,tn).size}resetModified(){a(this,Al)&&(p(this,Al,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ok(this)}get serializable(){if(a(this,tn).size===0)return Sb;const t=new Map,e=new rk,i=[],r=Object.create(null);let s=!1;for(const[o,l]of a(this,tn)){const c=l instanceof qt?l.serialize(!1,r):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Sb}get editorStats(){let t=null;const e=new Map;let i=0,r=0;for(const s of a(this,tn).values()){if(!(s instanceof qt)){s.popup&&(s.popup.deleted?r+=1:i+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(i+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const c=t[l]||(t[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((r>0||i>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:i}),!t)return null;for(const[s,o]of e)t[s]=o.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){p(this,xl,null)}updateEditor(t,e){var r;const i=(r=a(this,Ps))==null?void 0:r.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,Ps))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,xl))return a(this,xl);const t=[];if(a(this,Ps))for(const e of a(this,Ps).values())e.serialize()&&t.push(e.annotationElementId);return p(this,xl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,tn).entries()}}Al=new WeakMap,xl=new WeakMap,Ps=new WeakMap,tn=new WeakMap,ey=new WeakSet,sk=function(){a(this,Al)||(p(this,Al,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yp;class ok extends KA{constructor(e){super();y(this,yp);const{map:i,hash:r,transfer:s}=e.serializable,o=structuredClone(i,s?{transfer:s}:null);p(this,yp,{map:o,hash:r,transfer:s})}get print(){Ht("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,yp)}get modifiedIds(){return ct(this,"modifiedIds",{ids:new Set,hash:""})}}yp=new WeakMap;var Xu;class tj{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){y(this,Xu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Xu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||a(this,Xu).has(t.loadedName))){if(wt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:o}=t,l=new FontFace(r,s,o);this.addNativeFontFace(l);try{await l.load(),a(this,Xu).add(r),i==null||i(t)}catch{st(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Ht("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw st(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ct(this,"isSyncFontLoadingSupported",Dn||Xe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(wt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(E,C){return E.charCodeAt(C)<<24|E.charCodeAt(C+1)<<16|E.charCodeAt(C+2)<<8|E.charCodeAt(C+3)&255}function r(E,C,T,k){const D=E.substring(0,C),M=E.substring(C+T);return D+k+M}let s,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(E,C){if(++u>30){st("Load test font never loaded."),C();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,E,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const b=16,v=1482184792;let S=i(f,b);for(s=0,o=d.length-3;s<o;s+=4)S=S-v+i(d,s)|0;s<d.length&&(S=S-v+i(d+"XXX",s)|0),f=r(f,b,4,UB(S));const m=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(w);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[t.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=E,x.append(C)}this._document.body.append(x),h(d,()=>{x.remove(),e.complete()})}}Xu=new WeakMap;var Lt;class ej{constructor(t,e=null,i,r){y(this,Lt);this.compiledGlyphs=Object.create(null),p(this,Lt,t),this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${x2(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(o){st(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=s}get black(){return a(this,Lt).black}get bold(){return a(this,Lt).bold}get disableFontFace(){return a(this,Lt).disableFontFace??!1}get fontExtraProperties(){return a(this,Lt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Lt).isInvalidPDFjsFont}get isType3Font(){return a(this,Lt).isType3Font}get italic(){return a(this,Lt).italic}get missingFile(){return a(this,Lt).missingFile}get remeasure(){return a(this,Lt).remeasure}get vertical(){return a(this,Lt).vertical}get ascent(){return a(this,Lt).ascent}get defaultWidth(){return a(this,Lt).defaultWidth}get descent(){return a(this,Lt).descent}get bbox(){return a(this,Lt).bbox}get fontMatrix(){return a(this,Lt).fontMatrix}get fallbackName(){return a(this,Lt).fallbackName}get loadedName(){return a(this,Lt).loadedName}get mimetype(){return a(this,Lt).mimetype}get name(){return a(this,Lt).name}get data(){return a(this,Lt).data}clearData(){a(this,Lt).clearData()}get cssFontInfo(){return a(this,Lt).cssFontInfo}get systemFontInfo(){return a(this,Lt).systemFontInfo}get defaultVMetrics(){return a(this,Lt).defaultVMetrics}}Lt=new WeakMap;function nj(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Dn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ij(n){if(Dn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Lg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function lm(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Eb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,rj=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",ak=WB.bind(null,Eb,rj);var Ds,ny;class sj{constructor(){y(this,Ds,new Map);y(this,ny,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,ny).then(()=>{for(const[r]of a(this,Ds))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){st("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}a(this,Ds).set(e,r)}removeEventListener(t,e){const i=a(this,Ds).get(e);i==null||i(),a(this,Ds).delete(e)}terminate(){for(const[,t]of a(this,Ds))t==null||t();a(this,Ds).clear()}}Ds=new WeakMap,ny=new WeakMap;const cm={DATA:1,ERROR:2},Ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wE(){}function jn(n){if(n instanceof lo||n instanceof O0||n instanceof hE||n instanceof Of||n instanceof Gv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ht('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new lo(n.message);case"InvalidPDFException":return new O0(n.message);case"PasswordException":return new hE(n.message,n.code);case"ResponseException":return new Of(n.message,n.status,n.missing);case"UnknownErrorException":return new Gv(n.message,n.details)}return new Gv(n.message,n.toString())}var qu,Zi,lk,ck,uk,Im;class zd{constructor(t,e,i){y(this,Zi);y(this,qu,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",A(this,Zi,lk).bind(this),{signal:a(this,qu).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(t,e,i,r){const s=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:s,data:e,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Ce.PULL,streamId:s,desiredSize:u.desiredSize}),h.promise},cancel:u=>{wt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Ce.CANCEL,streamId:s,reason:jn(u)}),h.promise}},i)}destroy(){var t;(t=a(this,qu))==null||t.abort(),p(this,qu,null)}}qu=new WeakMap,Zi=new WeakSet,lk=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,Zi,uk).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===cm.DATA)r.resolve(t.data);else if(t.callback===cm.ERROR)r.reject(jn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(o){s.postMessage({sourceName:i,targetName:r,callback:cm.DATA,callbackId:t.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:r,callback:cm.ERROR,callbackId:t.callbackId,reason:jn(o)})});return}if(t.streamId){A(this,Zi,ck).call(this,t);return}e(t.data)},ck=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:Ce.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Ce.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){wt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Ce.ERROR,streamId:e,reason:jn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ce.START_COMPLETE,streamId:e,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Ce.START_COMPLETE,streamId:e,reason:jn(u)})})},uk=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,s=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ce.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(jn(t.reason));break;case Ce.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(jn(t.reason));break;case Ce.PULL:if(!l){s.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||wE).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,reason:jn(u)})});break;case Ce.ENQUEUE:if(wt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ce.CLOSE:if(wt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,Zi,Im).call(this,o,e);break;case Ce.ERROR:wt(o,"error should have stream controller"),o.controller.error(jn(t.reason)),A(this,Zi,Im).call(this,o,e);break;case Ce.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(jn(t.reason)),A(this,Zi,Im).call(this,o,e);break;case Ce.CANCEL:if(!l)break;const c=jn(t.reason);Promise.try(l.onCancel||wE,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Ce.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Ce.CANCEL_COMPLETE,streamId:e,reason:jn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Im=async function(t,e){var i,r,s;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(s=t.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[e]};var vp;class hk{constructor({enableHWA:t=!1}){y(this,vp,!1);p(this,vp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,vp)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ht("Abstract method `_createCanvas` called.")}}vp=new WeakMap;class oj extends hk{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class dk{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class bE extends dk{async _fetch(t){const e=await md(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Lg(e)}}class fk{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,s){return"none"}destroy(t=!1){}}var Sl,Yu,Rs,Ms,yn,El,_l,G,pn,Hd,Gc,Om,Xc,pk,_b,qc,Vd,Wd,Cb,Gd;class aj extends fk{constructor({docId:e,ownerDocument:i=globalThis.document}){super();y(this,G);y(this,Sl);y(this,Yu);y(this,Rs);y(this,Ms);y(this,yn);y(this,El);y(this,_l,0);p(this,Ms,e),p(this,yn,i)}addFilter(e){if(!e)return"none";let i=a(this,G,pn).get(e);if(i)return i;const[r,s,o]=A(this,G,Om).call(this,e),l=e.length===1?r:`${r}${s}${o}`;if(i=a(this,G,pn).get(l),i)return a(this,G,pn).set(e,i),i;const c=`g_${a(this,Ms)}_transfer_map_${De(this,_l)._++}`,u=A(this,G,Xc).call(this,c);a(this,G,pn).set(e,u),a(this,G,pn).set(l,u);const h=A(this,G,qc).call(this,c);return A(this,G,Wd).call(this,r,s,o,h),u}addHCMFilter(e,i){var b;const r=`${e}-${i}`,s="base";let o=a(this,G,Hd).get(s);if((o==null?void 0:o.key)===r||(o?((b=o.filter)==null||b.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},a(this,G,Hd).set(s,o)),!e||!i))return o.url;const l=A(this,G,Gd).call(this,e);e=q.makeHexColor(...l);const c=A(this,G,Gd).call(this,i);if(i=q.makeHexColor(...c),a(this,G,Gc).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const S=v/255;u[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,Ms)}_hcm_filter`,f=o.filter=A(this,G,qc).call(this,d);A(this,G,Wd).call(this,h,h,h,f),A(this,G,_b).call(this,f);const g=(v,S)=>{const m=l[v]/255,w=c[v]/255,x=new Array(S+1);for(let E=0;E<=S;E++)x[E]=m+E/S*(w-m);return x.join(",")};return A(this,G,Wd).call(this,g(0,5),g(1,5),g(2,5),f),o.url=A(this,G,Xc).call(this,d),o.url}addAlphaFilter(e){let i=a(this,G,pn).get(e);if(i)return i;const[r]=A(this,G,Om).call(this,[e]),s=`alpha_${r}`;if(i=a(this,G,pn).get(s),i)return a(this,G,pn).set(e,i),i;const o=`g_${a(this,Ms)}_alpha_map_${De(this,_l)._++}`,l=A(this,G,Xc).call(this,o);a(this,G,pn).set(e,l),a(this,G,pn).set(s,l);const c=A(this,G,qc).call(this,o);return A(this,G,Cb).call(this,r,c),l}addLuminosityFilter(e){let i=a(this,G,pn).get(e||"luminosity");if(i)return i;let r,s;if(e?([r]=A(this,G,Om).call(this,[e]),s=`luminosity_${r}`):s="luminosity",i=a(this,G,pn).get(s),i)return a(this,G,pn).set(e,i),i;const o=`g_${a(this,Ms)}_luminosity_map_${De(this,_l)._++}`,l=A(this,G,Xc).call(this,o);a(this,G,pn).set(e,l),a(this,G,pn).set(s,l);const c=A(this,G,qc).call(this,o);return A(this,G,pk).call(this,c),e&&A(this,G,Cb).call(this,r,c),l}addHighlightHCMFilter(e,i,r,s,o){var w;const l=`${i}-${r}-${s}-${o}`;let c=a(this,G,Hd).get(e);if((c==null?void 0:c.key)===l||(c?((w=c.filter)==null||w.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,G,Hd).set(e,c)),!i||!r))return c.url;const[u,h]=[i,r].map(A(this,G,Gd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,b]=[s,o].map(A(this,G,Gd).bind(this));f<d&&([d,f,g,b]=[f,d,b,g]),a(this,G,Gc).style.color="";const v=(x,E,C)=>{const T=new Array(256),k=(f-d)/C,D=x/255,M=(E-x)/(255*C);let L=0;for(let F=0;F<=C;F++){const B=Math.round(d+F*k),z=D+F*M;for(let H=L;H<=B;H++)T[H]=z;L=B+1}for(let F=L;F<256;F++)T[F]=T[L-1];return T.join(",")},S=`g_${a(this,Ms)}_hcm_${e}_filter`,m=c.filter=A(this,G,qc).call(this,S);return A(this,G,_b).call(this,m),A(this,G,Wd).call(this,v(g[0],b[0],5),v(g[1],b[1],5),v(g[2],b[2],5),m),c.url=A(this,G,Xc).call(this,S),c.url}destroy(e=!1){var i,r,s,o;e&&((i=a(this,El))!=null&&i.size)||((r=a(this,Rs))==null||r.parentNode.parentNode.remove(),p(this,Rs,null),(s=a(this,Yu))==null||s.clear(),p(this,Yu,null),(o=a(this,El))==null||o.clear(),p(this,El,null),p(this,_l,0))}}Sl=new WeakMap,Yu=new WeakMap,Rs=new WeakMap,Ms=new WeakMap,yn=new WeakMap,El=new WeakMap,_l=new WeakMap,G=new WeakSet,pn=function(){return a(this,Yu)||p(this,Yu,new Map)},Hd=function(){return a(this,El)||p(this,El,new Map)},Gc=function(){if(!a(this,Rs)){const e=a(this,yn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=a(this,yn).createElementNS(hs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),p(this,Rs,a(this,yn).createElementNS(hs,"defs")),e.append(r),r.append(a(this,Rs)),a(this,yn).body.append(e)}return a(this,Rs)},Om=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,r,s]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=r[u]/255,c[u]=s[u]/255;return[o.join(","),l.join(","),c.join(",")]},Xc=function(e){if(a(this,Sl)===void 0){p(this,Sl,"");const i=a(this,yn).URL;i!==a(this,yn).baseURI&&(Ng(i)?st('#createUrl: ignore "data:"-URL for performance reasons.'):p(this,Sl,WA(i,"")))}return`url(${a(this,Sl)}#${e})`},pk=function(e){const i=a(this,yn).createElementNS(hs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},_b=function(e){const i=a(this,yn).createElementNS(hs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},qc=function(e){const i=a(this,yn).createElementNS(hs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,G,Gc).append(i),i},Vd=function(e,i,r){const s=a(this,yn).createElementNS(hs,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)},Wd=function(e,i,r,s){const o=a(this,yn).createElementNS(hs,"feComponentTransfer");s.append(o),A(this,G,Vd).call(this,o,"feFuncR",e),A(this,G,Vd).call(this,o,"feFuncG",i),A(this,G,Vd).call(this,o,"feFuncB",r)},Cb=function(e,i){const r=a(this,yn).createElementNS(hs,"feComponentTransfer");i.append(r),A(this,G,Vd).call(this,r,"feFuncA",e)},Gd=function(e){return a(this,G,Gc).style.color=e,yd(getComputedStyle(a(this,G,Gc)).getPropertyValue("color"))};class gk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class AE extends gk{async _fetch(t){const e=await md(t,"arraybuffer");return new Uint8Array(e)}}class mk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ht("Abstract method `_fetch` called.")}}class xE extends mk{async _fetch(t){const e=await md(t,"arraybuffer");return new Uint8Array(e)}}Dn&&st("Please use the `legacy` build in Node.js environments.");async function QA(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class lj extends fk{}class cj extends hk{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class uj extends dk{async _fetch(t){return QA(t)}}class hj extends gk{async _fetch(t){return QA(t)}}class dj extends mk{async _fetch(t){return QA(t)}}const Hc="__forcedDependency",{floor:SE,ceil:EE}=Math;function um(n,t,e,i,r,s){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],r),n[t*4+3]=Math.max(n[t*4+3],s)}const Tb=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Ku,$o;class fj{constructor(t,e){y(this,Ku);y(this,$o);p(this,Ku,t),p(this,$o,e)}get length(){return a(this,Ku).length}isEmpty(t){return a(this,Ku)[t]===Tb}minX(t){return a(this,$o)[t*4+0]/256}minY(t){return a(this,$o)[t*4+1]/256}maxX(t){return(a(this,$o)[t*4+2]+1)/256}maxY(t){return(a(this,$o)[t*4+3]+1)/256}}Ku=new WeakMap,$o=new WeakMap;const hm=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};var zn,Hn,Cl,ur,Tl,Ls,Pt,Ft,Fs,Vn,wp,Qu,kl,Pl,Ns,vn,Hr,bp,kb;class pj{constructor(t,e,i=!1){y(this,bp);y(this,zn,{__proto__:null});y(this,Hn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Hc]:[]});y(this,Cl,new Map);y(this,ur,[]);y(this,Tl,[]);y(this,Ls,[[1,0,0,1,0,0]]);y(this,Pt,[-1/0,-1/0,1/0,1/0]);y(this,Ft,new Float64Array([1/0,1/0,-1/0,-1/0]));y(this,Fs,-1);y(this,Vn,new Set);y(this,wp,new Map);y(this,Qu,new Map);y(this,kl);y(this,Pl);y(this,Ns);y(this,vn);y(this,Hr);p(this,kl,t.width),p(this,Pl,t.height),A(this,bp,kb).call(this,e),i&&p(this,Hr,new Map)}growOperationsCount(t){t>=a(this,vn).length&&A(this,bp,kb).call(this,t,a(this,vn))}save(t){return p(this,zn,{__proto__:a(this,zn)}),p(this,Hn,{__proto__:a(this,Hn),transform:{__proto__:a(this,Hn).transform},moveText:{__proto__:a(this,Hn).moveText},sameLineText:{__proto__:a(this,Hn).sameLineText},[Hc]:{__proto__:a(this,Hn)[Hc]}}),p(this,Pt,{__proto__:a(this,Pt)}),a(this,ur).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(a(this,zn));if(e===null)return this;p(this,zn,e),p(this,Hn,Object.getPrototypeOf(a(this,Hn))),p(this,Pt,Object.getPrototypeOf(a(this,Pt)));const i=a(this,ur).pop();return i!==void 0&&((r=hm(a(this,Hr),t))==null||r.dependencies.add(i),a(this,vn)[t]=a(this,vn)[i]),this}recordOpenMarker(t){return a(this,ur).push(t),this}getOpenMarker(){return a(this,ur).length===0?null:a(this,ur).at(-1)}recordCloseMarker(t){var i;const e=a(this,ur).pop();return e!==void 0&&((i=hm(a(this,Hr),t))==null||i.dependencies.add(e),a(this,vn)[t]=a(this,vn)[e]),this}beginMarkedContent(t){return a(this,Tl).push(t),this}endMarkedContent(t){var i;const e=a(this,Tl).pop();return e!==void 0&&((i=hm(a(this,Hr),t))==null||i.dependencies.add(e),a(this,vn)[t]=a(this,vn)[e]),this}pushBaseTransform(t){return a(this,Ls).push(q.multiplyByDOMMatrix(a(this,Ls).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,Ls).length>1&&a(this,Ls).pop(),this}recordSimpleData(t,e){return a(this,zn)[t]=e,this}recordIncrementalData(t,e){return a(this,Hn)[t].push(e),this}resetIncrementalData(t,e){return a(this,Hn)[t].length=0,this}recordNamedData(t,e){return a(this,Cl).set(t,e),this}recordSimpleDataFromNamed(t,e,i){a(this,zn)[t]=a(this,Cl).get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Hc,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,zn)&&this.recordFutureForcedDependency(e,a(this,zn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Vn))this.recordFutureForcedDependency(Hc,t);return this}resetBBox(t){return a(this,Fs)!==t&&(p(this,Fs,t),a(this,Ft)[0]=1/0,a(this,Ft)[1]=1/0,a(this,Ft)[2]=-1/0,a(this,Ft)[3]=-1/0),this}recordClipBox(t,e,i,r,s,o){const l=q.multiplyByDOMMatrix(a(this,Ls).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];q.axialAlignedBoundingBox([i,s,r,o],l,c);const u=q.intersect(a(this,Pt),c);return u?(a(this,Pt)[0]=u[0],a(this,Pt)[1]=u[1],a(this,Pt)[2]=u[2],a(this,Pt)[3]=u[3]):(a(this,Pt)[0]=a(this,Pt)[1]=1/0,a(this,Pt)[2]=a(this,Pt)[3]=-1/0),this}recordBBox(t,e,i,r,s,o){const l=a(this,Pt);if(l[0]===1/0)return this;const c=q.multiplyByDOMMatrix(a(this,Ls).at(-1),e.getTransform());if(l[0]===-1/0)return q.axialAlignedBoundingBox([i,s,r,o],c,a(this,Ft)),this;const u=[1/0,1/0,-1/0,-1/0];return q.axialAlignedBoundingBox([i,s,r,o],c,u),a(this,Ft)[0]=Math.min(a(this,Ft)[0],Math.max(u[0],l[0])),a(this,Ft)[1]=Math.min(a(this,Ft)[1],Math.max(u[1],l[1])),a(this,Ft)[2]=Math.max(a(this,Ft)[2],Math.min(u[2],l[2])),a(this,Ft)[3]=Math.max(a(this,Ft)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(t,e,i,r=1,s=0,o=0,l){const c=i.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Qu).get(i),u!==!1&&(h=[0,0,0,0],q.axialAlignedBoundingBox(c,i.fontMatrix,h),(r!==1||s!==0||o!==0)&&q.scaleMinMax([r,0,0,-r,s,o],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(t);const d=l();return c&&h&&u===void 0&&(u=h[0]<=s-d.actualBoundingBoxLeft&&h[2]>=s+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,Qu).set(i,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,Ft)[0]=Math.max(0,a(this,Pt)[0]),a(this,Ft)[1]=Math.max(0,a(this,Pt)[1]),a(this,Ft)[2]=Math.min(a(this,kl),a(this,Pt)[2]),a(this,Ft)[3]=Math.min(a(this,Pl),a(this,Pt)[3]),this}getSimpleIndex(t){return a(this,zn)[t]}recordDependencies(t,e){const i=a(this,Vn),r=a(this,zn),s=a(this,Hn);for(const o of e)o in a(this,zn)?i.add(r[o]):o in s&&s[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return a(this,Cl).has(e)&&a(this,Vn).add(a(this,Cl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Hc]),a(this,Hr)){const i=hm(a(this,Hr),t),{dependencies:r}=i;a(this,Vn).forEach(r.add,r),a(this,ur).forEach(r.add,r),a(this,Tl).forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(a(this,Fs)===t){const i=SE(a(this,Ft)[0]*256/a(this,kl)),r=SE(a(this,Ft)[1]*256/a(this,Pl)),s=EE(a(this,Ft)[2]*256/a(this,kl)),o=EE(a(this,Ft)[3]*256/a(this,Pl));um(a(this,Ns),t,i,r,s,o);for(const l of a(this,Vn))l!==t&&um(a(this,Ns),l,i,r,s,o);for(const l of a(this,ur))l!==t&&um(a(this,Ns),l,i,r,s,o);for(const l of a(this,Tl))l!==t&&um(a(this,Ns),l,i,r,s,o);e||(a(this,Vn).clear(),p(this,Fs,-1))}return this}recordShowTextOperation(t,e=!1){const i=Array.from(a(this,Vn));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,Fs)===t&&(p(this,Fs,-1),a(this,Pt)[0]=Math.max(a(this,Pt)[0],a(this,Ft)[0]),a(this,Pt)[1]=Math.max(a(this,Pt)[1],a(this,Ft)[1]),a(this,Pt)[2]=Math.min(a(this,Pt)[2],a(this,Ft)[2]),a(this,Pt)[3]=Math.min(a(this,Pt)[3],a(this,Ft)[3]),e||a(this,Vn).clear()),this}_takePendingDependencies(){const t=a(this,Vn);return p(this,Vn,new Set),t}_extractOperation(t){const e=a(this,wp).get(t);return a(this,wp).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Vn).add(e)}take(){return a(this,Qu).clear(),new fj(a(this,vn),a(this,Ns))}takeDebugMetadata(){return a(this,Hr)}}zn=new WeakMap,Hn=new WeakMap,Cl=new WeakMap,ur=new WeakMap,Tl=new WeakMap,Ls=new WeakMap,Pt=new WeakMap,Ft=new WeakMap,Fs=new WeakMap,Vn=new WeakMap,wp=new WeakMap,Qu=new WeakMap,kl=new WeakMap,Pl=new WeakMap,Ns=new WeakMap,vn=new WeakMap,Hr=new WeakMap,bp=new WeakSet,kb=function(t,e){const i=new ArrayBuffer(t*4);p(this,Ns,new Uint8ClampedArray(i)),p(this,vn,new Uint32Array(i)),e&&e.length>0?(a(this,vn).set(e),a(this,vn).fill(Tb,e.length)):a(this,vn).fill(Tb)};var $t,ge,hr,Zu,Ju;const cx=class cx{constructor(t,e,i){y(this,$t);y(this,ge);y(this,hr);y(this,Zu,0);y(this,Ju,0);if(t instanceof cx&&a(t,hr)===!!i)return t;p(this,$t,t),p(this,ge,e),p(this,hr,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(t){return De(this,Ju)._++,a(this,$t).save(a(this,ge)),this}restore(t){return a(this,Ju)>0&&(a(this,$t).restore(a(this,ge)),De(this,Ju)._--),this}recordOpenMarker(t){return De(this,Zu)._++,this}getOpenMarker(){return a(this,Zu)>0?a(this,ge):a(this,$t).getOpenMarker()}recordCloseMarker(t){return De(this,Zu)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,$t).pushBaseTransform(t),this}popBaseTransform(){return a(this,$t).popBaseTransform(),this}recordSimpleData(t,e){return a(this,$t).recordSimpleData(t,a(this,ge)),this}recordIncrementalData(t,e){return a(this,$t).recordIncrementalData(t,a(this,ge)),this}resetIncrementalData(t,e){return a(this,$t).resetIncrementalData(t,a(this,ge)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return a(this,$t).recordSimpleDataFromNamed(t,e,a(this,ge)),this}recordFutureForcedDependency(t,e){return a(this,$t).recordFutureForcedDependency(t,a(this,ge)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,$t).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,$t).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,hr)||a(this,$t).resetBBox(a(this,ge)),this}recordClipBox(t,e,i,r,s,o){return a(this,hr)||a(this,$t).recordClipBox(a(this,ge),e,i,r,s,o),this}recordBBox(t,e,i,r,s,o){return a(this,hr)||a(this,$t).recordBBox(a(this,ge),e,i,r,s,o),this}recordCharacterBBox(t,e,i,r,s,o,l){return a(this,hr)||a(this,$t).recordCharacterBBox(a(this,ge),e,i,r,s,o,l),this}recordFullPageBBox(t){return a(this,hr)||a(this,$t).recordFullPageBBox(a(this,ge)),this}getSimpleIndex(t){return a(this,$t).getSimpleIndex(t)}recordDependencies(t,e){return a(this,$t).recordDependencies(a(this,ge),e),this}recordNamedDependency(t,e){return a(this,$t).recordNamedDependency(a(this,ge),e),this}recordOperation(t){return a(this,$t).recordOperation(a(this,ge),!0),this}recordShowTextOperation(t){return a(this,$t).recordShowTextOperation(a(this,ge),!0),this}bboxToClipBoxDropOperation(t){return a(this,hr)||a(this,$t).bboxToClipBoxDropOperation(a(this,ge),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};$t=new WeakMap,ge=new WeakMap,hr=new WeakMap,Zu=new WeakMap,Ju=new WeakMap;let $0=cx;const Fi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Pb(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),n.clip(r)}class ZA{isModifyingCurrentTransform(){return!1}getPattern(){Ht("Abstract method `getPattern` called.")}}class gj extends ZA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let s;if(r===on.STROKE||r===on.FILL){const o=e.current.getClippedPathBoundingBox(r,ae(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=q.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Pb(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else Pb(t,this._bbox),s=this._createGradient(t);return s}}function Yv(n,t,e,i,r,s,o,l){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=s,s=o,o=f),c[i+1]>c[r+1]&&(f=i,i=r,r=f,f=o,o=l,l=f),c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=s,s=o,o=f);const g=(c[e]+t.offsetX)*t.scaleX,b=(c[e+1]+t.offsetY)*t.scaleY,v=(c[i]+t.offsetX)*t.scaleX,S=(c[i+1]+t.offsetY)*t.scaleY,m=(c[r]+t.offsetX)*t.scaleX,w=(c[r+1]+t.offsetY)*t.scaleY;if(b>=w)return;const x=u[s],E=u[s+1],C=u[s+2],T=u[o],k=u[o+1],D=u[o+2],M=u[l],L=u[l+1],F=u[l+2],B=Math.round(b),z=Math.round(w);let H,et,$,j,N,V,Z,dt;for(let J=B;J<=z;J++){if(J<S){const vt=J<b?0:(b-J)/(b-S);H=g-(g-v)*vt,et=x-(x-T)*vt,$=E-(E-k)*vt,j=C-(C-D)*vt}else{let vt;J>w?vt=1:S===w?vt=0:vt=(S-J)/(S-w),H=v-(v-m)*vt,et=T-(T-M)*vt,$=k-(k-L)*vt,j=D-(D-F)*vt}let at;J<b?at=0:J>w?at=1:at=(b-J)/(b-w),N=g-(g-m)*at,V=x-(x-M)*at,Z=E-(E-L)*at,dt=C-(C-F)*at;const Et=Math.round(Math.min(H,N)),Mt=Math.round(Math.max(H,N));let Bt=d*J+Et*4;for(let vt=Et;vt<=Mt;vt++)at=(H-vt)/(H-N),at<0?at=0:at>1&&(at=1),h[Bt++]=et-(et-V)*at|0,h[Bt++]=$-($-Z)*at|0,h[Bt++]=j-(j-dt)*at|0,h[Bt++]=255}}function mj(n,t,e){const i=t.coords,r=t.colors;let s,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(s=0;s<c;s++){let h=s*l;for(let d=0;d<u;d++,h++)Yv(n,e,i[h],i[h+1],i[h+l],r[h],r[h+1],r[h+l]),Yv(n,e,i[h+l+1],i[h+1],i[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)Yv(n,e,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class yj extends ZA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),g=u/d,b=h/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/b},S=d+2*2,m=f+2*2,w=i.getCanvas("mesh",S,m),x=w.context,E=x.createImageData(d,f);if(e){const T=E.data;for(let k=0,D=T.length;k<D;k+=4)T[k]=e[0],T[k+1]=e[1],T[k+2]=e[2],T[k+3]=255}for(const T of this._figures)mj(E,T,v);return x.putImageData(E,2,2),{canvas:w.canvas,offsetX:l-2*g,offsetY:c-2*b,scaleX:g,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){Pb(t,this._bbox);const s=new Float32Array(2);if(r===on.SHADING)q.singularValueDecompose2dScale(ae(t),s);else if(this.matrix){q.singularValueDecompose2dScale(this.matrix,s);const[l,c]=s;q.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=l,s[1]*=c}else q.singularValueDecompose2dScale(e.baseTransform,s);const o=this._createMeshCanvas(s,r===on.SHADING?null:this._background,e.cachedCanvases);return r!==on.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class vj extends ZA{getPattern(){return"hotpink"}}function wj(n){switch(n[0]){case"RadialAxial":return new gj(n);case"Mesh":return new yj(n);case"Dummy":return new vj}throw new Error(`Unknown IR type: ${n[0]}`)}const _E={COLORED:1,UNCOLORED:2},iy=class iy{constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){var V,Z;const{bbox:i,operatorList:r,paintType:s,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Jy("TilingType: "+o);const d=i[0],f=i[1],g=i[2],b=i[3],v=g-d,S=b-f,m=new Float32Array(2);q.singularValueDecompose2dScale(this.matrix,m);const[w,x]=m;q.singularValueDecompose2dScale(this.baseTransform,m);const E=w*m[0],C=x*m[1];let T=v,k=S,D=!1,M=!1;const L=Math.ceil(u*E),F=Math.ceil(h*C),B=Math.ceil(v*E),z=Math.ceil(S*C);L>=B?T=u:D=!0,F>=z?k=h:M=!0;const H=this.getSizeAndScale(T,this.ctx.canvas.width,E),et=this.getSizeAndScale(k,this.ctx.canvas.height,C),$=t.cachedCanvases.getCanvas("pattern",H.size,et.size),j=$.context,N=c.createCanvasGraphics(j,e);if(N.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(N,s,l),j.translate(-H.scale*d,-et.scale*f),N.transform(0,H.scale,0,0,et.scale,0,0),j.save(),(V=N.dependencyTracker)==null||V.save(),this.clipBbox(N,d,f,g,b),N.baseTransform=ae(N.ctx),N.executeOperatorList(r),N.endDrawing(),(Z=N.dependencyTracker)==null||Z.restore(),j.restore(),D||M){const dt=$.canvas;D&&(T=u),M&&(k=h);const J=this.getSizeAndScale(T,this.ctx.canvas.width,E),at=this.getSizeAndScale(k,this.ctx.canvas.height,C),Et=J.size,Mt=at.size,Bt=t.cachedCanvases.getCanvas("pattern-workaround",Et,Mt),vt=Bt.context,er=D?Math.floor(v/u):0,hn=M?Math.floor(S/h):0;for(let Ct=0;Ct<=er;Ct++)for(let Ye=0;Ye<=hn;Ye++)vt.drawImage(dt,Et*Ct,Mt*Ye,Et,Mt,0,0,Et,Mt);return{canvas:Bt.canvas,scaleX:J.scale,scaleY:at.scale,offsetX:d,offsetY:f}}return{canvas:$.canvas,scaleX:H.scale,scaleY:et.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,i){const r=Math.max(iy.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=r?s=r:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,r,s){const o=r-e,l=s-i;t.ctx.rect(e,i,o,l),q.axialAlignedBoundingBox([e,i,r,s],ae(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,s=t.current;switch(e){case _E.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;r.fillStyle=s.fillColor=o,r.strokeStyle=s.strokeColor=l;break;case _E.UNCOLORED:r.fillStyle=r.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new $B(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,s){let o=i;r!==on.SHADING&&(o=q.transform(o,e.baseTransform),this.matrix&&(o=q.transform(o,this.matrix)));const l=this.createPatternCanvas(e,s);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=t.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};I(iy,"MAX_PATTERN_SIZE",3e3);let Db=iy;function bj({src:n,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const l=Xe.isLittleEndian?4278190080:255,[c,u]=o?[s,l]:[l,s],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let g=0;for(let b=0;b<r;b++){for(const S=t+h;t<S;t++){const m=t<f?n[t]:255;e[g++]=m&128?u:c,e[g++]=m&64?u:c,e[g++]=m&32?u:c,e[g++]=m&16?u:c,e[g++]=m&8?u:c,e[g++]=m&4?u:c,e[g++]=m&2?u:c,e[g++]=m&1?u:c}if(d===0)continue;const v=t<f?n[t++]:255;for(let S=0;S<d;S++)e[g++]=v&1<<7-S?u:c}return{srcPos:t,destPos:g}}const CE=16,TE=100,Aj=15,kE=10,qn=16,Kv=new DOMMatrix,xi=new Float32Array(2),fu=new Float32Array([1/0,1/0,-1/0,-1/0]);function xj(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,r,s,o,l){t.transform(e,i,r,s,o,l),this.__originalTransform(e,i,r,s,o,l)},n.setTransform=function(e,i,r,s,o,l){t.setTransform(e,i,r,s,o,l),this.__originalSetTransform(e,i,r,s,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,r,s,o,l){t.bezierCurveTo(e,i,r,s,o,l),this.__originalBezierCurveTo(e,i,r,s,o,l)},n.rect=function(e,i,r,s){t.rect(e,i,r,s),this.__originalRect(e,i,r,s)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Sj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function dm(n,t,e,i,r,s,o,l,c,u){const[h,d,f,g,b,v]=ae(n);if(d===0&&f===0){const w=o*h+b,x=Math.round(w),E=l*g+v,C=Math.round(E),T=(o+c)*h+b,k=Math.abs(Math.round(T)-x)||1,D=(l+u)*g+v,M=Math.abs(Math.round(D)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),x,C),n.drawImage(t,e,i,r,s,0,0,k,M),n.setTransform(h,d,f,g,b,v),[k,M]}if(h===0&&g===0){const w=l*f+b,x=Math.round(w),E=o*d+v,C=Math.round(E),T=(l+u)*f+b,k=Math.abs(Math.round(T)-x)||1,D=(o+c)*d+v,M=Math.abs(Math.round(D)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,C),n.drawImage(t,e,i,r,s,0,0,M,k),n.setTransform(h,d,f,g,b,v),[M,k]}n.drawImage(t,e,i,r,s,o,l,c,u);const S=Math.hypot(h,d),m=Math.hypot(f,g);return[S*c,m*u]}class PE{constructor(t,e,i){I(this,"alphaIsShape",!1);I(this,"fontSize",0);I(this,"fontSizeScale",1);I(this,"textMatrix",null);I(this,"textMatrixScale",1);I(this,"fontMatrix",nb);I(this,"leading",0);I(this,"x",0);I(this,"y",0);I(this,"lineX",0);I(this,"lineY",0);I(this,"charSpacing",0);I(this,"wordSpacing",0);I(this,"textHScale",1);I(this,"textRenderingMode",Qe.FILL);I(this,"textRise",0);I(this,"fillColor","#000000");I(this,"strokeColor","#000000");I(this,"patternFill",!1);I(this,"patternStroke",!1);I(this,"fillAlpha",1);I(this,"strokeAlpha",1);I(this,"lineWidth",1);I(this,"activeSMask",null);I(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=fu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=on.FILL,e=null){const i=this.minMax.slice();if(t===on.STROKE){e||Ht("Stroke bounding box must include transform."),q.singularValueDecompose2dScale(e,xi);const r=xi[0]*this.lineWidth/2,s=xi[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const t=q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(fu,0)}getClippedPathBoundingBox(t=on.FILL,e=null){return q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function DE(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%qn,s=(e-r)/qn,o=r===0?s:s+1,l=n.createImageData(i,qn);let c=0,u;const h=t.data,d=l.data;let f,g,b,v;if(t.kind===gf.GRAYSCALE_1BPP){const S=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),w=m.length,x=i+7>>3,E=4294967295,C=Xe.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(b=f<s?qn:r,u=0,g=0;g<b;g++){const T=S-c;let k=0;const D=T>x?i:T*8-7,M=D&-8;let L=0,F=0;for(;k<M;k+=8)F=h[c++],m[u++]=F&128?E:C,m[u++]=F&64?E:C,m[u++]=F&32?E:C,m[u++]=F&16?E:C,m[u++]=F&8?E:C,m[u++]=F&4?E:C,m[u++]=F&2?E:C,m[u++]=F&1?E:C;for(;k<D;k++)L===0&&(F=h[c++],L=128),m[u++]=F&L?E:C,L>>=1}for(;u<w;)m[u++]=0;n.putImageData(l,0,f*qn)}}else if(t.kind===gf.RGBA_32BPP){for(g=0,v=i*qn*4,f=0;f<s;f++)d.set(h.subarray(c,c+v)),c+=v,n.putImageData(l,0,g),g+=qn;f<o&&(v=i*r*4,d.set(h.subarray(c,c+v)),n.putImageData(l,0,g))}else if(t.kind===gf.RGB_24BPP)for(b=qn,v=i*b,f=0;f<o;f++){for(f>=s&&(b=r,v=i*b),u=0,g=v;g--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*qn)}else throw new Error(`bad image kind: ${t.kind}`)}function RE(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%qn,s=(e-r)/qn,o=r===0?s:s+1,l=n.createImageData(i,qn);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<s?qn:r;({srcPos:c}=bj({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,d*qn)}}function Td(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function fm(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function ME(n,t){if(t)return!0;q.singularValueDecompose2dScale(n,xi);const e=Math.fround(_r.pixelRatio*co.PDF_TO_CSS_UNITS);return xi[0]<=e&&xi[1]<=e}const Ej=["butt","round","square"],_j=["miter","round","bevel"],Cj={},LE={};var Cr,Rb,Mb,Lb;const ux=class ux{constructor(t,e,i,r,s,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){y(this,Cr);this.ctx=t,this.current=new PE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new Sj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,i=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ae(this.compositeCtx))}this.ctx.save(),fm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ae(this.ctx)}executeOperatorList(t,e,i,r,s){var m;const o=t.argsArray,l=t.fnArray;let c=e||0;const u=o.length;if(u===c)return c;const h=u-c>kE&&typeof i=="function",d=h?Date.now()+Aj:0;let f=0;const g=this.commonObjs,b=this.objs;let v,S;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(!s||s(c))if(v=l[c],S=o[c]??null,v!==ld.dependency)S===null?this[v](c):this[v](c,...S);else for(const w of S){(m=this.dependencyTracker)==null||m.recordNamedData(w,c);const x=w.startsWith("g_")?g:b;if(!x.has(w))return x.get(w,i),c}if(c++,c===u)return c;if(h&&++f>kE){if(Date.now()>d)return i(),c;f=0}}}endDrawing(){A(this,Cr,Rb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,Cr,Mb).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=r,u="prescale1",h,d;for(;s>2&&l>1||o>2&&c>1;){let f=l,g=c;s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/f),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(t,0,0,l,c,0,0,f,g),t=h.canvas,l=f,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t,e){var L,F;const i=this.ctx,{width:r,height:s}=e,o=this.current.fillColor,l=this.current.patternFill,c=ae(i);let u,h,d,f;if((e.bitmap||e.data)&&e.count>1){const B=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(B),u||(u=new Map,this._cachedBitmapsMap.set(B,u));const z=u.get(h);if(z&&!l){const H=Math.round(Math.min(c[0],c[2])+c[4]),et=Math.round(Math.min(c[1],c[3])+c[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(t,Fi.transformAndFill),{canvas:z,offsetX:H,offsetY:et}}d=z}d||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),RE(f.context,e));let g=q.transform(c,[1/r,0,0,-1/s,0,0]);g=q.transform(g,[1,0,0,1,0,-s]);const b=fu.slice();q.axialAlignedBoundingBox([0,0,r,s],g,b);const[v,S,m,w]=b,x=Math.round(m-v)||1,E=Math.round(w-S)||1,C=this.cachedCanvases.getCanvas("fillCanvas",x,E),T=C.context,k=v,D=S;T.translate(-k,-D),T.transform(...g),d||(d=this._scaleImage(f.canvas,kr(T)),d=d.img,u&&l&&u.set(h,d)),T.imageSmoothingEnabled=ME(ae(T),e.interpolate),dm(T,d,0,0,d.width,d.height,0,0,r,s),T.globalCompositeOperation="source-in";const M=q.transform(kr(T),[1,0,0,1,-k,-D]);return T.fillStyle=l?o.getPattern(i,this,M,on.FILL,t):o,T.fillRect(0,0,r,s),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,C.canvas)),(F=this.dependencyTracker)==null||F.recordDependencies(t,Fi.transformAndFill),{canvas:C.canvas,offsetX:Math.round(k),offsetY:Math.round(D)}}setLineWidth(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",t),this.ctx.lineCap=Ej[e]}setLineJoin(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",t),this.ctx.lineJoin=_j[e]}setMiterLimit(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var i,r,s,o,l;for(const[c,u]of e)switch(c){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Td(this.suspendedCtx,o),xj(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Td(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const s=r[0],o=r[1],l=r[2]-s,c=r[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,s,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,s,o,l,c,u,h,d){let f=t.canvas,g=c-h,b=u-d;if(o)if(g<0||b<0||g+i>f.width||b+r>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,r),m=S.context;m.drawImage(f,-g,-b),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,i,r),m.globalCompositeOperation="source-over",f=S.canvas,g=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,b,i,r),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(g,b,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,i,r),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(f,g,b,i,r,c,u,i,r),e.restore()}save(t){var i;this.inSMaskMode&&Td(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(i=this.dependencyTracker)==null||i.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Td(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,s,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,s,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[s]=i;if(!r){s||(s=i[0]=new Path2D),this[e](t,s);return}if(this.dependencyTracker!==null){const o=e===ld.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(t,["transform"])}if(!(s instanceof Path2D)){const o=i[0]=new Path2D;for(let l=0,c=s.length;l<c;)switch(s[l++]){case om.moveTo:o.moveTo(s[l++],s[l++]);break;case om.lineTo:o.lineTo(s[l++],s[l++]);break;case om.curveTo:o.bezierCurveTo(s[l++],s[l++],s[l++],s[l++],s[l++],s[l++]);break;case om.closePath:o.closePath();break;default:st(`Unrecognized drawing path operator: ${s[l-1]}`);break}s=o}q.axialAlignedBoundingBox(r,ae(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){var o;const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const l=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,kr(r),on.STROKE,t),l){const c=new Path2D;c.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,Fi.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(on.STROKE,ae(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){var u,h,d;const r=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=s.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),r.save(),r.fillStyle=s.getPattern(r,this,kr(r),on.FILL,t),f){const g=new Path2D;g.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=g}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(h=this.dependencyTracker)==null||h.recordDependencies(t,Fi.fill),l&&(r.restore(),(d=this.dependencyTracker)==null||d.restore(t)),i&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var i;this.ctx.fill(e),(i=this.dependencyTracker)==null||i.recordDependencies(t,Fi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Cj}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=LE}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,s=i.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of e)h&&r.addPath(h,new DOMMatrix(o).preMultiplySelf(s).translate(l,c).scale(u,-u));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||nb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&st("Invalid font matrix for font "+e),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const o=r.loadedName||"sans-serif",l=((f=r.systemFontInfo)==null?void 0:f.css)||`"${o}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const u=r.italic?"italic":"normal";let h=i;i<CE?h=CE:i>TE&&(h=TE),this.current.fontSizeScale=i/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,i,r,s,o){var m,w,x,E;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&Qe.FILL_STROKE_MASK,g=!!(h&Qe.ADD_TO_PATH_FLAG),b=c.patternFill&&!u.missingFile,v=c.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||g||b||v)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,e)),S&&(u.disableFontFace||b||v)){l.save(),l.translate(i,r),l.scale(d,-d),(m=this.dependencyTracker)==null||m.recordCharacterBBox(t,l,u);let C;if(f===Qe.FILL||f===Qe.FILL_STROKE)if(s){C=l.getTransform(),l.setTransform(...s);const T=A(this,Cr,Lb).call(this,S,C,s);l.fill(T)}else l.fill(S);if(f===Qe.STROKE||f===Qe.FILL_STROKE)if(o){C||(C=l.getTransform()),l.setTransform(...o);const{a:T,b:k,c:D,d:M}=C,L=q.inverseTransform(o),F=q.transform([T,k,D,M,0,0],L);q.singularValueDecompose2dScale(F,xi),l.lineWidth*=Math.max(xi[0],xi[1])/d,l.stroke(A(this,Cr,Lb).call(this,S,C,o))}else l.lineWidth/=d,l.stroke(S);l.restore()}else(f===Qe.FILL||f===Qe.FILL_STROKE)&&(l.fillText(e,i,r),(w=this.dependencyTracker)==null||w.recordCharacterBBox(t,l,u,d,i,r,()=>l.measureText(e))),(f===Qe.STROKE||f===Qe.FILL_STROKE)&&(this.dependencyTracker&&((x=this.dependencyTracker)==null||x.recordCharacterBBox(t,l,u,d,i,r,()=>l.measureText(e)).recordDependencies(t,Fi.stroke)),l.strokeText(e,i,r));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ae(l),x:i,y:r,fontSize:d,path:S}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(t,l,u,d,i,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return ct(this,"isFontSubpixelAAEnabled",i)}showText(t,e){var D,M,L,F;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Fi.showText).resetBBox(t),this.current.textRenderingMode&Qe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),(D=this.dependencyTracker)==null||D.recordShowTextOperation(t);return}const s=i.fontSize;if(s===0){(M=this.dependencyTracker)==null||M.recordOperation(t);return}const o=this.ctx,l=i.fontSizeScale,c=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,d=i.textHScale*h,f=e.length,g=r.vertical,b=g?1:-1,v=r.defaultVMetrics,S=s*i.fontMatrix[0],m=i.textRenderingMode===Qe.FILL&&!r.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),h>0?o.scale(d,-1):o.scale(d,1);let w,x;if(i.patternFill){o.save();const B=i.fillColor.getPattern(o,this,kr(o),on.FILL,t);w=ae(o),o.restore(),o.fillStyle=B}if(i.patternStroke){o.save();const B=i.strokeColor.getPattern(o,this,kr(o),on.STROKE,t);x=ae(o),o.restore(),o.strokeStyle=B}let E=i.lineWidth;const C=i.textMatrixScale;if(C===0||E===0){const B=i.textRenderingMode&Qe.FILL_STROKE_MASK;(B===Qe.STROKE||B===Qe.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=C;if(l!==1&&(o.scale(l,l),E/=l),o.lineWidth=E,r.isInvalidPDFjsFont){const B=[];let z=0;for(const et of e)B.push(et.unicode),z+=et.width;const H=B.join("");if(o.fillText(H,0,0),this.dependencyTracker!==null){const et=o.measureText(H);this.dependencyTracker.recordBBox(t,this.ctx,-et.actualBoundingBoxLeft,et.actualBoundingBoxRight,-et.actualBoundingBoxAscent,et.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=z*S*d,o.restore(),this.compose();return}let T=0,k;for(k=0;k<f;++k){const B=e[k];if(typeof B=="number"){T+=b*B*s/1e3;continue}let z=!1;const H=(B.isSpace?u:0)+c,et=B.fontChar,$=B.accent;let j,N,V=B.width;if(g){const J=B.vmetric||v,at=-(B.vmetric?J[1]:V*.5)*S,Et=J[2]*S;V=J?-J[0]:V,j=at/l,N=(T+Et)/l}else j=T/l,N=0;let Z;if(r.remeasure&&V>0){Z=o.measureText(et);const J=Z.width*1e3/s*l;if(V<J&&this.isFontSubpixelAAEnabled){const at=V/J;z=!0,o.save(),o.scale(at,1),j/=at}else V!==J&&(j+=(V-J)/2e3*s/l)}if(this.contentVisible&&(B.isInFont||r.missingFile)){if(m&&!$)o.fillText(et,j,N),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,o,Z?{bbox:null}:r,s/l,j,N,()=>Z??o.measureText(et));else if(this.paintChar(t,et,j,N,w,x),$){const J=j+s*$.offset.x/l,at=N-s*$.offset.y/l;this.paintChar(t,$.fontChar,J,at,w,x)}}const dt=g?V*S-H*h:V*S+H*h;T+=dt,z&&o.restore()}g?i.y-=T:i.x+=T*d,o.restore(),this.compose(),(F=this.dependencyTracker)==null||F.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,r=this.current,s=r.font,o=r.fontSize,l=r.fontDirection,c=s.vertical?1:-1,u=r.charSpacing,h=r.wordSpacing,d=r.textHScale*l,f=r.fontMatrix||nb,g=e.length,b=r.textRenderingMode===Qe.INVISIBLE;let v,S,m,w;if(b||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(d,l);const x=this.dependencyTracker;for(this.dependencyTracker=x?new $0(x,t):null,v=0;v<g;++v){if(S=e[v],typeof S=="number"){w=c*S*o/1e3,this.ctx.translate(w,0),r.x+=w*d;continue}const E=(S.isSpace?h:0)+u,C=s.charProcOperatorList[S.operatorListId];C?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(C),this.restore()):st(`Type3 character "${S.operatorListId}" is not available.`);const T=[S.width,0];q.applyTransform(T,f),m=T[0]*o+E,i.translate(m,0),r.x+=m*d}i.restore(),x&&(this.dependencyTracker=x)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,s,o,l){var u;const c=new Path2D;c.rect(r,s,o-r,l-s),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,r,o,s,l).recordClipBox(t,this.ctx,r,o,s,l),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const r=this.baseTransform||ae(this.ctx),s={createCanvasGraphics:(o,l)=>new ux(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $0(this.dependencyTracker,l,!0):null)};i=new Db(e,this.ctx,s,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=wj(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){var o;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,kr(i),on.SHADING,t);const s=kr(i);if(s){const{width:l,height:c}=i.canvas,u=fu.slice();q.axialAlignedBoundingBox([0,0,l,c],s,u);const[h,d,f,g]=u;this.ctx.fillRect(h,d,f-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Fi.transform).recordDependencies(t,Fi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ht("Should not call beginInlineImage")}beginImageData(){Ht("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ae(this.ctx),i)){q.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,o,l,c]=i,u=new Path2D;u.rect(s,o,l-s,c-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,s,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var x;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Jy("TODO: Support non-isolated groups."),e.knockout&&st("Knockout groups not supported.");const r=ae(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=fu.slice();q.axialAlignedBoundingBox(e.bbox,ae(i),s);const o=[0,0,i.canvas.width,i.canvas.height];s=q.intersect(s,o)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-l,1),h=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),g=f.context;g.translate(-l,-c),g.transform(...r);let b=new Path2D;const[v,S,m,w]=e.bbox;if(b.rect(v,S,m-v,w-S),e.matrix){const E=new Path2D;E.addPath(b,new DOMMatrix(e.matrix)),b=E}g.clip(b),e.smask&&this.smaskStack.push({canvas:f.canvas,context:g,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),Td(i,g),this.ctx=g,(x=this.dependencyTracker)==null||x.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var s;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ae(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=fu.slice();q.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,r,s,o){if(A(this,Cr,Rb).call(this),fm(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,q.singularValueDecompose2dScale(ae(this.ctx),xi);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(xi[0],0,0,-xi[1],0,c*xi[1]),fm(this.ctx)}else{fm(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],l,c),this.ctx.clip(u)}}this.current=new PE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),A(this,Cr,Mb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var l;if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const r=this.ctx,s=this._createMaskCanvas(t,e),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,s=0,o,l){var d,f,g;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=ae(c);c.transform(i,r,s,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let b=0,v=l.length;b<v;b+=2){const S=q.transform(u,[i,r,s,o,l[b],l[b+1]]);c.drawImage(h.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,S[4],S[4]+h.canvas.width,S[5],S[5]+h.canvas.height)}c.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,l,c;if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,Fi.transformAndFill);for(const u of e){const{data:h,width:d,height:f,transform:g}=u,b=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=b.context;v.save();const S=this.getObject(t,h,u);RE(v,S),v.globalCompositeOperation="source-in",v.fillStyle=s?r.getPattern(v,this,kr(i),on.FILL,t):r,v.fillRect(0,0,d,f),v.restore(),i.save(),i.transform(...g),i.scale(1,-1),dm(i,b.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){st("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,s){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){st("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=s.length;h<d;h+=2)u.push({transform:[i,0,0,r,s[h],s[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",s.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const i=e.width,r=e.height,s=this.ctx;this.save(t);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/i,-1/r);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,r).context;DE(d,e),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,kr(s));s.imageSmoothingEnabled=ME(ae(s),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,s,0,i,-r,0).recordDependencies(t,Fi.imageXObject).recordOperation(t),dm(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){var o,l,c;if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const u=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;DE(f,e),s=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of i)r.save(),r.transform(...u.transform),r.scale(1,-1),dm(r,s,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Fi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){var o,l;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===LE?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(l=this.dependencyTracker)==null||l.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ae(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:s}=this.ctx.getTransform();let o,l;if(i===0&&r===0){const c=Math.abs(e),u=Math.abs(s);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*s-i*r),u=Math.hypot(e,i),h=Math.hypot(r,s);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:r}}=this,[s,o]=this.getScaleForStroking();if(s===o){i.lineWidth=(r||1)*s,i.stroke(t);return}const l=i.getLineDash();e&&i.save(),i.scale(s,o),Kv.a=1/s,Kv.d=1/o;const c=new Path2D;if(c.addPath(t,Kv),l.length>0){const u=Math.max(s,o);i.setLineDash(l.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=r||1,i.stroke(c),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Cr=new WeakSet,Rb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Mb=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Lb=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let Eu=ux;for(const n in ld)Eu.prototype[n]!==void 0&&(Eu.prototype[ld[n]]=Eu.prototype[n]);var th,eh,Ap,nh,Bm;const gu=class gu{constructor(t){y(this,nh);y(this,th);y(this,eh);y(this,Ap);p(this,th,t),p(this,eh,new DataView(a(this,th))),p(this,Ap,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let r=0;for(const u of gu.strings){const h=e.encode(t[u]);i[u]=h,r+=4+h.length}const s=new ArrayBuffer(r),o=new Uint8Array(s),l=new DataView(s);let c=0;for(const u of gu.strings){const h=i[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return wt(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return A(this,nh,Bm).call(this,0)}get fontWeight(){return A(this,nh,Bm).call(this,1)}get italicAngle(){return A(this,nh,Bm).call(this,2)}};th=new WeakMap,eh=new WeakMap,Ap=new WeakMap,nh=new WeakSet,Bm=function(t){wt(t<gu.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=a(this,eh).getUint32(e)+4;const i=a(this,eh).getUint32(e);return a(this,Ap).decode(new Uint8Array(a(this,th),e+4,i))},I(gu,"strings",["fontFamily","fontWeight","italicAngle"]);let U0=gu;var Uo,Vr,Dl,Rl,Xd;const mu=class mu{constructor(t){y(this,Rl);y(this,Uo);y(this,Vr);y(this,Dl);p(this,Uo,t),p(this,Vr,new DataView(a(this,Uo))),p(this,Dl,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let r=0;for(const f of mu.strings){const g=e.encode(t[f]);i[f]=g,r+=4+g.length}r+=4;let s,o,l=1+r;t.style&&(s=e.encode(t.style.style),o=e.encode(t.style.weight),l+=4+s.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,t.guessFallback?1:0),h.setUint32(d,0),d+=4,r=0;for(const f of mu.strings){const g=i[f],b=g.length;r+=4+b,h.setUint32(d,b),u.set(g,d+4),d+=4+b}return h.setUint32(d-r-4,r),t.style&&(h.setUint32(d,s.length),u.set(s,d+4),d+=4+s.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),wt(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,Vr).getUint8(0)!==0}get css(){return A(this,Rl,Xd).call(this,0)}get loadedName(){return A(this,Rl,Xd).call(this,1)}get baseFontName(){return A(this,Rl,Xd).call(this,2)}get src(){return A(this,Rl,Xd).call(this,3)}get style(){let t=1;t+=4+a(this,Vr).getUint32(t);const e=a(this,Vr).getUint32(t),i=a(this,Dl).decode(new Uint8Array(a(this,Uo),t+4,e));t+=4+e;const r=a(this,Vr).getUint32(t),s=a(this,Dl).decode(new Uint8Array(a(this,Uo),t+4,r));return{style:i,weight:s}}};Uo=new WeakMap,Vr=new WeakMap,Dl=new WeakMap,Rl=new WeakSet,Xd=function(t){wt(t<mu.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=a(this,Vr).getUint32(e)+4;const i=a(this,Vr).getUint32(e);return a(this,Dl).decode(new Uint8Array(a(this,Uo),e+4,i))},I(mu,"strings",["css","loadedName","baseFontName","src"]);let z0=mu;var ih,rh,sh,oh,oi,Wr,xp,Nt,ve,rr,jm,qd;const lt=class lt{constructor({data:t,extra:e}){y(this,ve);y(this,Wr);y(this,xp);y(this,Nt);p(this,Wr,t),p(this,xp,new TextDecoder),p(this,Nt,new DataView(a(this,Wr))),e&&Object.assign(this,e)}get black(){return A(this,ve,rr).call(this,0)}get bold(){return A(this,ve,rr).call(this,1)}get disableFontFace(){return A(this,ve,rr).call(this,2)}get fontExtraProperties(){return A(this,ve,rr).call(this,3)}get isInvalidPDFjsFont(){return A(this,ve,rr).call(this,4)}get isType3Font(){return A(this,ve,rr).call(this,5)}get italic(){return A(this,ve,rr).call(this,6)}get missingFile(){return A(this,ve,rr).call(this,7)}get remeasure(){return A(this,ve,rr).call(this,8)}get vertical(){return A(this,ve,rr).call(this,9)}get ascent(){return A(this,ve,jm).call(this,0)}get defaultWidth(){return A(this,ve,jm).call(this,1)}get descent(){return A(this,ve,jm).call(this,2)}get bbox(){let t=a(lt,rh);if(a(this,Nt).getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<4;r++)i.push(a(this,Nt).getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=a(lt,sh);if(a(this,Nt).getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<6;r++)i.push(a(this,Nt).getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=a(lt,oh);if(a(this,Nt).getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<3;r++)i.push(a(this,Nt).getInt16(t,!0)),t+=2;return i}get fallbackName(){return A(this,ve,qd).call(this,0)}get loadedName(){return A(this,ve,qd).call(this,1)}get mimetype(){return A(this,ve,qd).call(this,2)}get name(){return A(this,ve,qd).call(this,3)}get data(){let t=a(lt,oi);const e=a(this,Nt).getUint32(t);t+=4+e;const i=a(this,Nt).getUint32(t);t+=4+i;const r=a(this,Nt).getUint32(t);t+=4+r;const s=a(this,Nt).getUint32(t);if(s!==0)return new Uint8Array(a(this,Wr),t+4,s)}clearData(){let t=a(lt,oi);const e=a(this,Nt).getUint32(t);t+=4+e;const i=a(this,Nt).getUint32(t);t+=4+i;const r=a(this,Nt).getUint32(t);t+=4+r;const s=a(this,Nt).getUint32(t);new Uint8Array(a(this,Wr),t+4,s).fill(0),a(this,Nt).setUint32(t,0)}get cssFontInfo(){let t=a(lt,oi);const e=a(this,Nt).getUint32(t);t+=4+e;const i=a(this,Nt).getUint32(t);t+=4+i;const r=a(this,Nt).getUint32(t);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(a(this,Wr),t+4,r)),new U0(s.buffer)}get systemFontInfo(){let t=a(lt,oi);const e=a(this,Nt).getUint32(t);t+=4+e;const i=a(this,Nt).getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(a(this,Wr),t+4,i)),new z0(r.buffer)}static write(t){const e=t.systemFontInfo?z0.write(t.systemFontInfo):null,i=t.cssFontInfo?U0.write(t.cssFontInfo):null,r=new TextEncoder,s={};let o=0;for(const v of lt.strings)s[v]=r.encode(t[v]),o+=4+s[v].length;const l=a(lt,oi)+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=lt.bools.length;let g=0,b=0;for(let v=0;v<f;v++){const S=t[lt.bools[v]];g|=(S===void 0?0:S?2:1)<<b,b+=2,(b===8||v===f-1)&&(h.setUint8(d++,g),g=0,b=0)}wt(d===a(lt,ih),"FontInfo.write: Boolean properties offset mismatch");for(const v of lt.numbers)h.setFloat64(d,t[v]),d+=8;if(wt(d===a(lt,rh),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(d++,4);for(const v of t.bbox)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(wt(d===a(lt,sh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(d++,6);for(const v of t.fontMatrix)h.setFloat64(d,v,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(wt(d===a(lt,oh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(d++,1);for(const v of t.defaultVMetrics)h.setInt16(d,v,!0),d+=2}else h.setUint8(d++,0),d+=3*2;wt(d===a(lt,oi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(lt,oi),0),d+=4;for(const v of lt.strings){const S=s[v],m=S.length;h.setUint32(d,m),u.set(S,d+4),d+=4+m}if(h.setUint32(a(lt,oi),d-a(lt,oi)-4),!e)h.setUint32(d,0),d+=4;else{const v=e.byteLength;h.setUint32(d,v),wt(d+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),d+4),d+=4+v}if(!i)h.setUint32(d,0),d+=4;else{const v=i.byteLength;h.setUint32(d,v),wt(d+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),d+4),d+=4+v}return t.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,t.data.length),u.set(t.data,d+4),d+=4+t.data.length),wt(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};ih=new WeakMap,rh=new WeakMap,sh=new WeakMap,oh=new WeakMap,oi=new WeakMap,Wr=new WeakMap,xp=new WeakMap,Nt=new WeakMap,ve=new WeakSet,rr=function(t){wt(t<lt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,r=a(this,Nt).getUint8(e)>>i&3;return r===0?void 0:r===2},jm=function(t){return wt(t<lt.numbers.length,"Invalid number index"),a(this,Nt).getFloat64(a(lt,ih)+t*8)},qd=function(t){wt(t<lt.strings.length,"Invalid string index");let e=a(lt,oi)+4;for(let s=0;s<t;s++)e+=a(this,Nt).getUint32(e)+4;const i=a(this,Nt).getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(a(this,Wr),e+4,i)),a(this,xp).decode(r)},I(lt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),I(lt,"numbers",["ascent","defaultWidth","descent"]),I(lt,"strings",["fallbackName","loadedName","mimetype","name"]),y(lt,ih,Math.ceil(lt.bools.length*2/8)),y(lt,rh,a(lt,ih)+lt.numbers.length*8),y(lt,sh,a(lt,rh)+1+2*4),y(lt,oh,a(lt,sh)+1+8*6),y(lt,oi,a(lt,oh)+1+2*3);let Fb=lt;var Sp,Ep;class qi{static get workerPort(){return a(this,Sp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");p(this,Sp,t)}static get workerSrc(){return a(this,Ep)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");p(this,Ep,t)}}Sp=new WeakMap,Ep=new WeakMap,y(qi,Sp,null),y(qi,Ep,"");var ah,_p;class Tj{constructor({parsedData:t,rawData:e}){y(this,ah);y(this,_p);p(this,ah,t),p(this,_p,e)}getRaw(){return a(this,_p)}get(t){return a(this,ah).get(t)??null}[Symbol.iterator](){return a(this,ah).entries()}}ah=new WeakMap,_p=new WeakMap;const Yc=Symbol("INTERNAL");var Cp,Tp,kp,lh;class kj{constructor(t,{name:e,intent:i,usage:r,rbGroups:s}){y(this,Cp,!1);y(this,Tp,!1);y(this,kp,!1);y(this,lh,!0);p(this,Cp,!!(t&bi.DISPLAY)),p(this,Tp,!!(t&bi.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(a(this,kp))return a(this,lh);if(!a(this,lh))return!1;const{print:t,view:e}=this.usage;return a(this,Cp)?(e==null?void 0:e.viewState)!=="OFF":a(this,Tp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Yc&&Ht("Internal method `_setVisible` called."),p(this,kp,i),p(this,lh,e)}}Cp=new WeakMap,Tp=new WeakMap,kp=new WeakMap,lh=new WeakMap;var zo,It,ch,uh,Pp,Nb;class Pj{constructor(t,e=bi.DISPLAY){y(this,Pp);y(this,zo,null);y(this,It,new Map);y(this,ch,null);y(this,uh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,p(this,uh,t.order);for(const i of t.groups)a(this,It).set(i.id,new kj(e,i));if(t.baseState==="OFF")for(const i of a(this,It).values())i._setVisible(Yc,!1);for(const i of t.on)a(this,It).get(i)._setVisible(Yc,!0);for(const i of t.off)a(this,It).get(i)._setVisible(Yc,!1);p(this,ch,this.getHash())}}isVisible(t){if(a(this,It).size===0)return!0;if(!t)return Jy("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,It).has(t.id)?a(this,It).get(t.id).visible:(st(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Pp,Nb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,It).has(e))return st(`Optional content group not found: ${e}`),!0;if(a(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,It).has(e))return st(`Optional content group not found: ${e}`),!0;if(!a(this,It).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,It).has(e))return st(`Optional content group not found: ${e}`),!0;if(!a(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,It).has(e))return st(`Optional content group not found: ${e}`),!0;if(a(this,It).get(e).visible)return!1}return!0}return st(`Unknown optional content policy ${t.policy}.`),!0}return st(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var s;const r=a(this,It).get(t);if(!r){st(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&((s=a(this,It).get(l))==null||s._setVisible(Yc,!1,!0));r._setVisible(Yc,!!e,!0),p(this,zo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=a(this,It).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!s.visible,e);break}}p(this,zo,null)}get hasInitialVisibility(){return a(this,ch)===null||this.getHash()===a(this,ch)}getOrder(){return a(this,It).size?a(this,uh)?a(this,uh).slice():[...a(this,It).keys()]:null}getGroup(t){return a(this,It).get(t)||null}getHash(){if(a(this,zo)!==null)return a(this,zo);const t=new rk;for(const[e,i]of a(this,It))t.update(`${e}:${i.visible}`);return p(this,zo,t.hexdigest())}[Symbol.iterator](){return a(this,It).entries()}}zo=new WeakMap,It=new WeakMap,ch=new WeakMap,uh=new WeakMap,Pp=new WeakSet,Nb=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const s=t[r];let o;if(Array.isArray(s))o=A(this,Pp,Nb).call(this,s);else if(a(this,It).has(s))o=a(this,It).get(s).visible;else return st(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class Dj{constructor(t,{disableRange:e=!1,disableStream:i=!1}){wt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});wt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,s;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Rj(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Mj(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Rj{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=ev(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Mj{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Lj(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),s(h)}if(e=o(n),e){const h=u(e);return s(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=l(e);return h=u(h),s(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=Lg(d);d=f.decode(g),t=!1}catch{}}return d}function s(h){return t&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),t&&(h=r("iso-8859-1",h))),h}function o(h){const d=[];let f;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,v,S,m]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[S,m]}const b=[];for(let v=0;v<d.length&&v in d;++v){let[S,m]=d[v];m=l(m),S&&(m=unescape(m),v===0&&(m=c(m))),b.push(m)}return b.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),b=h.slice(d+1).replace(/^[^']*'/,"");return r(f,b)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,b){if(g==="q"||g==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),r(f,b);try{b=atob(b)}catch{}return r(f,b)})}return""}function yk(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function nv(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function vk({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function wk(n){const t=n.get("Content-Disposition");if(t){let e=Lj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(ev(e))return e}return null}function Og(n,t){return new Of(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function bk(n){return n===200||n===206}function Ak(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function xk(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(st(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Fj{constructor(t){I(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=yk(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Nj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ij(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Nj{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,Ak(i,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=nv(s.url),!bk(s.status))throw Og(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:l,suggestedLength:c}=vk({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=wk(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new lo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:xk(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Ij{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const o=r.url;fetch(o,Ak(s,this._withCredentials,this._abortController)).then(l=>{const c=nv(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!bk(l.status))throw Og(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:xk(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Qv=200,Zv=206;function Oj(n){const t=n.response;return typeof t!="string"?t:Lg(t).buffer}class Bj{constructor({url:t,httpHeaders:e,withCredentials:i}){I(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=yk(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Zv):r.expectedStatus=Qv,e.responseType="arraybuffer",wt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||Qv;if(!(s===Qv&&i.expectedStatus===Zv)&&s!==i.expectedStatus){i.onError(r.status);return}const l=Oj(r);if(s===Zv){const c=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:l}):(st('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class jj{constructor(t){this._source=t,this._manager=new Bj(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $j(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Uj(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class $j{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=nv(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=vk({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=wk(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Og(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Uj{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=nv((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Og(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zj=/^[a-z][a-z0-9\-+.]+:/i;function Hj(n){if(zj.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class Vj{constructor(t){this.source=t,this.url=Hj(t.url),wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Wj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Gj(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Wj{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Og(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new lo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Gj{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kd=Symbol("INITIAL_DATA");var ai,Dp,Ib;class Sk{constructor(){y(this,Dp);y(this,ai,Object.create(null))}get(t,e=null){if(e){const r=A(this,Dp,Ib).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=a(this,ai)[t];if(!i||i.data===kd)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,ai)[t];return!!e&&e.data!==kd}delete(t){const e=a(this,ai)[t];return!e||e.data===kd?!1:(delete a(this,ai)[t],!0)}resolve(t,e=null){const i=A(this,Dp,Ib).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,ai)){const{data:i}=a(this,ai)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}p(this,ai,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,ai)){const{data:e}=a(this,ai)[t];e!==kd&&(yield[t,e])}}}ai=new WeakMap,Dp=new WeakSet,Ib=function(t){var e;return(e=a(this,ai))[t]||(e[t]={...Promise.withResolvers(),data:kd})};const Xj=1e5,FE=30;var XE,Ho,Wn,Rp,Mp,Ml,Is,Lp,Fp,Ll,hh,dh,Vo,fh,Np,ph,Fl,Ip,Op,ye,gh,Nl,Bp,Wo,mh,ho,Ek,_k,Ob,Ci,$m,Bb,Ck,Tk;let Uf=(ye=class{constructor({textContentSource:t,container:e,viewport:i}){y(this,ho);y(this,Ho,Promise.withResolvers());y(this,Wn,null);y(this,Rp,!1);y(this,Mp,!!((XE=globalThis.FontInspector)!=null&&XE.enabled));y(this,Ml,null);y(this,Is,null);y(this,Lp,0);y(this,Fp,0);y(this,Ll,null);y(this,hh,null);y(this,dh,0);y(this,Vo,0);y(this,fh,Object.create(null));y(this,Np,[]);y(this,ph,null);y(this,Fl,[]);y(this,Ip,new WeakMap);y(this,Op,null);var c;if(t instanceof ReadableStream)p(this,ph,t);else if(typeof t=="object")p(this,ph,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');p(this,Wn,p(this,hh,e)),p(this,Vo,i.scale*_r.pixelRatio),p(this,dh,i.rotation),p(this,Is,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:l}=i.rawDims;p(this,Op,[1,0,0,-1,-o,l+s]),p(this,Fp,r),p(this,Lp,s),A(c=ye,Ci,Ck).call(c),Ra(e,i),a(this,Ho).promise.finally(()=>{a(ye,mh).delete(this),p(this,Is,null),p(this,fh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Xe.platform;return ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Ll).read().then(({value:e,done:i})=>{if(i){a(this,Ho).resolve();return}a(this,Ml)??p(this,Ml,e.lang),Object.assign(a(this,fh),e.styles),A(this,ho,Ek).call(this,e.items),t()},a(this,Ho).reject)};return p(this,Ll,a(this,ph).getReader()),a(ye,mh).add(this),t(),a(this,Ho).promise}update({viewport:t,onBefore:e=null}){var s;const i=t.scale*_r.pixelRatio,r=t.rotation;if(r!==a(this,dh)&&(e==null||e(),p(this,dh,r),Ra(a(this,hh),{rotation:r})),i!==a(this,Vo)){e==null||e(),p(this,Vo,i);const o={div:null,properties:null,ctx:A(s=ye,Ci,$m).call(s,a(this,Ml))};for(const l of a(this,Fl))o.properties=a(this,Ip).get(l),o.div=l,A(this,ho,Ob).call(this,o)}}cancel(){var e;const t=new lo("TextLayer task cancelled.");(e=a(this,Ll))==null||e.cancel(t).catch(()=>{}),p(this,Ll,null),a(this,Ho).reject(t)}get textDivs(){return a(this,Fl)}get textContentItemsStr(){return a(this,Np)}static cleanup(){if(!(a(this,mh).size>0)){a(this,gh).clear();for(const{canvas:t}of a(this,Nl).values())t.remove();a(this,Nl).clear()}}},Ho=new WeakMap,Wn=new WeakMap,Rp=new WeakMap,Mp=new WeakMap,Ml=new WeakMap,Is=new WeakMap,Lp=new WeakMap,Fp=new WeakMap,Ll=new WeakMap,hh=new WeakMap,dh=new WeakMap,Vo=new WeakMap,fh=new WeakMap,Np=new WeakMap,ph=new WeakMap,Fl=new WeakMap,Ip=new WeakMap,Op=new WeakMap,gh=new WeakMap,Nl=new WeakMap,Bp=new WeakMap,Wo=new WeakMap,mh=new WeakMap,ho=new WeakSet,Ek=function(t){var r,s;if(a(this,Rp))return;(s=a(this,Is)).ctx??(s.ctx=A(r=ye,Ci,$m).call(r,a(this,Ml)));const e=a(this,Fl),i=a(this,Np);for(const o of t){if(e.length>Xj){st("Ignoring additional textDivs for performance reasons."),p(this,Rp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Wn);p(this,Wn,document.createElement("span")),a(this,Wn).classList.add("markedContent"),o.id&&a(this,Wn).setAttribute("id",`${o.id}`),l.append(a(this,Wn))}else o.type==="endMarkedContent"&&p(this,Wn,a(this,Wn).parentNode);continue}i.push(o.str),A(this,ho,_k).call(this,o)}},_k=function(t){var v;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Fl).push(e);const r=q.transform(a(this,Op),t.transform);let s=Math.atan2(r[1],r[0]);const o=a(this,fh)[t.fontName];o.vertical&&(s+=Math.PI/2);let l=a(this,Mp)&&o.fontSubstitution||o.fontFamily;l=ye.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),u=c*A(v=ye,Ci,Tk).call(v,l,o,a(this,Ml));let h,d;s===0?(h=r[4],d=r[5]-u):(h=r[4]+u*Math.sin(s),d=r[5]-u*Math.cos(s));const f="calc(var(--total-scale-factor) *",g=e.style;a(this,Wn)===a(this,hh)?(g.left=`${(100*h/a(this,Fp)).toFixed(2)}%`,g.top=`${(100*d/a(this,Lp)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(a(ye,Wo)*c).toFixed(2)}px)`,g.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Mp)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);S!==m&&Math.max(S,m)/Math.min(S,m)>1.5&&(b=!0)}if(b&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,Ip).set(e,i),a(this,Is).div=e,a(this,Is).properties=i,A(this,ho,Ob).call(this,a(this,Is)),i.hasText&&a(this,Wn).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),a(this,Wn).append(S)}},Ob=function(t){var l;const{div:e,properties:i,ctx:r}=t,{style:s}=e;let o="";if(a(ye,Wo)>1&&(o=`scale(${1/a(ye,Wo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=s,{canvasWidth:u,fontSize:h}=i;A(l=ye,Ci,Bb).call(l,r,h*a(this,Vo),c);const{width:d}=r.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,Vo)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(s.transform=o)},Ci=new WeakSet,$m=function(t=null){let e=a(this,Nl).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Nl).set(t,e),a(this,Bp).set(e,{size:0,family:""})}return e},Bb=function(t,e,i){const r=a(this,Bp).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},Ck=function(){if(a(this,Wo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),p(this,Wo,t.getBoundingClientRect().height),t.remove()},Tk=function(t,e,i){const r=a(this,gh).get(t);if(r)return r;const s=A(this,Ci,$m).call(this,i);s.canvas.width=s.canvas.height=FE,A(this,Ci,Bb).call(this,s,FE,t);const o=s.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return l?u=l/(l+c):(Xe.platform.isFirefox&&st("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),a(this,gh).set(t,u),u},y(ye,Ci),y(ye,gh,new Map),y(ye,Nl,new Map),y(ye,Bp,new WeakMap),y(ye,Wo,null),y(ye,mh,new Set),ye);const qj=100;function JA(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new jb,{docId:e}=t,i=n.url?nj(n.url):null,r=n.data?ij(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof tx?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof cd?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Ng(n.docBaseUrl)?n.docBaseUrl:null,g=lm(n.cMapUrl),b=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Dn?uj:bE),S=lm(n.iccUrl),m=lm(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Dn?hj:AE),x=lm(n.wasmUrl),E=n.WasmFactory||(Dn?dj:xE),C=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Dn,M=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Dn&&(Xe.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:Dn,B=n.fontExtraProperties===!0,z=n.enableXfa===!0,H=n.ownerDocument||globalThis.document,et=n.disableRange===!0,$=n.disableStream===!0,j=n.disableAutoFetch===!0,N=n.pdfBug===!0,V=n.CanvasFactory||(Dn?cj:oj),Z=n.FilterFactory||(Dn?lj:aj),dt=n.enableHWA===!0,J=n.useWasm!==!1,at=c?c.length:n.length??NaN,Et=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Dn&&!F,Mt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===bE&&w===AE&&E===xE&&g&&m&&x&&Id(g,document.baseURI)&&Id(m,document.baseURI)&&Id(x,document.baseURI)),Bt=null;OB(d);const vt={canvasFactory:new V({ownerDocument:H,enableHWA:dt}),filterFactory:new Z({docId:e,ownerDocument:H}),cMapReaderFactory:Mt?null:new v({baseUrl:g,isCompressed:b}),standardFontDataFactory:Mt?null:new w({baseUrl:m}),wasmFactory:Mt?null:new E({baseUrl:x})};h||(h=cd.create({verbosity:d,port:qi.workerPort}),t._worker=h);const er={docId:e,apiVersion:"5.4.296",data:r,password:l,disableAutoFetch:j,rangeChunkSize:u,length:at,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:C,isEvalSupported:k,isOffscreenCanvasSupported:D,isImageDecoderSupported:M,canvasMaxAreaInBytes:L,fontExtraProperties:B,useSystemFonts:Et,useWasm:J,useWorkerFetch:Mt,cMapUrl:g,iccUrl:S,standardFontDataUrl:m,wasmUrl:x}},hn={ownerDocument:H,pdfBug:N,styleElement:Bt,loadingParams:{disableAutoFetch:j,enableXfa:z}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ct=h.messageHandler.sendWithPromise("GetDocRequest",er,r?[r.buffer]:null);let Ye;if(c)Ye=new Dj(c,{disableRange:et,disableStream:$});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const nr=Id(i)?Fj:Dn?Vj:jj;Ye=new nr({url:i,length:at,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:et,disableStream:$})}return Ct.then(nr=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const bt=new zd(e,nr,h.port),Vt=new Qj(bt,t,Ye,hn,vt,dt);t._transport=Vt,bt.send("Ready",null)})}).catch(t._capability.reject),t}var ry;const sy=class sy{constructor(){I(this,"_capability",Promise.withResolvers());I(this,"_transport",null);I(this,"_worker",null);I(this,"docId",`d${De(sy,ry)._++}`);I(this,"destroyed",!1);I(this,"onPassword",null);I(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};ry=new WeakMap,y(sy,ry,0);let jb=sy;var Il,jp,$p,Up,zp,qE;let tx=(qE=class{constructor(t,e,i=!1,r=null){y(this,Il,Promise.withResolvers());y(this,jp,[]);y(this,$p,[]);y(this,Up,[]);y(this,zp,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){a(this,zp).push(t)}addProgressListener(t){a(this,Up).push(t)}addProgressiveReadListener(t){a(this,$p).push(t)}addProgressiveDoneListener(t){a(this,jp).push(t)}onDataRange(t,e){for(const i of a(this,zp))i(t,e)}onDataProgress(t,e){a(this,Il).promise.then(()=>{for(const i of a(this,Up))i(t,e)})}onDataProgressiveRead(t){a(this,Il).promise.then(()=>{for(const e of a(this,$p))e(t)})}onDataProgressiveDone(){a(this,Il).promise.then(()=>{for(const t of a(this,jp))t()})}transportReady(){a(this,Il).resolve()}requestDataRange(t,e){Ht("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Il=new WeakMap,jp=new WeakMap,$p=new WeakMap,Up=new WeakMap,zp=new WeakMap,qE);class Yj{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Os,Ol,Yd;class Kj{constructor(t,e,i,r=!1){y(this,Ol);y(this,Os,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new fE:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Sk,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Fg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:s=is.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:g=!1,operationsFilter:b=null}){var M,L,F;(M=this._stats)==null||M.time("Overall");const v=this._transport.getRenderingIntent(r,s,d,f),{renderingIntent:S,cacheKey:m}=v;p(this,Os,!1),c||(c=this._transport.getOptionalContentConfig(S));let w=this._intentStates.get(m);w||(w=Object.create(null),this._intentStates.set(m,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const x=!!(S&bi.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(v));const E=!!(this._pdfBug&&((F=globalThis.StepperManager)!=null&&F.enabled)),C=!this.recordedBBoxes&&(g||E),T=B=>{var z,H;if(w.renderTasks.delete(k),C){const et=(z=k.gfx)==null?void 0:z.dependencyTracker.take();et&&(k.stepper&&k.stepper.setOperatorBBoxes(et,k.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=et))}x&&p(this,Os,!0),A(this,Ol,Yd).call(this),B?(k.capability.reject(B),this._abortOperatorList({intentState:w,reason:B instanceof Error?B:new Error(B)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(H=globalThis.Stats)!=null&&H.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new $b({callback:T,params:{canvas:e,canvasContext:t,dependencyTracker:C?new pj(e,w.operatorList.length,E):null,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:b});(w.renderTasks||(w.renderTasks=new Set)).add(k);const D=k.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([B,z])=>{var H;if(this.destroyed){T();return}if((H=this._stats)==null||H.time("Rendering"),!(z.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:B,optionalContentConfig:z}),k.operatorListChanged()}).catch(T),D}getOperatorList({intent:t="display",annotationMode:e=is.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var u;function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,i,r,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Bf.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function s(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),s()},r)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),p(this,Os,!1),Promise.all(t)}cleanup(t=!1){p(this,Os,!0);const e=A(this,Ol,Yd).call(this);return t&&e&&this._stats&&(this._stats=new fE),e}_startRenderPage(t,e){var r,s;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&A(this,Ol,Yd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:r},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,Ol,Yd).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof tv){let r=qj;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new lo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Os=new WeakMap,Ol=new WeakSet,Yd=function(){if(!a(this,Os)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),p(this,Os,!1),!0};var Go,dr,Bs,Bl,oy,jl,$l,Ln,Um,kk,Pk,Kd,yh,zm;const ne=class ne{constructor({name:t=null,port:e=null,verbosity:i=BB()}={}){y(this,Ln);y(this,Go,Promise.withResolvers());y(this,dr,null);y(this,Bs,null);y(this,Bl,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(a(ne,$l).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(ne,$l).set(e,this),A(this,Ln,kk).call(this,e)}else A(this,Ln,Pk).call(this)}get promise(){return a(this,Go).promise}get port(){return a(this,Bs)}get messageHandler(){return a(this,dr)}destroy(){var t,e;this.destroyed=!0,(t=a(this,Bl))==null||t.terminate(),p(this,Bl,null),a(ne,$l).delete(a(this,Bs)),p(this,Bs,null),(e=a(this,dr))==null||e.destroy(),p(this,dr,null)}static create(t){const e=a(this,$l).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ne(t)}static get workerSrc(){if(qi.workerSrc)return qi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ct(this,"_setupFakeWorkerGlobal",(async()=>a(this,yh,zm)?a(this,yh,zm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Go=new WeakMap,dr=new WeakMap,Bs=new WeakMap,Bl=new WeakMap,oy=new WeakMap,jl=new WeakMap,$l=new WeakMap,Ln=new WeakSet,Um=function(){a(this,Go).resolve(),a(this,dr).send("configure",{verbosity:this.verbosity})},kk=function(t){p(this,Bs,t),p(this,dr,new zd("main","worker",t)),a(this,dr).on("ready",()=>{}),A(this,Ln,Um).call(this)},Pk=function(){if(a(ne,jl)||a(ne,yh,zm)){A(this,Ln,Kd).call(this);return}let{workerSrc:t}=ne;try{ne._isSameOrigin(window.location,t)||(t=ne._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new zd("main","worker",e),r=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?a(this,Go).reject(new Error("Worker was destroyed")):A(this,Ln,Kd).call(this)},s=new AbortController;e.addEventListener("error",()=>{a(this,Bl)||r()},{signal:s.signal}),i.on("test",l=>{if(s.abort(),this.destroyed||!l){r();return}p(this,dr,i),p(this,Bs,e),p(this,Bl,e),A(this,Ln,Um).call(this)}),i.on("ready",l=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{A(this,Ln,Kd).call(this)}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{Jy("The worker has been disabled.")}A(this,Ln,Kd).call(this)},Kd=function(){a(ne,jl)||(st("Setting up fake worker."),p(ne,jl,!0)),ne._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Go).reject(new Error("Worker was destroyed"));return}const e=new sj;p(this,Bs,e);const i=`fake${De(ne,oy)._++}`,r=new zd(i+"_worker",i,e);t.setup(r,e),p(this,dr,new zd(i,i+"_worker",e)),A(this,Ln,Um).call(this)}).catch(t=>{a(this,Go).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},yh=new WeakSet,zm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},y(ne,yh),y(ne,oy,0),y(ne,jl,!1),y(ne,$l,new WeakMap),Dn&&(p(ne,jl,!0),qi.workerSrc||(qi.workerSrc="./pdf.worker.mjs")),ne._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const r=new URL(e,i);return i.origin===r.origin},ne._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ne.fromPort=t=>{if(XB("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ne.create(t)};let cd=ne;var js,Gr,vh,wh,$s,Ul,Qd;class Qj{constructor(t,e,i,r,s,o){y(this,Ul);y(this,js,new Map);y(this,Gr,new Map);y(this,vh,new Map);y(this,wh,new Map);y(this,$s,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Sk,this.fontLoader=new tj({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ct(this,"annotationStorage",new KA)}getRenderingIntent(t,e=is.ENABLE,i=null,r=!1,s=!1){let o=bi.DISPLAY,l=Sb;switch(t){case"any":o=bi.ANY;break;case"display":break;case"print":o=bi.PRINT;break;default:st(`getRenderingIntent - invalid intent: ${t}`)}const c=o&bi.PRINT&&i instanceof ok?i:this.annotationStorage;switch(e){case is.DISABLE:o+=bi.ANNOTATIONS_DISABLE;break;case is.ENABLE:break;case is.ENABLE_FORMS:o+=bi.ANNOTATIONS_FORMS;break;case is.ENABLE_STORAGE:o+=bi.ANNOTATIONS_STORAGE,l=c.serializable;break;default:st(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(o+=bi.IS_EDITING),s&&(o+=bi.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,$s))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,Gr).values())t.push(r._destroy());a(this,Gr).clear(),a(this,vh).clear(),a(this,wh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),a(this,js).clear(),this.filterFactory.destroy(),Uf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new lo("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}wt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:o}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:o}}),t.on("GetRangeReader",(i,r)=>{wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:l}){if(l){r.close();return}wt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Yj(i,this))}),t.on("DocException",i=>{e._capability.reject(jn(i))}),t.on("PasswordRequest",i=>{p(this,$s,Promise.withResolvers());try{if(!e.onPassword)throw jn(i);const r=s=>{s instanceof Error?a(this,$s).reject(s):a(this,$s).resolve({password:s})};e.onPassword(r,i.code)}catch(r){a(this,$s).reject(r)}return a(this,$s).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Gr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const d=s.error;st(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const l=new Fb(s),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new ej(l,c,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=s;wt(h,"The imageRef must be defined.");for(const d of a(this,Gr).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,s,o])=>{var c;if(this.destroyed)return;const l=a(this,Gr).get(r);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&st("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,vh).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&a(this,wh).set(s.refStr,t);const o=new Kj(e,s,this,this._params.pdfBug);return a(this,Gr).set(e,o),o});return a(this,vh).set(e,r),r}getPageIndex(t){return Eb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,Ul,Qd).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Ul,Qd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return A(this,Ul,Qd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,Ul,Qd).call(this,"GetOptionalContentConfig").then(e=>new Pj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,js).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new Tj(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,js).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Gr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,js).clear(),this.filterFactory.destroy(!0),Uf.cleanup()}}cachedPageNumber(t){if(!Eb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,wh).get(e)??null}}js=new WeakMap,Gr=new WeakMap,vh=new WeakMap,wh=new WeakMap,$s=new WeakMap,Ul=new WeakSet,Qd=function(t,e=null){const i=a(this,js).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return a(this,js).set(t,r),r};var Xo;class Zj{constructor(t){y(this,Xo,null);I(this,"onContinue",null);I(this,"onError",null);p(this,Xo,t)}get promise(){return a(this,Xo).capability.promise}cancel(t=0){a(this,Xo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Xo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Xo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Xo=new WeakMap;var qo,zl;const Za=class Za{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:g=!1,operationsFilter:b=null}){y(this,qo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Zj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=g,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(Za,zl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Za,zl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:s,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Eu(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var i,r,s;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,qo)&&(window.cancelAnimationFrame(a(this,qo)),p(this,qo,null)),a(Za,zl).delete(this._canvas),t||(t=new tv(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(s=(r=this.task).onError)==null||s.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?p(this,qo,window.requestAnimationFrame(()=>{p(this,qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Za,zl).delete(this._canvas),this.callback())))}};qo=new WeakMap,zl=new WeakMap,y(Za,zl,new WeakSet);let $b=Za;const ex="5.4.296",Dk="f56dc8601";var li,Hl,bh,Le,Hp,Ah,Us,Vp,Yo,fr,Wp,Ot,Ub,zb,Hb,qa,Rk,yo;const $n=class $n{constructor({editor:t=null,uiManager:e=null}){y(this,Ot);y(this,li,null);y(this,Hl,null);y(this,bh);y(this,Le,null);y(this,Hp,!1);y(this,Ah,!1);y(this,Us,null);y(this,Vp);y(this,Yo,null);y(this,fr,null);var i,r;t?(p(this,Ah,!1),p(this,Us,t)):p(this,Ah,!0),p(this,fr,(t==null?void 0:t._uiManager)||e),p(this,Vp,a(this,fr)._eventBus),p(this,bh,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((r=a(this,fr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),a($n,Wp)||p($n,Wp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ct(this,"_keyboardManager",new Ig([[["Escape","mac+Escape"],$n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$n.prototype._moveToPrevious],[["Home","mac+Home"],$n.prototype._moveToBeginning],[["End","mac+End"],$n.prototype._moveToEnd]]))}renderButton(){const t=p(this,li,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Us)&&(t.ariaControls=`${a(this,Us).id}_colorpicker_dropdown`);const e=a(this,fr)._signal;t.addEventListener("click",A(this,Ot,qa).bind(this),{signal:e}),t.addEventListener("keydown",A(this,Ot,Hb).bind(this),{signal:e});const i=p(this,Hl,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=a(this,bh),t.append(i),t}renderMainDropdown(){const t=p(this,Le,A(this,Ot,Ub).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,li)){A(this,Ot,qa).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,Ot,zb).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Ot,yo)){A(this,Ot,qa).call(this,t);return}if(t.target===a(this,li)){(e=a(this,Le).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Le))==null?void 0:e.firstChild)||t.target===a(this,li)){a(this,Ot,yo)&&this._hideDropdownFromKeyboard();return}a(this,Ot,yo)||A(this,Ot,qa).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Ot,yo)){A(this,Ot,qa).call(this,t);return}(e=a(this,Le).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Ot,yo)){A(this,Ot,qa).call(this,t);return}(e=a(this,Le).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Le))==null||t.classList.add("hidden"),a(this,li).ariaExpanded="false",(e=a(this,Yo))==null||e.abort(),p(this,Yo,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Ah)){if(!a(this,Ot,yo)){(t=a(this,Us))==null||t.unselect();return}this.hideDropdown(),a(this,li).focus({preventScroll:!0,focusVisible:a(this,Hp)})}}updateColor(t){if(a(this,Hl)&&(a(this,Hl).style.backgroundColor=t),!a(this,Le))return;const e=a(this,fr).highlightColors.values();for(const i of a(this,Le).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,li))==null||t.remove(),p(this,li,null),p(this,Hl,null),(e=a(this,Le))==null||e.remove(),p(this,Le,null)}};li=new WeakMap,Hl=new WeakMap,bh=new WeakMap,Le=new WeakMap,Hp=new WeakMap,Ah=new WeakMap,Us=new WeakMap,Vp=new WeakMap,Yo=new WeakMap,fr=new WeakMap,Wp=new WeakMap,Ot=new WeakSet,Ub=function(){const t=document.createElement("div"),e=a(this,fr)._signal;t.addEventListener("contextmenu",ki,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Us)&&(t.id=`${a(this,Us).id}_colorpicker_dropdown`);for(const[i,r]of a(this,fr).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",a($n,Wp)[i]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.ariaSelected=r===a(this,bh),s.addEventListener("click",A(this,Ot,zb).bind(this,r),{signal:e}),t.append(s)}return t.addEventListener("keydown",A(this,Ot,Hb).bind(this),{signal:e}),t},zb=function(t,e){e.stopPropagation(),a(this,Vp).dispatch("switchannotationeditorparams",{source:this,type:yt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Hb=function(t){$n._keyboardManager.exec(this,t)},qa=function(t){if(a(this,Ot,yo)){this.hideDropdown();return}if(p(this,Hp,t.detail===0),a(this,Yo)||(p(this,Yo,new AbortController),window.addEventListener("pointerdown",A(this,Ot,Rk).bind(this),{signal:a(this,fr).combinedSignal(a(this,Yo))})),a(this,li).ariaExpanded="true",a(this,Le)){a(this,Le).classList.remove("hidden");return}const e=p(this,Le,A(this,Ot,Ub).call(this));a(this,li).append(e)},Rk=function(t){var e;(e=a(this,Le))!=null&&e.contains(t.target)||this.hideDropdown()},yo=function(){return a(this,Le)&&!a(this,Le).classList.contains("hidden")},y($n,Wp,null);let zf=$n;var Xr,Gp,xh,Xp;const Ja=class Ja{constructor(t){y(this,Xr,null);y(this,Gp,null);y(this,xh,null);p(this,Gp,t),p(this,xh,t._uiManager),a(Ja,Xp)||p(Ja,Xp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Xr))return a(this,Xr);const{editorType:t,colorType:e,colorValue:i}=a(this,Gp),r=p(this,Xr,document.createElement("input"));return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",a(Ja,Xp)[t]),r.addEventListener("input",()=>{a(this,xh).updateParams(e,r.value)},{signal:a(this,xh)._signal}),r}update(t){a(this,Xr)&&(a(this,Xr).value=t)}destroy(){var t;(t=a(this,Xr))==null||t.remove(),p(this,Xr,null)}hideDropdown(){}};Xr=new WeakMap,Gp=new WeakMap,xh=new WeakMap,Xp=new WeakMap,y(Ja,Xp,null);let H0=Ja;function NE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Pd(n){return Math.max(0,Math.min(255,255*n))}class IE{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Pd(t),[t,t,t]}static G_HTML([t]){const e=NE(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Pd)}static RGB_HTML(t){return`#${t.map(NE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[Pd(1-Math.min(1,t+r)),Pd(1-Math.min(1,i+r)),Pd(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,s=1-e,o=1-i,l=Math.min(r,s,o);return["CMYK",r,s,o,l]}}class Jj{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ht("Abstract method `_createSVG` called.")}}class Hf extends Jj{_createSVG(t){return document.createElementNS(hs,t)}}const t3=9,kc=new WeakSet,e3=new Date().getTimezoneOffset()*60*1e3;class OE{static create(t){switch(t.data.annotationType){case Ae.LINK:return new nx(t);case Ae.TEXT:return new i3(t);case Ae.WIDGET:switch(t.data.fieldType){case"Tx":return new r3(t);case"Btn":return t.data.radioButton?new Fk(t):t.data.checkBox?new o3(t):new a3(t);case"Ch":return new l3(t);case"Sig":return new s3(t)}return new jc(t);case Ae.POPUP:return new Wb(t);case Ae.FREETEXT:return new jk(t);case Ae.LINE:return new u3(t);case Ae.SQUARE:return new h3(t);case Ae.CIRCLE:return new d3(t);case Ae.POLYLINE:return new $k(t);case Ae.CARET:return new p3(t);case Ae.INK:return new ix(t);case Ae.POLYGON:return new f3(t);case Ae.HIGHLIGHT:return new Uk(t);case Ae.UNDERLINE:return new g3(t);case Ae.SQUIGGLY:return new m3(t);case Ae.STRIKEOUT:return new y3(t);case Ae.STAMP:return new zk(t);case Ae.FILEATTACHMENT:return new v3(t);default:return new de(t)}}}var Vl,Sh,Hi,qp,Vb;const hx=class hx{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){y(this,qp);y(this,Vl,null);y(this,Sh,!1);y(this,Hi,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return hx._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:t}=this,e=(i=this.annotationStorage)==null?void 0:i.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const t=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:r}=this.data;let s=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],s=e[c+2]):e[c+1]===o&&(s=Math.max(s,e[c+2]));return[s,o]}if((i==null?void 0:i.length)>=1){for(const c of i)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],s=c[u]):c[u+1]===o&&(s=Math.max(s,c[u]));if(s!==1/0)return[s,o]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/i,t[1]=100*(t[1]-o)/r,t}get commentText(){var e,i,r;const{data:t}=this;return((i=(e=this.annotationStorage.getRawValue(`${If}${t.id}`))==null?void 0:e.popup)==null?void 0:i.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${If}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,Hi))==null?void 0:t.popup)||this.popup)==null||e.remove(),p(this,Hi,this.popup=null)}updateEdited(t){var s;if(!this.container)return;t.rect&&(a(this,Vl)||p(this,Vl,{rect:this.data.rect.slice(0)}));const{rect:e,popup:i}=t;e&&A(this,qp,Vb).call(this,e);let r=((s=a(this,Hi))==null?void 0:s.popup)||this.popup;!r&&(i!=null&&i.text)&&(this._createPopup(i),r=a(this,Hi).popup),r&&(r.updateEdited(t),i!=null&&i.deleted&&(r.remove(),p(this,Hi,null),this.popup=null))}resetEdited(){var t;a(this,Vl)&&(A(this,qp,Vb).call(this,a(this,Vl).rect),(t=a(this,Hi))==null||t.popup.resetEdited(),p(this,Vl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof jc)&&!(this instanceof nx)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Wb){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,s),s}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(v>0||S>0){const w=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof Fk){const w=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case Vc.SOLID:o.borderStyle="solid";break;case Vc.DASHED:o.borderStyle="dashed";break;case Vc.BEVELED:st("Unimplemented border style: beveled");break;case Vc.INSET:st("Unimplemented border style: inset");break;case Vc.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(p(this,Sh,!0),o.borderColor=q.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const u=q.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=r.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-g)/d}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(b,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:o}=this;t%180!==0&&([s,o]=[o,s]),e.style.width=`${100*s/i}%`,e.style.height=`${100*o/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const s=r.detail[e],o=s[0],l=s.slice(1);r.target.style[i]=IE[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:IE[`${o}_rgb`](l)})};return ct(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const s=t[r]||i[r];s==null||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,s]of Object.entries(e)){const o=i[r];if(o){const l={detail:{[r]:s},target:t};o(l),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,s]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,S,m,w]=t.subarray(2,6);if(r===v&&s===S&&e===m&&i===w)return}const{style:o}=this.container;let l;if(a(this,Sh)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=r-e,u=s-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),b=`clippath_${this.data.id}`;g.setAttribute("id",b),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let v=2,S=t.length;v<S;v+=8){const m=t[v],w=t[v+1],x=t[v+2],E=t[v+3],C=h.createElement("rect"),T=(x-e)/c,k=(s-w)/u,D=(m-x)/c,M=(w-E)/u;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",D),C.setAttribute("height",M),g.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${D}" height="${M}"/>`)}a(this,Sh)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${b})`}_createPopup(t=null){const{data:e}=this;let i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);const s=p(this,Hi,new Wb({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(a(this,Hi)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Hi)}render(){Ht("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:s,id:o,exportValues:l}of r){if(s===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!kc.has(u)){st(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const r of document.getElementsByName(t)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==e&&kc.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Vl=new WeakMap,Sh=new WeakMap,Hi=new WeakMap,qp=new WeakSet,Vb=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-l)/s}%`,e.top=`${100*(o-t[3]+c)/o}%`,r===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)};let de=hx;class n3 extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Si,Ya,Mk,Lk;class nx extends de{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});y(this,Si);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),s=!0):e.attachment?(A(this,Si,Mk).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(A(this,Si,Lk).call(this,r,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(e,i,r=""){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&A(this,Si,Ya).call(this),r&&(e.title=r)}_bindNamedAction(e,i,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),r&&(e.title=r),A(this,Si,Ya).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const o=r.get(s);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}i.overlaidText&&(e.title=i.overlaidText),e.onclick||(e.onclick=()=>!1),A(this,Si,Ya).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),A(this,Si,Ya).call(this),!this._fieldObjects){st('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var d;r==null||r();const{fields:s,refs:o,include:l}=i,c=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const g of s){const b=this._fieldObjects[g]||[];for(const{id:v}of b)f.add(v)}for(const g of Object.values(this._fieldObjects))for(const b of g)f.has(b.id)===l&&c.push(b)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${g}"]`);if(b){if(!kc.has(b)){st(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Si=new WeakSet,Ya=function(){this.container.setAttribute("data-internal-link","")},Mk=function(e,i,r="",s=null){e.href=this.linkService.getAnchorUrl(""),i.description?e.title=i.description:r&&(e.title=r),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,s),!1},A(this,Si,Ya).call(this)},Lk=function(e,i,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),r&&(e.title=r),A(this,Si,Ya).call(this)};class i3 extends de{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class jc extends de{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Xe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,s){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(t,e,i,r){var s,o,l;for(const[c,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||t3,s=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Wv*r))||1,d=u/h;o=Math.min(r,c(d/Wv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(r,c(u/Wv))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=q.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class r3 extends jc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),s.setValue(o.id,{[r]:i})}render(){var r,s;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),kc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:g}=this.data,b=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",S=>{const m=this.data.defaultFieldValue??"";i.value=h.userValue=m,h.formattedValue=null});let v=S=>{const{formattedValue:m}=h;m!=null&&(S.target.value=m),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var x;if(h.focused)return;const{target:w}=m;if(b&&(w.type=f,g&&(w.step=g)),h.userValue){const E=h.userValue;if(b)if(f==="time"){const C=new Date(E),T=[C.getHours(),C.getMinutes(),C.getSeconds()];w.value=T.map(k=>k.toString().padStart(2,"0")).join(":")}else w.value=new Date(E-e3).toISOString().split(f==="date"?"T":".",1)[0];else w.value=E}h.lastCommittedValue=w.value,h.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const w={value(x){h.userValue=x.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),x.target.value=h.userValue},formattedValue(x){const{formattedValue:E}=x.detail;h.formattedValue=E,E!=null&&x.target!==document.activeElement&&(x.target.value=E);const C={formattedValue:E};b&&(C.value=E),t.setValue(e,C)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var k;const{charLimit:E}=x.detail,{target:C}=x;if(E===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",E);let T=h.userValue;!T||T.length<=E||(T=T.slice(0,E),C.value=h.userValue=T,t.setValue(e,{value:T}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,m)}),i.addEventListener("keydown",m=>{var E;h.commitKey=1;let w=-1;if(m.key==="Escape"?w=0:m.key==="Enter"&&!this.data.multiLine?w=2:m.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:x}=m.target;h.lastCommittedValue!==x&&(h.lastCommittedValue=x,h.userValue=x,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:w,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const S=v;v=null,i.addEventListener("blur",m=>{var E,C;if(!h.focused||!m.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:w}=m;let{value:x}=w;if(b){if(x&&f==="time"){const T=x.split(":").map(k=>parseInt(k,10));x=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),w.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();w.type="text"}h.userValue=x,h.lastCommittedValue!==x&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),S(m)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",m=>{var M;h.lastCommittedValue=null;const{data:w,target:x}=m,{value:E,selectionStart:C,selectionEnd:T}=x;let k=C,D=T;switch(m.inputType){case"deleteWordBackward":{const L=E.substring(0,C).match(/\w*[^\w]*$/);L&&(k-=L[0].length);break}case"deleteWordForward":{const L=E.substring(C).match(/^[^\w]*\w*/);L&&(D+=L[0].length);break}case"deleteContentBackward":C===T&&(k-=1);break;case"deleteContentForward":C===T&&(D+=1);break}m.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:w||"",willCommit:!1,selStart:k,selEnd:D}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class s3 extends jc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class o3 extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return kc.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:c})}),s.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Fk extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const s=document.createElement("input");if(kc.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:c})}),s.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;s.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class a3 extends nx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class l3 extends jc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");kc.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=r;return g?Array.prototype.filter.call(f,b=>b.selected).map(b=>b[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const g=f.detail.value,b=new Set(Array.isArray(g)?g:[g]);for(const v of r.options)v.selected=b.has(v.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){r.multiple=!0},remove(f){const g=r.options,b=f.detail.remove;g[b].selected=!1,r.remove(b),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:g,displayValue:b,exportValue:v}=f.detail.insert,S=r.children[g],m=document.createElement("option");m.textContent=b,m.value=v,S?S.before(m):r.append(m),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:g}=f.detail;for(;r.length!==0;)r.remove(0);for(const b of g){const{displayValue:v,exportValue:S}=b,m=document.createElement("option");m.textContent=v,m.value=S,r.append(m)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const g=new Set(f.detail.indices);for(const b of f.target.options)b.selected=g.has(b.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),r.addEventListener("input",h=>{var g;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Yp,Gb;class Wb extends de{constructor(e){const{data:i,elements:r,parent:s}=e,o=!!s._commentManager;super(e,{isRenderable:!o&&de._hasPopupData(i)});y(this,Yp);if(this.elements=r,o&&de._hasPopupData(i)){const l=this.popup=A(this,Yp,Gb).call(this);for(const c of r)c.popup=l}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const i=this.popup=A(this,Yp,Gb).call(this),r=[];for(const s of this.elements)s.popup=i,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${XA}${s}`).join(",")),this.container}}Yp=new WeakSet,Gb=function(){return new c3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ci,Ko,ay,ly,Eh,_h,me,qr,Qo,Wl,Ch,Th,Yr,ui,zs,Hs,je,Vs,Zo,Kp,Ws,kh,Gl,Jo,wn,ta,ht,Hm,Xb,qb,Yb,Vm,Kb,Nk,Ik,Ok,Bk,Wm,Gm,Qb;class c3{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){y(this,ht);y(this,ci,null);y(this,Ko,A(this,ht,Ok).bind(this));y(this,ay,A(this,ht,Qb).bind(this));y(this,ly,A(this,ht,Gm).bind(this));y(this,Eh,A(this,ht,Wm).bind(this));y(this,_h,null);y(this,me,null);y(this,qr,null);y(this,Qo,null);y(this,Wl,null);y(this,Ch,null);y(this,Th,null);y(this,Yr,!1);y(this,ui,null);y(this,zs,null);y(this,Hs,null);y(this,je,null);y(this,Vs,null);y(this,Zo,null);y(this,Kp,null);y(this,Ws,null);y(this,kh,null);y(this,Gl,null);y(this,Jo,!1);y(this,wn,null);y(this,ta,null);p(this,me,t),p(this,kh,r),p(this,qr,o),p(this,Ws,l),p(this,Ch,c),p(this,_h,e),p(this,Kp,u),p(this,Th,h),p(this,Wl,i),p(this,ci,f),p(this,wn,i[0]),p(this,Qo,jf.toDateObject(s)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup()),f?this.renderCommentButton():(A(this,ht,Hm).call(this),a(this,me).hidden=!0,d&&A(this,ht,Wm).call(this))}renderCommentButton(){if(a(this,je)||(a(this,Vs)||A(this,ht,Xb).call(this),!a(this,Vs)))return;const{signal:t}=p(this,zs,new AbortController),e=!!a(this,wn).extraPopupElement,i=()=>{a(this,ci).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{a(this,ci).toggleCommentPopup(this,!1,!0,!e)},s=()=>{a(this,ci).toggleCommentPopup(this,!1,!1)};if(e){p(this,je,a(this,wn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Ko),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",s,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=p(this,je,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,wn).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),A(this,ht,Yb).call(this),A(this,ht,qb).call(this),o.addEventListener("keydown",a(this,Ko),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",s,{signal:t}),l.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,wn).commentData;return t?a(this,Ch)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,je))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:r,modificationDate:s}=a(this,wn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:s}}get elementBeforePopup(){return a(this,je)}get comment(){return a(this,ta)||p(this,ta,a(this,wn).commentText),a(this,ta)}set comment(t){t!==this.comment&&(a(this,wn).commentText=p(this,ta,t))}get parentBoundingClientRect(){return a(this,wn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,je)&&(a(this,je).classList.toggle("selected",t),a(this,je).ariaExpanded=e)}setSelectedCommentButton(t){a(this,je).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,Zo))return a(this,Zo);const{x:t,y:e,height:i}=a(this,je).getBoundingClientRect(),{x:r,y:s,width:o,height:l}=a(this,wn).layer.getBoundingClientRect();return[(t-r)/o,(e+i-s)/l]}set commentPopupPosition(t){p(this,Zo,t)}hasDefaultPopupPosition(){return a(this,Zo)===null}get commentButtonPosition(){return a(this,Vs)}get commentButtonWidth(){return a(this,je).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=a(this,Zo)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:s,y:o,width:l,height:c}=r;a(this,ci).showDialog(null,this,s+e*l,o+i*c,{...t,parentDimensions:r})}render(){var i,r;if(a(this,ui))return;const t=p(this,ui,document.createElement("div"));if(t.className="popup",a(this,_h)){const s=t.style.outlineColor=q.makeHexColor(...a(this,_h));t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",(i=a(this,kh))!=null&&i.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=a(this,kh)}if(t.append(e),a(this,Qo)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Qo).valueOf()})),s.dateTime=a(this,Qo).toISOString(),e.append(s)}YA({html:a(this,ht,Vm)||a(this,qr).str,dir:(r=a(this,qr))==null?void 0:r.dir,className:"popupContent"},t),a(this,me).append(t)}updateEdited({rect:t,popup:e,deleted:i}){var r;if(a(this,ci)){i?(this.remove(),p(this,ta,null)):e&&(e.deleted?this.remove():(A(this,ht,Yb).call(this),p(this,ta,e.text))),t&&(p(this,Vs,null),A(this,ht,Xb).call(this),A(this,ht,qb).call(this));return}if(i||e!=null&&e.deleted){this.remove();return}A(this,ht,Hm).call(this),a(this,Gl)||p(this,Gl,{contentsObj:a(this,qr),richText:a(this,Ws)}),t&&p(this,Hs,null),e&&e.text&&(p(this,Ws,A(this,ht,Ik).call(this,e.text)),p(this,Qo,jf.toDateObject(e.date)),p(this,qr,null)),(r=a(this,ui))==null||r.remove(),p(this,ui,null)}resetEdited(){var t;a(this,Gl)&&({contentsObj:De(this,qr)._,richText:De(this,Ws)._}=a(this,Gl),p(this,Gl,null),(t=a(this,ui))==null||t.remove(),p(this,ui,null),p(this,Hs,null))}remove(){var t,e,i;if((t=a(this,zs))==null||t.abort(),p(this,zs,null),(e=a(this,ui))==null||e.remove(),p(this,ui,null),p(this,Jo,!1),p(this,Yr,!1),(i=a(this,je))==null||i.remove(),p(this,je,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){p(this,Jo,this.isVisible),a(this,Jo)&&(a(this,me).hidden=!0)}maybeShow(){a(this,ci)||(A(this,ht,Hm).call(this),a(this,Jo)&&(a(this,ui)||A(this,ht,Gm).call(this),p(this,Jo,!1),a(this,me).hidden=!1))}get isVisible(){return a(this,ci)?!1:a(this,me).hidden===!1}}ci=new WeakMap,Ko=new WeakMap,ay=new WeakMap,ly=new WeakMap,Eh=new WeakMap,_h=new WeakMap,me=new WeakMap,qr=new WeakMap,Qo=new WeakMap,Wl=new WeakMap,Ch=new WeakMap,Th=new WeakMap,Yr=new WeakMap,ui=new WeakMap,zs=new WeakMap,Hs=new WeakMap,je=new WeakMap,Vs=new WeakMap,Zo=new WeakMap,Kp=new WeakMap,Ws=new WeakMap,kh=new WeakMap,Gl=new WeakMap,Jo=new WeakMap,wn=new WeakMap,ta=new WeakMap,ht=new WeakSet,Hm=function(){var e;if(a(this,zs))return;p(this,zs,new AbortController);const{signal:t}=a(this,zs);for(const i of this.trigger)i.addEventListener("click",a(this,Eh),{signal:t}),i.addEventListener("pointerenter",a(this,ly),{signal:t}),i.addEventListener("pointerleave",a(this,ay),{signal:t}),i.classList.add("popupTriggerArea");for(const i of a(this,Wl))(e=i.container)==null||e.addEventListener("keydown",a(this,Ko),{signal:t})},Xb=function(){const t=a(this,Wl).find(e=>e.hasCommentButton);t&&p(this,Vs,t._normalizePoint(t.commentButtonPosition))},qb=function(){if(a(this,wn).extraPopupElement&&!a(this,wn).editor)return;this.renderCommentButton();const[t,e]=a(this,Vs),{style:i}=a(this,je);i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`},Yb=function(){a(this,wn).extraPopupElement||(this.renderCommentButton(),a(this,je).style.backgroundColor=this.commentButtonColor||"")},Vm=function(){const t=a(this,Ws),e=a(this,qr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ws).html||null},Kb=function(){var t,e,i;return((i=(e=(t=a(this,ht,Vm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Nk=function(){var t,e,i;return((i=(e=(t=a(this,ht,Vm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Ik=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,ht,Nk),fontSize:a(this,ht,Kb)?`calc(${a(this,ht,Kb)}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:r});return i},Ok=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Yr))&&A(this,ht,Wm).call(this)},Bk=function(){if(a(this,Hs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:s}}}=a(this,Ch);let o=!!a(this,Th),l=o?a(this,Th):a(this,Kp);for(const b of a(this,Wl))if(!l||q.intersect(b.data.rect,l)!==null){l=b.data.rect,o=!0;break}const c=q.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];p(this,Hs,[100*(d-r)/e,100*(f-s)/i]);const{style:g}=a(this,me);g.left=`${a(this,Hs)[0]}%`,g.top=`${a(this,Hs)[1]}%`},Wm=function(){if(a(this,ci)){a(this,ci).toggleCommentPopup(this,!1);return}p(this,Yr,!a(this,Yr)),a(this,Yr)?(A(this,ht,Gm).call(this),a(this,me).addEventListener("click",a(this,Eh)),a(this,me).addEventListener("keydown",a(this,Ko))):(A(this,ht,Qb).call(this),a(this,me).removeEventListener("click",a(this,Eh)),a(this,me).removeEventListener("keydown",a(this,Ko)))},Gm=function(){a(this,ui)||this.render(),this.isVisible?a(this,Yr)&&a(this,me).classList.add("focused"):(A(this,ht,Bk).call(this),a(this,me).hidden=!1,a(this,me).style.zIndex=parseInt(a(this,me).style.zIndex)+1e3)},Qb=function(){a(this,me).classList.remove("focused"),!(a(this,Yr)||!this.isVisible)&&(a(this,me).hidden=!0,a(this,me).style.zIndex=parseInt(a(this,me).style.zIndex)-1e3)};class jk extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qp;class u3 extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,Qp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),o=p(this,Qp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qp=new WeakMap;var Zp;class h3 extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,Zp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),o=e.borderStyle.width,l=p(this,Zp,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",r-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zp=new WeakMap;var Jp;class d3 extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,Jp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:r}=this,s=this.svgFactory.create(i,r,!0),o=e.borderStyle.width,l=p(this,Jp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",r/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",r/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jp=new WeakMap;var tg;class $k extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,tg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:s},width:o,height:l}=this;if(!i)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const g=i[d]-e[0],b=e[3]-i[d+1];u.push(`${g},${b}`)}u=u.join(" ");const h=p(this,tg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;class f3 extends $k{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class p3 extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var eg,Xl,ng,Zb;class ix extends de{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,ng);y(this,eg,null);y(this,Xl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?rt.HIGHLIGHT:rt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:s,popupRef:o}}=this,{transform:l,width:c,height:u}=A(this,ng,Zb).call(this,i,e),h=this.svgFactory.create(c,u,!0),d=p(this,eg,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,g=r.length;f<g;f++){const b=this.svgFactory.createElement(this.svgElementName);a(this,Xl).push(b),b.setAttribute("points",r[f].join(",")),d.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:s}=e,o=a(this,eg);if(i>=0&&o.setAttribute("stroke-width",i||1),r)for(let l=0,c=a(this,Xl).length;l<c;l++)a(this,Xl)[l].setAttribute("points",r[l].join(","));if(s){const{transform:l,width:c,height:u}=A(this,ng,Zb).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Xl)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap,Xl=new WeakMap,ng=new WeakSet,Zb=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class Uk extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=rt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class g3 extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class m3 extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class y3 extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class zk extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=rt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ig,rg,Jb;class v3 extends de{constructor(e){var r;super(e,{isRenderable:!0});y(this,rg);y(this,ig,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",A(this,rg,Jb).bind(this)),p(this,ig,r);const{isMac:s}=Xe.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&A(this,rg,Jb).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap,rg=new WeakSet,Jb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ph,ql,Dh,ea,sg,Yl,Fa,t1,e1,Rh;let rx=(Rh=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){y(this,Fa);y(this,Ph,null);y(this,ql,null);y(this,Dh,null);y(this,ea,new Map);y(this,sg,null);y(this,Yl,null);this.div=t,p(this,Ph,e),p(this,ql,i),p(this,sg,l||null),p(this,Yl,u||null),p(this,Dh,h||new KA),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return a(this,ea).size>0}async render(t){var o,l,c;const{annotations:e}=t,i=this.div;Ra(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:a(this,Yl),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Hf,annotationStorage:a(this,Dh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===Ae.POPUP;if(h){const g=r.get(u.id);if(!g)continue;s.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;s.data=u;const d=OE.create(s);if(!d.isRenderable)continue;if(!h&&u.popupRef){const g=r.get(u.popupRef);g?g.push(d):r.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await A(this,Fa,t1).call(this,f,u.id,s.elements),(l=(o=d.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),d._isEditable&&(a(this,ea).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}A(this,Fa,e1).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,Yl),svgFactory:new Hf,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=Rh._defaultBorderStyle),e.data=i;const r=OE.create(e);if(!r.isRenderable)continue;const s=r.render();await A(this,Fa,t1).call(this,s,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Ra(e,{rotation:t.rotation}),A(this,Fa,e1).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,ea).values())}getEditableAnnotation(t){return a(this,ea).get(t)}addFakeAnnotation(t){var l;const{div:e}=this,{id:i,rotation:r}=t,s=new n3({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,Yl),annotationStorage:a(this,Dh)}),o=s.render();return e.append(o),(l=a(this,Ph))==null||l.moveElementInDOM(e,o,o,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Vc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Ph=new WeakMap,ql=new WeakMap,Dh=new WeakMap,ea=new WeakMap,sg=new WeakMap,Yl=new WeakMap,Fa=new WeakSet,t1=async function(t,e,i){var l,c;const r=t.firstChild||t,s=r.id=`${XA}${e}`,o=await((l=a(this,sg))==null?void 0:l.getAriaAttributes(s));if(o)for(const[u,h]of o)r.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),(c=a(this,Ph))==null||c.moveElementInDOM(this.div,t,r,!1))},e1=function(){var e;if(!a(this,ql))return;const t=this.div;for(const[i,r]of a(this,ql)){const s=t.querySelector(`[data-annotation-id="${i}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):s.append(r);const l=a(this,ea).get(i);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,s.id,r),l._hasNoCanvas=!1):l.canvas=r)}a(this,ql).clear()},Rh);const pm=/\r\n?|\n/g;var hi,og,Kl,di,Pe,Hk,Vk,Wk,Xm,io,qm,Ym,Gk,i1,Xk;const Qt=class Qt extends qt{constructor(e){super({...e,name:"freeTextEditor"});y(this,Pe);y(this,hi,"");y(this,og,`${this.id}-editor`);y(this,Kl,null);y(this,di);I(this,"_colorPicker",null);this.color=e.color||Qt._defaultColor||qt._defaultLineColor,p(this,di,e.fontSize||Qt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Qt.prototype,i=o=>o.isEmpty(),r=Ma.TRANSLATE_SMALL,s=Ma.TRANSLATE_BIG;return ct(this,"_keyboardManager",new Ig([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(e,i){qt.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case yt.FREETEXT_SIZE:Qt._defaultFontSize=i;break;case yt.FREETEXT_COLOR:Qt._defaultColor=i;break}}updateParams(e,i){switch(e){case yt.FREETEXT_SIZE:A(this,Pe,Hk).call(this,i);break;case yt.FREETEXT_COLOR:A(this,Pe,Vk).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[yt.FREETEXT_SIZE,Qt._defaultFontSize],[yt.FREETEXT_COLOR,Qt._defaultColor||qt._defaultLineColor]]}get propertiesToUpdate(){return[[yt.FREETEXT_SIZE,a(this,di)],[yt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new H0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return yt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Qt._internalPadding*e,-(Qt._internalPadding+a(this,di))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),p(this,Kl,new AbortController);const e=this._uiManager.combinedSignal(a(this,Kl));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,og)),this._isDraggable=!0,(e=a(this,Kl))==null||e.abort(),p(this,Kl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,hi),i=p(this,hi,A(this,Pe,Wk).call(this).trimEnd());if(e===i)return;const r=s=>{if(p(this,hi,s),!s){this.remove();return}A(this,Pe,Ym).call(this),this._uiManager.rebuild(this),A(this,Pe,Xm).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),A(this,Pe,Xm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Qt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,og)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,di)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let b,v;switch(this.rotation){case 0:b=e+(l[0]-f)/h,v=i+this.height-(l[1]-g)/d;break;case 90:b=e+(l[0]-f)/h,v=i-(l[1]-g)/d,[c,u]=[u,-c];break;case 180:b=e-this.width+(l[0]-f)/h,v=i-(l[1]-g)/d,[c,u]=[-c,-u];break;case 270:b=e+(l[0]-f-this.height*d)/h,v=i+(l[1]-g-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(b*s,v*o,c,u)}else this._moveAfterPaste(e,i);A(this,Pe,Ym).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,v,S;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=A(b=Qt,io,i1).call(b,i.getData("text")||"").replaceAll(pm,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(pm,"")),m!==this.editorDiv){let w=h;for(const x of this.editorDiv.childNodes){if(x===m){w=d;continue}w.push(A(v=Qt,io,qm).call(v,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(pm,""))}else if(c===this.editorDiv){let m=h,w=0;for(const x of this.editorDiv.childNodes)w++===u&&(m=d),m.push(A(S=Qt,io,qm).call(S,x))}p(this,hi,`${h.join(`
`)}${s}${d.join(`
`)}`),A(this,Pe,Ym).call(this);const f=new Range;let g=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const w=m.nodeValue.length;if(g<=w){f.setStart(m,g),f.setEnd(m,g);break}g-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Qt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,i,r){var l;let s=null;if(e instanceof jk){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:g,richText:b,contentsObj:v,creationDate:S,modificationDate:m},textContent:w,textPosition:x,parent:{page:{pageNumber:E}}}=e;if(!w||w.length===0)return null;s=e={annotationType:rt.FREETEXT,color:Array.from(u),fontSize:c,value:w.join(`
`),position:x,pageIndex:E-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:(v==null?void 0:v.str)||null,richText:b,creationDate:S,modificationDate:m}}const o=await super.deserialize(e,i,r);return p(o,di,e.fontSize),o.color=q.makeHexColor(...e.color),p(o,hi,A(l=Qt,io,i1).call(l,e.value)),o._initialData=s,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=qt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:i,fontSize:a(this,di),value:A(this,Pe,Gk).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!A(this,Pe,Xk).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(!i)return null;const{style:r}=i;r.fontSize=`calc(${a(this,di)}px * var(--total-scale-factor))`,r.color=this.color,i.replaceChildren();for(const s of a(this,hi).split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),i.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,hi)}}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};hi=new WeakMap,og=new WeakMap,Kl=new WeakMap,di=new WeakMap,Pe=new WeakSet,Hk=function(e){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-a(this,di))*this.parentScale),p(this,di,s),A(this,Pe,Xm).call(this)},r=a(this,di);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Vk=function(e){const i=s=>{this.color=s,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Wk=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(A(r=Qt,io,qm).call(r,s)),i=s);return e.join(`
`)},Xm=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},io=new WeakSet,qm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(pm,"")},Ym=function(){if(this.editorDiv.replaceChildren(),!!a(this,hi))for(const e of a(this,hi).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},Gk=function(){return a(this,hi).replaceAll(""," ")},i1=function(e){return e.replaceAll(" ","")},Xk=function(e){const{value:i,fontSize:r,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((l,c)=>l!==s[c])||e.pageIndex!==o},y(Qt,io),I(Qt,"_freeTextDefaultContent",""),I(Qt,"_internalPadding",0),I(Qt,"_defaultColor",null),I(Qt,"_defaultFontSize",10),I(Qt,"_type","freetext"),I(Qt,"_editorType",rt.FREETEXT);let n1=Qt;class X{toSVGPath(){Ht("Abstract method `toSVGPath` must be implemented.")}get box(){Ht("Abstract getter `box` must be implemented.")}serialize(t,e){Ht("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,s,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*r,o[l+1]=i+t[l+1]*s;return o}static _rescaleAndSwap(t,e,i,r,s,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*r,o[l+1]=i+t[l]*s;return o}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let s=0,o=t.length;s<o;s+=2)r[s]=e+t[s],r[s+1]=i+t[s+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,s){switch(s){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,s,o){return[(t+5*i)/6,(e+5*r)/6,(5*i+s)/6,(5*r+o)/6,(i+s)/2,(r+o)/2]}}I(X,"PRECISION",1e-4);var fi,pr,Mh,Lh,Kr,gt,Ql,Zl,ag,lg,Fh,Nh,na,cg,cy,uy,Ie,Zd,qk,Yk,Kk,Qk,Zk,Jk;const ms=class ms{constructor({x:t,y:e},i,r,s,o,l=0){y(this,Ie);y(this,fi);y(this,pr,[]);y(this,Mh);y(this,Lh);y(this,Kr,[]);y(this,gt,new Float32Array(18));y(this,Ql);y(this,Zl);y(this,ag);y(this,lg);y(this,Fh);y(this,Nh);y(this,na,[]);p(this,fi,i),p(this,Nh,s*r),p(this,Lh,o),a(this,gt).set([NaN,NaN,NaN,NaN,t,e],6),p(this,Mh,l),p(this,lg,a(ms,cg)*r),p(this,ag,a(ms,uy)*r),p(this,Fh,r),a(this,na).push(t,e)}isEmpty(){return isNaN(a(this,gt)[8])}add({x:t,y:e}){var M;p(this,Ql,t),p(this,Zl,e);const[i,r,s,o]=a(this,fi);let[l,c,u,h]=a(this,gt).subarray(8,12);const d=t-u,f=e-h,g=Math.hypot(d,f);if(g<a(this,ag))return!1;const b=g-a(this,lg),v=b/g,S=v*d,m=v*f;let w=l,x=c;l=u,c=h,u+=S,h+=m,(M=a(this,na))==null||M.push(t,e);const E=-m/b,C=S/b,T=E*a(this,Nh),k=C*a(this,Nh);return a(this,gt).set(a(this,gt).subarray(2,8),0),a(this,gt).set([u+T,h+k],4),a(this,gt).set(a(this,gt).subarray(14,18),12),a(this,gt).set([u-T,h-k],16),isNaN(a(this,gt)[6])?(a(this,Kr).length===0&&(a(this,gt).set([l+T,c+k],2),a(this,Kr).push(NaN,NaN,NaN,NaN,(l+T-i)/s,(c+k-r)/o),a(this,gt).set([l-T,c-k],14),a(this,pr).push(NaN,NaN,NaN,NaN,(l-T-i)/s,(c-k-r)/o)),a(this,gt).set([w,x,l,c,u,h],6),!this.isEmpty()):(a(this,gt).set([w,x,l,c,u,h],6),Math.abs(Math.atan2(x-c,w-l)-Math.atan2(m,S))<Math.PI/2?([l,c,u,h]=a(this,gt).subarray(2,6),a(this,Kr).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/s,((c+h)/2-r)/o),[l,c,w,x]=a(this,gt).subarray(14,18),a(this,pr).push(NaN,NaN,NaN,NaN,((w+l)/2-i)/s,((x+c)/2-r)/o),!0):([w,x,l,c,u,h]=a(this,gt).subarray(0,6),a(this,Kr).push(((w+5*l)/6-i)/s,((x+5*c)/6-r)/o,((5*l+u)/6-i)/s,((5*c+h)/6-r)/o,((l+u)/2-i)/s,((c+h)/2-r)/o),[u,h,l,c,w,x]=a(this,gt).subarray(12,18),a(this,pr).push(((w+5*l)/6-i)/s,((x+5*c)/6-r)/o,((5*l+u)/6-i)/s,((5*c+h)/6-r)/o,((l+u)/2-i)/s,((c+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Kr),e=a(this,pr);if(isNaN(a(this,gt)[6])&&!this.isEmpty())return A(this,Ie,qk).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);A(this,Ie,Kk).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return A(this,Ie,Yk).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,s,o){return new tP(t,e,i,r,s,o)}getOutlines(){var d;const t=a(this,Kr),e=a(this,pr),i=a(this,gt),[r,s,o,l]=a(this,fi),c=new Float32Array((((d=a(this,na))==null?void 0:d.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(a(this,na)[f]-r)/o,c[f+1]=(a(this,na)[f+1]-s)/l;if(c[c.length-2]=(a(this,Ql)-r)/o,c[c.length-1]=(a(this,Zl)-s)/l,isNaN(i[6])&&!this.isEmpty())return A(this,Ie,Qk).call(this,c);const u=new Float32Array(a(this,Kr).length+24+a(this,pr).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=A(this,Ie,Jk).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+g],u[h+1]=e[f+g+1],h+=2}return A(this,Ie,Zk).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,fi),a(this,Fh),a(this,Mh),a(this,Lh))}};fi=new WeakMap,pr=new WeakMap,Mh=new WeakMap,Lh=new WeakMap,Kr=new WeakMap,gt=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,ag=new WeakMap,lg=new WeakMap,Fh=new WeakMap,Nh=new WeakMap,na=new WeakMap,cg=new WeakMap,cy=new WeakMap,uy=new WeakMap,Ie=new WeakSet,Zd=function(){const t=a(this,gt).subarray(4,6),e=a(this,gt).subarray(16,18),[i,r,s,o]=a(this,fi);return[(a(this,Ql)+(t[0]-e[0])/2-i)/s,(a(this,Zl)+(t[1]-e[1])/2-r)/o,(a(this,Ql)+(e[0]-t[0])/2-i)/s,(a(this,Zl)+(e[1]-t[1])/2-r)/o]},qk=function(){const[t,e,i,r]=a(this,fi),[s,o,l,c]=A(this,Ie,Zd).call(this);return`M${(a(this,gt)[2]-t)/i} ${(a(this,gt)[3]-e)/r} L${(a(this,gt)[4]-t)/i} ${(a(this,gt)[5]-e)/r} L${s} ${o} L${l} ${c} L${(a(this,gt)[16]-t)/i} ${(a(this,gt)[17]-e)/r} L${(a(this,gt)[14]-t)/i} ${(a(this,gt)[15]-e)/r} Z`},Yk=function(t){const e=a(this,pr);t.push(`L${e[4]} ${e[5]} Z`)},Kk=function(t){const[e,i,r,s]=a(this,fi),o=a(this,gt).subarray(4,6),l=a(this,gt).subarray(16,18),[c,u,h,d]=A(this,Ie,Zd).call(this);t.push(`L${(o[0]-e)/r} ${(o[1]-i)/s} L${c} ${u} L${h} ${d} L${(l[0]-e)/r} ${(l[1]-i)/s}`)},Qk=function(t){const e=a(this,gt),[i,r,s,o]=a(this,fi),[l,c,u,h]=A(this,Ie,Zd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-r)/o,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-r)/o,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-r)/o],0),this.newFreeDrawOutline(d,t,a(this,fi),a(this,Fh),a(this,Mh),a(this,Lh))},Zk=function(t,e){const i=a(this,pr);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},Jk=function(t,e){const i=a(this,gt).subarray(4,6),r=a(this,gt).subarray(16,18),[s,o,l,c]=a(this,fi),[u,h,d,f]=A(this,Ie,Zd).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-o)/c],e),e+=24},y(ms,cg,8),y(ms,cy,2),y(ms,uy,a(ms,cg)+a(ms,cy));let V0=ms;var Ih,Jl,Gs,ug,pi,hg,Se,hy,eP;class tP extends X{constructor(e,i,r,s,o,l){super();y(this,hy);y(this,Ih);y(this,Jl,new Float32Array(4));y(this,Gs);y(this,ug);y(this,pi);y(this,hg);y(this,Se);p(this,Se,e),p(this,pi,i),p(this,Ih,r),p(this,hg,s),p(this,Gs,o),p(this,ug,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],A(this,hy,eP).call(this,l);const[c,u,h,d]=a(this,Jl);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,g=i.length;f<g;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,Se)[4]} ${a(this,Se)[5]}`];for(let i=6,r=a(this,Se).length;i<r;i+=6){if(isNaN(a(this,Se)[i])){e.push(`L${a(this,Se)[i+4]} ${a(this,Se)[i+5]}`);continue}e.push(`C${a(this,Se)[i]} ${a(this,Se)[i+1]} ${a(this,Se)[i+2]} ${a(this,Se)[i+3]} ${a(this,Se)[i+4]} ${a(this,Se)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,s],o){const l=r-e,c=s-i;let u,h;switch(o){case 0:u=X._rescale(a(this,Se),e,s,l,-c),h=X._rescale(a(this,pi),e,s,l,-c);break;case 90:u=X._rescaleAndSwap(a(this,Se),e,i,l,c),h=X._rescaleAndSwap(a(this,pi),e,i,l,c);break;case 180:u=X._rescale(a(this,Se),r,i,-l,c),h=X._rescale(a(this,pi),r,i,-l,c);break;case 270:u=X._rescaleAndSwap(a(this,Se),r,s,-l,-c),h=X._rescaleAndSwap(a(this,pi),r,s,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Jl)}newOutliner(e,i,r,s,o,l=0){return new V0(e,i,r,s,o,l)}getNewOutline(e,i){const[r,s,o,l]=a(this,Jl),[c,u,h,d]=a(this,Ih),f=o*h,g=l*d,b=r*h+c,v=s*d+u,S=this.newOutliner({x:a(this,pi)[0]*f+b,y:a(this,pi)[1]*g+v},a(this,Ih),a(this,hg),e,a(this,ug),i??a(this,Gs));for(let m=2;m<a(this,pi).length;m+=2)S.add({x:a(this,pi)[m]*f+b,y:a(this,pi)[m+1]*g+v});return S.getOutlines()}}Ih=new WeakMap,Jl=new WeakMap,Gs=new WeakMap,ug=new WeakMap,pi=new WeakMap,hg=new WeakMap,Se=new WeakMap,hy=new WeakSet,eP=function(e){const i=a(this,Se);let r=i[4],s=i[5];const o=[r,s,r,s];let l=r,c=s,u=r,h=s;const d=e?Math.max:Math.min,f=new Float32Array(4);for(let b=6,v=i.length;b<v;b+=6){const S=i[b+4],m=i[b+5];isNaN(i[b])?(q.pointBoundingBox(S,m,o),c>m?(l=S,c=m):c===m&&(l=d(l,S)),h<m?(u=S,h=m):h===m&&(u=d(u,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,q.bezierBoundingBox(r,s,...i.slice(b,b+6),f),q.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),r=S,s=m}const g=a(this,Jl);g[0]=o[0]-a(this,Gs),g[1]=o[1]-a(this,Gs),g[2]=o[2]-o[0]+2*a(this,Gs),g[3]=o[3]-o[1]+2*a(this,Gs),this.firstPoint=[l,c],this.lastPoint=[u,h]};var dg,fg,pg,ia,gr,Nn,nP,Km,iP,rP,s1;class r1{constructor(t,e=0,i=0,r=!0){y(this,Nn);y(this,dg);y(this,fg);y(this,pg);y(this,ia,[]);y(this,gr,[]);const s=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:m,width:w,height:x}of t){const E=Math.floor((S-e)/l)*l,C=Math.ceil((S+w+e)/l)*l,T=Math.floor((m-e)/l)*l,k=Math.ceil((m+x+e)/l)*l,D=[E,T,k,!0],M=[C,T,k,!1];a(this,ia).push(D,M),q.rectBoundingBox(E,T,C,k,s)}const c=s[2]-s[0]+2*i,u=s[3]-s[1]+2*i,h=s[0]-i,d=s[1]-i;let f=r?-1/0:1/0,g=1/0;const b=a(this,ia).at(r?-1:-2),v=[b[0],b[2]];for(const S of a(this,ia)){const[m,w,x,E]=S;!E&&r?w<g?(g=w,f=m):w===g&&(f=Math.max(f,m)):E&&!r&&(w<g?(g=w,f=m):w===g&&(f=Math.min(f,m))),S[0]=(m-h)/c,S[1]=(w-d)/u,S[2]=(x-d)/u}p(this,dg,new Float32Array([h,d,c,u])),p(this,fg,[f,g]),p(this,pg,v)}getOutlines(){a(this,ia).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,ia))e[3]?(t.push(...A(this,Nn,s1).call(this,e)),A(this,Nn,iP).call(this,e)):(A(this,Nn,rP).call(this,e),t.push(...A(this,Nn,s1).call(this,e)));return A(this,Nn,nP).call(this,t)}}dg=new WeakMap,fg=new WeakMap,pg=new WeakMap,ia=new WeakMap,gr=new WeakMap,Nn=new WeakSet,nP=function(t){const e=[],i=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,h,d]=o;i.delete(o);let f=l,g=c;for(s=[l,u],r.push(s);;){let b;if(i.has(h))b=h;else if(i.has(d))b=d;else break;i.delete(b),[l,c,u,h,d]=b,f!==l&&(s.push(f,g,l,g===c?c:u),f=l),g=g===c?u:c}s.push(f,g)}return new w3(r,a(this,dg),a(this,fg),a(this,pg))},Km=function(t){const e=a(this,gr);let i=0,r=e.length-1;for(;i<=r;){const s=i+r>>1,o=e[s][0];if(o===t)return s;o<t?i=s+1:r=s-1}return r+1},iP=function([,t,e]){const i=A(this,Nn,Km).call(this,t);a(this,gr).splice(i,0,[t,e])},rP=function([,t,e]){const i=A(this,Nn,Km).call(this,t);for(let r=i;r<a(this,gr).length;r++){const[s,o]=a(this,gr)[r];if(s!==t)break;if(s===t&&o===e){a(this,gr).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,o]=a(this,gr)[r];if(s!==t)break;if(s===t&&o===e){a(this,gr).splice(r,1);return}}},s1=function(t){const[e,i,r]=t,s=[[e,i,r]],o=A(this,Nn,Km).call(this,r);for(let l=0;l<o;l++){const[c,u]=a(this,gr)[l];for(let h=0,d=s.length;h<d;h++){const[,f,g]=s[h];if(!(u<=f||g<=c)){if(f>=c){if(g>u)s[h][1]=u;else{if(d===1)return[];s.splice(h,1),h--,d--}continue}s[h][2]=c,g>u&&s.push([e,u,g])}}}return s};var gg,Oh;class w3 extends X{constructor(e,i,r,s){super();y(this,gg);y(this,Oh);p(this,Oh,e),p(this,gg,i),this.firstPoint=r,this.lastPoint=s}toSVGPath(){const e=[];for(const i of a(this,Oh)){let[r,s]=i;e.push(`M${r} ${s}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===r?(e.push(`V${c}`),s=c):c===s&&(e.push(`H${l}`),r=l)}e.push("Z")}return e.join(" ")}serialize([e,i,r,s],o){const l=[],c=r-e,u=s-i;for(const h of a(this,Oh)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=s-h[f+1]*u;l.push(d)}return l}get box(){return a(this,gg)}get classNamesForOutlining(){return["highlightOutline"]}}gg=new WeakMap,Oh=new WeakMap;class o1 extends V0{newFreeDrawOutline(t,e,i,r,s,o){return new b3(t,e,i,r,s,o)}}class b3 extends tP{newOutliner(t,e,i,r,s,o=0){return new o1(t,e,i,r,s,o)}}var Bh,mg,Xs,tc,yg,Gn,vg,wg,ec,gi,mi,en,jh,$h,bn,Uh,Vi,bg,ut,a1,Qm,sP,oP,aP,l1,Ka,Yi,Kc,lP,Zm,Jm,cP,uP,hP,dP,fP;const _t=class _t extends qt{constructor(e){super({...e,name:"highlightEditor"});y(this,ut);y(this,Bh,null);y(this,mg,0);y(this,Xs);y(this,tc,null);y(this,yg,null);y(this,Gn,null);y(this,vg,null);y(this,wg,0);y(this,ec,null);y(this,gi,null);y(this,mi,null);y(this,en,!1);y(this,jh,null);y(this,$h,null);y(this,bn,null);y(this,Uh,"");y(this,Vi);y(this,bg,"");this.color=e.color||_t._defaultColor,p(this,Vi,e.thickness||_t._defaultThickness),this.opacity=e.opacity||_t._defaultOpacity,p(this,Xs,e.boxes||null),p(this,bg,e.methodOfCreation||""),p(this,Uh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(p(this,en,!0),A(this,ut,Qm).call(this,e),A(this,ut,Ka).call(this)):a(this,Xs)&&(p(this,Bh,e.anchorNode),p(this,mg,e.anchorOffset),p(this,vg,e.focusNode),p(this,wg,e.focusOffset),A(this,ut,a1).call(this),A(this,ut,Ka).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=_t.prototype;return ct(this,"_keyboardManager",new Ig([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,en)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Vi),methodOfCreation:a(this,bg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;qt.initialize(e,i),_t._defaultColor||(_t._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case yt.HIGHLIGHT_COLOR:_t._defaultColor=i;break;case yt.HIGHLIGHT_THICKNESS:_t._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,$h)}get commentButtonPosition(){return a(this,jh)}updateParams(e,i){switch(e){case yt.HIGHLIGHT_COLOR:A(this,ut,sP).call(this,i);break;case yt.HIGHLIGHT_THICKNESS:A(this,ut,oP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[yt.HIGHLIGHT_COLOR,_t._defaultColor],[yt.HIGHLIGHT_THICKNESS,_t._defaultThickness]]}get propertiesToUpdate(){return[[yt.HIGHLIGHT_COLOR,this.color||_t._defaultColor],[yt.HIGHLIGHT_THICKNESS,a(this,Vi)||_t._defaultThickness],[yt.HIGHLIGHT_FREE,a(this,en)]]}onUpdatedColor(){var e,i;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,mi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=a(this,yg))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",p(this,yg,new zf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,ut,Jm).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,A(this,ut,Jm).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,ut,l1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,ut,Ka).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?A(this,ut,l1).call(this):e&&(A(this,ut,Ka).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var s,o,l;const{drawLayer:i}=this.parent;let r;a(this,en)?(e=(e-this.rotation+360)%360,r=A(s=_t,Yi,Kc).call(s,a(this,gi).box,e)):r=A(o=_t,Yi,Kc).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,mi),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(a(this,bn),{bbox:A(l=_t,Yi,Kc).call(l,a(this,Gn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,Uh)&&(e.setAttribute("aria-label",a(this,Uh)),e.setAttribute("role","mark")),a(this,en)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,ut,lP).bind(this),{signal:this._uiManager._signal});const i=p(this,ec,document.createElement("div"));return e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,tc),this.setDims(this.width,this.height),F2(this,a(this,ec),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,bn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,bn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,ut,Zm).call(this,!0);break;case 1:case 3:A(this,ut,Zm).call(this,!1);break}}select(){var e;super.select(),a(this,bn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,bn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,bn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,bn),{rootClass:{selected:!1}}),a(this,en)||A(this,ut,Zm).call(this,!1))}get _mustFixPosition(){return!a(this,en)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,mi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,bn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:s,y:o}){const{x:l,y:c,width:u,height:h}=r.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),g=b=>{d.abort(),A(this,Yi,dP).call(this,e,b)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",ce,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ki,{signal:f}),r.addEventListener("pointermove",A(this,Yi,hP).bind(this,e),{signal:f}),this._freeHighlight=new o1({x:s,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var v,S,m,w;let s=null;if(e instanceof Uk){const{data:{quadPoints:x,rect:E,rotation:C,id:T,color:k,opacity:D,popupRef:M,richText:L,contentsObj:F,creationDate:B,modificationDate:z},parent:{page:{pageNumber:H}}}=e;s=e={annotationType:rt.HIGHLIGHT,color:Array.from(k),opacity:D,quadPoints:x,boxes:null,pageIndex:H-1,rect:E.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:M,richText:L,comment:(F==null?void 0:F.str)||null,creationDate:B,modificationDate:z}}else if(e instanceof ix){const{data:{inkLists:x,rect:E,rotation:C,id:T,color:k,borderStyle:{rawWidth:D},popupRef:M,richText:L,contentsObj:F,creationDate:B,modificationDate:z},parent:{page:{pageNumber:H}}}=e;s=e={annotationType:rt.HIGHLIGHT,color:Array.from(k),thickness:D,inkLists:x,boxes:null,pageIndex:H-1,rect:E.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:M,richText:L,comment:(F==null?void 0:F.str)||null,creationDate:B,modificationDate:z}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,i,r);h.color=q.makeHexColor(...o),h.opacity=u||1,c&&p(h,Vi,e.thickness),h._initialData=s,e.comment&&h.setCommentData(e);const[d,f]=h.pageDimensions,[g,b]=h.pageTranslation;if(l){const x=p(h,Xs,[]);for(let E=0;E<l.length;E+=8)x.push({x:(l[E]-g)/d,y:1-(l[E+1]-b)/f,width:(l[E+2]-l[E])/d,height:(l[E+1]-l[E+5])/f});A(v=h,ut,a1).call(v),A(S=h,ut,Ka).call(S),h.rotate(h.rotation)}else if(c){p(h,en,!0);const x=c[0],E={x:x[0]-g,y:f-(x[1]-b)},C=new o1(E,[0,0,d,f],1,a(h,Vi)/2,!0,.001);for(let D=0,M=x.length;D<M;D+=2)E.x=x[D]-g,E.y=f-(x[D+1]-b),C.add(E);const{id:T,clipPathId:k}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);A(m=h,ut,Qm).call(m,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),A(w=h,ut,Ka).call(w),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=qt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:i,opacity:this.opacity,thickness:a(this,Vi),quadPoints:A(this,ut,cP).call(this),outlines:A(this,ut,uP).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!A(this,ut,fP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Bh=new WeakMap,mg=new WeakMap,Xs=new WeakMap,tc=new WeakMap,yg=new WeakMap,Gn=new WeakMap,vg=new WeakMap,wg=new WeakMap,ec=new WeakMap,gi=new WeakMap,mi=new WeakMap,en=new WeakMap,jh=new WeakMap,$h=new WeakMap,bn=new WeakMap,Uh=new WeakMap,Vi=new WeakMap,bg=new WeakMap,ut=new WeakSet,a1=function(){const e=new r1(a(this,Xs),.001);p(this,gi,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,gi).box;const i=new r1(a(this,Xs),.0025,.001,this._uiManager.direction==="ltr");p(this,Gn,i.getOutlines());const{firstPoint:r}=a(this,gi);p(this,jh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:s}=a(this,Gn);p(this,$h,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Qm=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var f,g;if(p(this,gi,e),p(this,Gn,e.getNewOutline(a(this,Vi)/2+1.5,.0025)),i>=0)p(this,mi,i),p(this,tc,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),p(this,bn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Gn).box,path:{d:a(this,Gn).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,mi),{bbox:A(f=_t,Yi,Kc).call(f,a(this,gi).box,(b-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,bn),{bbox:A(g=_t,Yi,Kc).call(g,a(this,Gn).box,b),path:{d:a(this,Gn).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[b,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*v/b,this.height=u*b/v;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[b,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*v/b,this.height=u*b/v;break}}const{firstPoint:h}=e;p(this,jh,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,Gn);p(this,$h,[(d[0]-o)/c,(d[1]-l)/u])},sP=function(e){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},r=this.color,s=this.opacity;this.addCommands({cmd:i.bind(this,e,_t._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},oP=function(e){const i=a(this,Vi),r=s=>{p(this,Vi,s),A(this,ut,aP).call(this,s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},aP=function(e){a(this,en)&&(A(this,ut,Qm).call(this,{highlightOutlines:a(this,gi).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},l1=function(){a(this,mi)===null||!this.parent||(this.parent.drawLayer.remove(a(this,mi)),p(this,mi,null),this.parent.drawLayer.remove(a(this,bn)),p(this,bn,null))},Ka=function(e=this.parent){a(this,mi)===null&&({id:De(this,mi)._,clipPathId:De(this,tc)._}=e.drawLayer.draw({bbox:a(this,gi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,en)},path:{d:a(this,gi).toSVGPath()}},!1,!0),p(this,bn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,en)},bbox:a(this,Gn).box,path:{d:a(this,Gn).toSVGPath()}},a(this,en))),a(this,ec)&&(a(this,ec).style.clipPath=a(this,tc)))},Yi=new WeakSet,Kc=function([e,i,r,s],o){switch(o){case 90:return[1-i-s,e,s,r];case 180:return[1-e-r,1-i-s,r,s];case 270:return[i,1-e-r,s,r]}return[e,i,r,s]},lP=function(e){_t._keyboardManager.exec(this,e)},Zm=function(e){if(!a(this,Bh))return;const i=window.getSelection();e?i.setPosition(a(this,Bh),a(this,mg)):i.setPosition(a(this,vg),a(this,wg))},Jm=function(){return a(this,en)?this.rotation:0},cP=function(){if(a(this,en))return null;const[e,i]=this.pageDimensions,[r,s]=this.pageTranslation,o=a(this,Xs),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const g=u*e+r,b=(1-h)*i+s;l[c]=l[c+4]=g,l[c+1]=l[c+3]=b,l[c+2]=l[c+6]=g+d*e,l[c+5]=l[c+7]=b-f*i,c+=8}return l},uP=function(e){return a(this,gi).serialize(e,A(this,ut,Jm).call(this))},hP=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},dP=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},fP=function(e){const{color:i}=this._initialData;return this.hasEditedComment||e.color.some((r,s)=>r!==i[s])},y(_t,Yi),I(_t,"_defaultColor",null),I(_t,"_defaultOpacity",1),I(_t,"_defaultThickness",12),I(_t,"_type","highlight"),I(_t,"_editorType",rt.HIGHLIGHT),I(_t,"_freeHighlightId",-1),I(_t,"_freeHighlight",null),I(_t,"_freeHighlightClipId","");let W0=_t;var nc;class pP{constructor(){y(this,nc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,nc)[t]=e}toSVGProperties(){const t=a(this,nc);return p(this,nc,Object.create(null)),{root:t}}reset(){p(this,nc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Ht("Not implemented")}}nc=new WeakMap;var yi,zh,$e,ic,rc,ra,sa,oa,sc,xt,c1,u1,h1,Jd,gP,t0,tf,Qc;const K=class K extends qt{constructor(e){super(e);y(this,xt);y(this,yi,null);y(this,zh);I(this,"_colorPicker",null);I(this,"_drawId",null);p(this,zh,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(A(this,xt,c1).call(this,e),A(this,xt,Jd).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[s,o]of Object.entries(i))r.has(s)?Object.assign(e[s],o):e[s]=o;return e}static getDefaultDrawingOptions(e){Ht("Not implemented")}static get typesMap(){Ht("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(a(K,$e).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)e.push([r,i[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,s]of this.constructor.typesMap)e.push([r,i[s]]);return e}_updateProperty(e,i,r){const s=this._drawingOptions,o=s[i],l=c=>{var h;s.updateProperty(i,c);const u=a(this,yi).updateProperty(i,c);u&&A(this,xt,tf).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,K._mergeSVGProperties(a(this,yi).getPathResizingSVGProperties(A(this,xt,t0).call(this)),{bbox:A(this,xt,Qc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,K._mergeSVGProperties(a(this,yi).getPathResizedSVGProperties(A(this,xt,t0).call(this)),{bbox:A(this,xt,Qc).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:A(this,xt,Qc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,K._mergeSVGProperties(a(this,yi).getPathTranslatedSVGProperties(A(this,xt,t0).call(this),this.parentDimensions),{bbox:A(this,xt,Qc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,zh)&&(p(this,zh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,xt,h1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,xt,Jd).call(this),A(this,xt,tf).call(this,a(this,yi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,xt,h1).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,xt,Jd).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,K._mergeSVGProperties({bbox:A(this,xt,Qc).call(this)},a(this,yi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,xt,tf).call(this,a(this,yi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");return r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),r}static createDrawerInstance(e,i,r,s,o){Ht("Not implemented")}static startDrawing(e,i,r,s){var S;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=s;if(a(K,sa)&&a(K,sa)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:g}=o.getBoundingClientRect(),b=p(K,ic,new AbortController),v=e.combinedSignal(b);if(a(K,ra)||p(K,ra,u),a(K,sa)??p(K,sa,h),window.addEventListener("pointerup",m=>{var w;a(K,ra)===m.pointerId?this._endDraw(m):(w=a(K,oa))==null||w.delete(m.pointerId)},{signal:v}),window.addEventListener("pointercancel",m=>{var w;a(K,ra)===m.pointerId?this._currentParent.endDrawingSession():(w=a(K,oa))==null||w.delete(m.pointerId)},{signal:v}),window.addEventListener("pointerdown",m=>{a(K,sa)===m.pointerType&&((a(K,oa)||p(K,oa,new Set)).add(m.pointerId),a(K,$e).isCancellable()&&(a(K,$e).removeLastElement(),a(K,$e).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ki,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",m=>{m.timeStamp===a(K,sc)&&ce(m)},{signal:v}),e.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),a(K,$e)){e.drawLayer.updateProperties(this._currentDrawId,a(K,$e).startNew(l,c,f,g,d));return}i.updateUIForDefaultProperties(this),p(K,$e,this.createDrawerInstance(l,c,f,g,d)),p(K,rc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(K,rc).toSVGProperties(),a(K,$e).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(p(K,sc,-1),!a(K,$e))return;const{offsetX:i,offsetY:r,pointerId:s}=e;if(a(K,ra)===s){if(((o=a(K,oa))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(K,$e).add(i,r)),p(K,sc,e.timeStamp),ce(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,p(K,$e,null),p(K,rc,null),p(K,sa,null),p(K,sc,NaN)),a(K,ic)&&(a(K,ic).abort(),p(K,ic,null),p(K,ra,NaN),p(K,oa,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,a(K,$e).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(K,$e),s=this._currentDrawId,o=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,r.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:yt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(yt.DRAW_STEP),!a(K,$e).isEmpty()){const{pageDimensions:[r,s],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(K,$e).getOutlines(r*o,s*o,o,this._INNER_MARGIN),drawingOptions:a(K,rc),mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,s,o,l){Ht("Not implemented")}static async deserialize(e,i,r){var d,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,s,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,r);return h.createDrawingOptions(e),A(d=h,xt,c1).call(d,{drawOutlines:u}),A(f=h,xt,Jd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,r]=this.pageTranslation,[s,o]=this.pageDimensions;return a(this,yi).serialize([i,r,s,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};yi=new WeakMap,zh=new WeakMap,$e=new WeakMap,ic=new WeakMap,rc=new WeakMap,ra=new WeakMap,sa=new WeakMap,oa=new WeakMap,sc=new WeakMap,xt=new WeakSet,c1=function({drawOutlines:e,drawId:i,drawingOptions:r}){p(this,yi,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=A(this,xt,u1).call(this,e,this.parent),A(this,xt,tf).call(this,e.box)},u1=function(e,i){const{id:r}=i.drawLayer.draw(K._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},h1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Jd=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,xt,u1).call(this,a(this,yi),e)}},gP=function([e,i,r,s]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-e,r*(l/o),s*(o/l)];case 180:return[1-e,1-i,r,s];case 270:return[1-i,e,r*(l/o),s*(o/l)];default:return[e,i,r,s]}},t0=function(){const{x:e,y:i,width:r,height:s,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,e,r*(o/l),s*(l/o)];case 180:return[1-e,1-i,r,s];case 270:return[i,1-e,r*(o/l),s*(l/o)];default:return[e,i,r,s]}},tf=function(e){[this.x,this.y,this.width,this.height]=A(this,xt,gP).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Qc=function(){const{x:e,y:i,width:r,height:s,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-s,e,s,r];case 2:return[1-e-r,1-i-s,r,s];case 3:return[i,1-e-r,s,r];case 4:return[e,i-r*(c/u),s*(u/c),r*(c/u)];case 5:return[1-i,e,r*(c/u),s*(u/c)];case 6:return[1-e-s*(u/c),1-i,s*(u/c),r*(c/u)];case 7:return[i-r*(c/u),1-e-s*(u/c),r*(c/u),s*(u/c)];case 8:return[e-r,i-s,r,s];case 9:return[1-i,e-r,s,r];case 10:return[1-e,1-i,r,s];case 11:return[i-s,1-e,s,r];case 12:return[e-s*(u/c),i,s*(u/c),r*(c/u)];case 13:return[1-i-r*(c/u),e-s*(u/c),r*(c/u),s*(u/c)];case 14:return[1-e,1-i-r*(c/u),s*(u/c),r*(c/u)];case 15:return[i,1-e,r*(c/u),s*(u/c)];default:return[e,i,r,s]}},I(K,"_currentDrawId",-1),I(K,"_currentParent",null),y(K,$e,null),y(K,ic,null),y(K,rc,null),y(K,ra,NaN),y(K,sa,null),y(K,oa,null),y(K,sc,NaN),I(K,"_INNER_MARGIN",3);let G0=K;var Qr,Ue,ze,oc,Hh,Tn,nn,Wi,ac,lc,cc,Vh,e0;class A3{constructor(t,e,i,r,s,o){y(this,Vh);y(this,Qr,new Float64Array(6));y(this,Ue);y(this,ze);y(this,oc);y(this,Hh);y(this,Tn);y(this,nn,"");y(this,Wi,0);y(this,ac,new Bg);y(this,lc);y(this,cc);p(this,lc,i),p(this,cc,r),p(this,oc,s),p(this,Hh,o),[t,e]=A(this,Vh,e0).call(this,t,e);const l=p(this,Ue,[NaN,NaN,NaN,NaN,t,e]);p(this,Tn,[t,e]),p(this,ze,[{line:l,points:a(this,Tn)}]),a(this,Qr).set(l,0)}updateProperty(t,e){t==="stroke-width"&&p(this,Hh,e)}isEmpty(){return!a(this,ze)||a(this,ze).length===0}isCancellable(){return a(this,Tn).length<=10}add(t,e){[t,e]=A(this,Vh,e0).call(this,t,e);const[i,r,s,o]=a(this,Qr).subarray(2,6),l=t-s,c=e-o;return Math.hypot(a(this,lc)*l,a(this,cc)*c)<=2?null:(a(this,Tn).push(t,e),isNaN(i)?(a(this,Qr).set([s,o,t,e],2),a(this,Ue).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Qr)[0])&&a(this,Ue).splice(6,6),a(this,Qr).set([i,r,s,o,t,e],0),a(this,Ue).push(...X.createBezierPoints(i,r,s,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,Tn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,s){p(this,lc,i),p(this,cc,r),p(this,oc,s),[t,e]=A(this,Vh,e0).call(this,t,e);const o=p(this,Ue,[NaN,NaN,NaN,NaN,t,e]);p(this,Tn,[t,e]);const l=a(this,ze).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ze).push({line:o,points:a(this,Tn)}),a(this,Qr).set(o,0),p(this,Wi,0),this.toSVGPath(),null}getLastElement(){return a(this,ze).at(-1)}setLastElement(t){return a(this,ze)?(a(this,ze).push(t),p(this,Ue,t.line),p(this,Tn,t.points),p(this,Wi,0),{path:{d:this.toSVGPath()}}):a(this,ac).setLastElement(t)}removeLastElement(){if(!a(this,ze))return a(this,ac).removeLastElement();a(this,ze).pop(),p(this,nn,"");for(let t=0,e=a(this,ze).length;t<e;t++){const{line:i,points:r}=a(this,ze)[t];p(this,Ue,i),p(this,Tn,r),p(this,Wi,0),this.toSVGPath()}return{path:{d:a(this,nn)}}}toSVGPath(){const t=X.svgRound(a(this,Ue)[4]),e=X.svgRound(a(this,Ue)[5]);if(a(this,Tn).length===2)return p(this,nn,`${a(this,nn)} M ${t} ${e} Z`),a(this,nn);if(a(this,Tn).length<=6){const r=a(this,nn).lastIndexOf("M");p(this,nn,`${a(this,nn).slice(0,r)} M ${t} ${e}`),p(this,Wi,6)}if(a(this,Tn).length===4){const r=X.svgRound(a(this,Ue)[10]),s=X.svgRound(a(this,Ue)[11]);return p(this,nn,`${a(this,nn)} L ${r} ${s}`),p(this,Wi,12),a(this,nn)}const i=[];a(this,Wi)===0&&(i.push(`M ${t} ${e}`),p(this,Wi,6));for(let r=a(this,Wi),s=a(this,Ue).length;r<s;r+=6){const[o,l,c,u,h,d]=a(this,Ue).slice(r,r+6).map(X.svgRound);i.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return p(this,nn,a(this,nn)+i.join(" ")),p(this,Wi,a(this,Ue).length),a(this,nn)}getOutlines(t,e,i,r){const s=a(this,ze).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),a(this,ac).build(a(this,ze),t,e,i,a(this,oc),a(this,Hh),r),p(this,Qr,null),p(this,Ue,null),p(this,ze,null),p(this,nn,null),a(this,ac)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Qr=new WeakMap,Ue=new WeakMap,ze=new WeakMap,oc=new WeakMap,Hh=new WeakMap,Tn=new WeakMap,nn=new WeakMap,Wi=new WeakMap,ac=new WeakMap,lc=new WeakMap,cc=new WeakMap,Vh=new WeakSet,e0=function(t,e){return X._normalizePoint(t,e,a(this,lc),a(this,cc),a(this,oc))};var kn,Ag,xg,vi,Zr,Jr,Wh,Gh,uc,an,fs,mP,yP,vP;class Bg extends X{constructor(){super(...arguments);y(this,an);y(this,kn);y(this,Ag,0);y(this,xg);y(this,vi);y(this,Zr);y(this,Jr);y(this,Wh);y(this,Gh);y(this,uc)}build(e,i,r,s,o,l,c){p(this,Zr,i),p(this,Jr,r),p(this,Wh,s),p(this,Gh,o),p(this,uc,l),p(this,xg,c??0),p(this,vi,e),A(this,an,yP).call(this)}get thickness(){return a(this,uc)}setLastElement(e){return a(this,vi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,vi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,vi)){if(e.push(`M${X.svgRound(i[4])} ${X.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${X.svgRound(i[10])} ${X.svgRound(i[11])}`);continue}for(let r=6,s=i.length;r<s;r+=6){const[o,l,c,u,h,d]=i.subarray(r,r+6).map(X.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,r,s],o){const l=[],c=[],[u,h,d,f]=A(this,an,mP).call(this);let g,b,v,S,m,w,x,E,C;switch(a(this,Gh)){case 0:C=X._rescale,g=e,b=i+s,v=r,S=-s,m=e+u*r,w=i+(1-h-f)*s,x=e+(u+d)*r,E=i+(1-h)*s;break;case 90:C=X._rescaleAndSwap,g=e,b=i,v=r,S=s,m=e+h*r,w=i+u*s,x=e+(h+f)*r,E=i+(u+d)*s;break;case 180:C=X._rescale,g=e+r,b=i,v=-r,S=s,m=e+(1-u-d)*r,w=i+h*s,x=e+(1-u)*r,E=i+(h+f)*s;break;case 270:C=X._rescaleAndSwap,g=e+r,b=i+s,v=-r,S=-s,m=e+(1-h-f)*r,w=i+(1-u-d)*s,x=e+(1-h)*r,E=i+(1-u)*s;break}for(const{line:T,points:k}of a(this,vi))l.push(C(T,g,b,v,S,o?new Array(T.length):null)),c.push(C(k,g,b,v,S,o?new Array(k.length):null));return{lines:l,points:c,rect:[m,w,x,E]}}static deserialize(e,i,r,s,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,g,b,v,S;switch(u){case 0:S=X._rescale,f=-e/r,g=i/s+1,b=1/r,v=-1/s;break;case 90:S=X._rescaleAndSwap,f=-i/s,g=-e/r,b=1/s,v=1/r;break;case 180:S=X._rescale,f=e/r+1,g=-i/s,b=-1/r,v=1/s;break;case 270:S=X._rescaleAndSwap,f=i/s+1,g=e/r+1,b=-1/s,v=-1/r;break}if(!l){l=[];for(const w of c){const x=w.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const E=new Float32Array(3*(x-2));l.push(E);let[C,T,k,D]=w.subarray(0,4);E.set([NaN,NaN,NaN,NaN,C,T],0);for(let M=4;M<x;M+=2){const L=w[M],F=w[M+1];E.set(X.createBezierPoints(C,T,k,D,L,F),(M-2)*3),[C,T,k,D]=[k,D,L,F]}}}for(let w=0,x=l.length;w<x;w++)d.push({line:S(l[w].map(E=>E??NaN),f,g,b,v),points:S(c[w].map(E=>E??NaN),f,g,b,v)});const m=new this.prototype.constructor;return m.build(d,r,s,1,u,h,o),m}get box(){return a(this,kn)}updateProperty(e,i){return e==="stroke-width"?A(this,an,vP).call(this,i):null}updateParentDimensions([e,i],r){const[s,o]=A(this,an,fs).call(this);p(this,Zr,e),p(this,Jr,i),p(this,Wh,r);const[l,c]=A(this,an,fs).call(this),u=l-s,h=c-o,d=a(this,kn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return p(this,Ag,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,kn).map(X.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,kn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,kn);let r=0,s=0,o=0,l=0,c=0,u=0;switch(a(this,Ag)){case 90:s=i/e,o=-e/i,c=e;break;case 180:r=-1,l=-1,c=e,u=i;break;case 270:s=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${r} ${s} ${o} ${l} ${X.svgRound(c)} ${X.svgRound(u)})`}getPathResizingSVGProperties([e,i,r,s]){const[o,l]=A(this,an,fs).call(this),[c,u,h,d]=a(this,kn);if(Math.abs(h-o)<=X.PRECISION||Math.abs(d-l)<=X.PRECISION){const S=e+r/2-(c+h/2),m=i+s/2-(u+d/2);return{path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${m})`}}}const f=(r-2*o)/(h-2*o),g=(s-2*l)/(d-2*l),b=h/r,v=d/s;return{path:{"transform-origin":`${X.svgRound(c)} ${X.svgRound(u)}`,transform:`${this.rotationTransform} scale(${b} ${v}) translate(${X.svgRound(o)} ${X.svgRound(l)}) scale(${f} ${g}) translate(${X.svgRound(-o)} ${X.svgRound(-l)})`}}}getPathResizedSVGProperties([e,i,r,s]){const[o,l]=A(this,an,fs).call(this),c=a(this,kn),[u,h,d,f]=c;if(c[0]=e,c[1]=i,c[2]=r,c[3]=s,Math.abs(d-o)<=X.PRECISION||Math.abs(f-l)<=X.PRECISION){const m=e+r/2-(u+d/2),w=i+s/2-(h+f/2);for(const{line:x,points:E}of a(this,vi))X._translate(x,m,w,x),X._translate(E,m,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*o)/(d-2*o),b=(s-2*l)/(f-2*l),v=-g*(u+o)+e+o,S=-b*(h+l)+i+l;if(g!==1||b!==1||v!==0||S!==0)for(const{line:m,points:w}of a(this,vi))X._rescale(m,v,S,g,b,m),X._rescale(w,v,S,g,b,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[s,o]=r,l=a(this,kn),c=e-l[0],u=i-l[1];if(a(this,Zr)===s&&a(this,Jr)===o)for(const{line:h,points:d}of a(this,vi))X._translate(h,c,u,h),X._translate(d,c,u,d);else{const h=a(this,Zr)/s,d=a(this,Jr)/o;p(this,Zr,s),p(this,Jr,o);for(const{line:f,points:g}of a(this,vi))X._rescale(f,c,u,h,d,f),X._rescale(g,c,u,h,d,g);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,kn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e[0])} ${X.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}kn=new WeakMap,Ag=new WeakMap,xg=new WeakMap,vi=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,uc=new WeakMap,an=new WeakSet,fs=function(e=a(this,uc)){const i=a(this,xg)+e/2*a(this,Wh);return a(this,Gh)%180===0?[i/a(this,Zr),i/a(this,Jr)]:[i/a(this,Jr),i/a(this,Zr)]},mP=function(){const[e,i,r,s]=a(this,kn),[o,l]=A(this,an,fs).call(this,0);return[e+o,i+l,r-2*o,s-2*l]},yP=function(){const e=p(this,kn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of a(this,vi)){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6)q.pointBoundingBox(s[c],s[c+1],e);continue}let o=s[4],l=s[5];for(let c=6,u=s.length;c<u;c+=6){const[h,d,f,g,b,v]=s.subarray(c,c+6);q.bezierBoundingBox(o,l,h,d,f,g,b,v,e),o=b,l=v}}const[i,r]=A(this,an,fs).call(this);e[0]=An(e[0]-i,0,1),e[1]=An(e[1]-r,0,1),e[2]=An(e[2]+i,0,1),e[3]=An(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},vP=function(e){const[i,r]=A(this,an,fs).call(this);p(this,uc,e);const[s,o]=A(this,an,fs).call(this),[l,c]=[s-i,o-r],u=a(this,kn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class iv extends pP{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:qt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new iv(this._viewParameters);return t.updateAll(this),t}}var dy,wP;const yu=class yu extends G0{constructor(e){super({...e,name:"inkEditor"});y(this,dy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){qt.initialize(e,i),this._defaultDrawingOptions=new iv(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return ct(this,"typesMap",new Map([[yt.INK_THICKNESS,"stroke-width"],[yt.INK_COLOR,"stroke"],[yt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,s,o){return new A3(e,i,r,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,s,o,l){return Bg.deserialize(e,i,r,s,o,l)}static async deserialize(e,i,r){let s=null;if(e instanceof ix){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:b,richText:v,contentsObj:S,creationDate:m,modificationDate:w},parent:{page:{pageNumber:x}}}=e;s=e={annotationType:rt.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:l},boxes:null,pageIndex:x-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:v,comment:(S==null?void 0:S.str)||null,creationDate:m,modificationDate:w}}const o=await super.deserialize(e,i,r);return o._initialData=s,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new H0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return yt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=yu.getDefaultDrawingOptions({stroke:q.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:qt._colorManager.convert(s),opacity:o,thickness:l,paths:{lines:i,points:r}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!A(this,dy,wP).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};dy=new WeakSet,wP=function(e){const{color:i,thickness:r,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==i[c])||e.thickness!==r||e.opacity!==s||e.pageIndex!==o},I(yu,"_type","ink"),I(yu,"_editorType",rt.INK),I(yu,"_defaultDrawingOptions",null);let d1=yu;class f1 extends Bg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const gm=8,Dd=3;var hc,Tt,p1,mr,bP,AP,g1,n0,xP,SP,EP,m1,y1,_P;class rs{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},s,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${r} ${d}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:b,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:m,fontBoundingBoxDescent:w,width:x}=h.measureText(t),E=1.5,C=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||0,x)*E),T=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||d,Math.abs(m)+Math.abs(w)||d)*E);u=new OffscreenCanvas(C,T),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,C,T),h.fillStyle="black",h.fillText(t,C*(E-1)/2,T*(3-E)/2);const k=A(this,Tt,m1).call(this,h.getImageData(0,0,C,T).data),D=A(this,Tt,EP).call(this,k),M=A(this,Tt,y1).call(this,D),L=A(this,Tt,g1).call(this,k,C,T,M);return this.processDrawnLines({lines:{curves:L,width:C,height:T},pageWidth:s,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,s){const[o,l,c]=A(this,Tt,_P).call(this,t),[u,h]=A(this,Tt,SP).call(this,o,l,c,Math.hypot(l,c)*a(this,hc).sigmaSFactor,a(this,hc).sigmaR,a(this,hc).kernelSize),d=A(this,Tt,y1).call(this,h),f=A(this,Tt,g1).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:o,areContours:l}){r%180!==0&&([e,i]=[i,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],g=Math.min(e/u,i/h),b=g/e,v=g/i,S=[];for(const{points:w}of c){const x=o?A(this,Tt,xP).call(this,w):w;if(!x)continue;S.push(x);const E=x.length,C=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(f.push({line:T,points:C}),E===2){C[0]=x[0]*b,C[1]=x[1]*v,T.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[k,D,M,L]=x;k*=b,D*=v,M*=b,L*=v,C.set([k,D,M,L],0),T.set([NaN,NaN,NaN,NaN,k,D],0);for(let F=4;F<E;F+=2){const B=C[F]=x[F]*b,z=C[F+1]=x[F+1]*v;T.set(X.createBezierPoints(k,D,M,L,B,z),(F-2)*3),[k,D,M,L]=[M,L,B,z]}}if(f.length===0)return null;const m=l?new f1:new Bg;return m.build(f,e,i,1,r,l?0:d,s),{outline:m,newCurves:S,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:s}){let o=1/0,l=-1/0,c=0;for(const x of t){c+=x.length;for(let E=2,C=x.length;E<C;E++){const T=x[E]-x[E-2];o=Math.min(o,T),l=Math.max(l,T)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=gm+Dd*h,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=r,f[g++]=s,f[g++]=e?0:1,f[g++]=Math.max(0,Math.floor(i??0)),f[g++]=h,f[g++]=u.BYTES_PER_ELEMENT;for(const x of t)f[g++]=x.length-2,f[g++]=x[0],f[g++]=x[1];const b=new CompressionStream("deflate-raw"),v=b.writable.getWriter();await v.ready,v.write(f);const S=u.prototype.constructor;for(const x of t){const E=new S(x.length-2);for(let C=2,T=x.length;C<T;C++)E[C-2]=x[C]-x[C-2];v.write(E)}v.close();const m=await new Response(b.readable).arrayBuffer(),w=new Uint8Array(m);return x2(w)}static async decompressSignature(t){try{const e=GB(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,l=0;for await(const x of i)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,l),l+=x.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,g=c[5],b=c[6],v=c[7],S=[],m=(gm+Dd*b)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(v){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,m);break}l=0;for(let x=0;x<b;x++){const E=c[Dd*x+gm],C=new Float32Array(E+2);S.push(C);for(let T=0;T<Dd-1;T++)C[T]=c[Dd*x+gm+T+1];for(let T=0;T<E;T++)C[T+2]=C[T]+w[l++]}return{areContours:f,thickness:g,outlines:S,width:h,height:d}}catch(e){return st(`decompressSignature: ${e}`),null}}}hc=new WeakMap,Tt=new WeakSet,p1=function(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r},mr=new WeakMap,bP=function(t,e,i,r,s,o,l){const c=A(this,Tt,p1).call(this,i,r,s,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,mr)[2*h],f=a(this,mr)[2*h+1];if(t[(i+d)*e+(r+f)]!==0)return h}return-1},AP=function(t,e,i,r,s,o,l){const c=A(this,Tt,p1).call(this,i,r,s,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,mr)[2*h],f=a(this,mr)[2*h+1];if(t[(i+d)*e+(r+f)]!==0)return h}return-1},g1=function(t,e,i,r){const s=t.length,o=new Int32Array(s);for(let h=0;h<s;h++)o[h]=t[h]<=r?1:0;for(let h=1;h<i-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*i-1-h]=0;let l=1,c;const u=[];for(let h=1;h<i-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,g=o[f];if(g===0)continue;let b=h,v=d;if(g===1&&o[f-1]===0)l+=1,v-=1;else if(g>=1&&o[f+1]===0)l+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const S=[d,h],m=v===d+1,w={isHole:m,points:S,id:l,parent:0};u.push(w);let x;for(const F of u)if(F.id===c){x=F;break}x?x.isHole?w.parent=m?x.parent:c:w.parent=m?c:x.parent:w.parent=m?c:0;const E=A(this,Tt,bP).call(this,o,e,h,d,b,v,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let C=a(this,mr)[2*E],T=a(this,mr)[2*E+1];const k=h+C,D=d+T;b=k,v=D;let M=h,L=d;for(;;){const F=A(this,Tt,AP).call(this,o,e,M,L,b,v,1);C=a(this,mr)[2*F],T=a(this,mr)[2*F+1];const B=M+C,z=L+T;S.push(z,B);const H=M*e+L;if(o[H+1]===0?o[H]=-l:o[H]===1&&(o[H]=l),B===h&&z===d&&M===k&&L===D){o[f]!==1&&(c=Math.abs(o[f]));break}else b=M,v=L,M=B,L=z}}}return u},n0=function(t,e,i,r){if(i-e<=4){for(let k=e;k<i-2;k+=2)r.push(t[k],t[k+1]);return}const s=t[e],o=t[e+1],l=t[i-4]-s,c=t[i-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*s,g=c/l,b=1/u,v=Math.atan(g),S=Math.cos(v),m=Math.sin(v),w=b*(Math.abs(S)+Math.abs(m)),x=b*(1-w+w**2),E=Math.max(Math.atan(Math.abs(m+S)*x),Math.atan(Math.abs(m-S)*x));let C=0,T=e;for(let k=e+2;k<i-2;k+=2){const D=Math.abs(f-h*t[k+1]+d*t[k]);D>C&&(T=k,C=D)}C>(u*E)**2?(A(this,Tt,n0).call(this,t,e,T+2,r),A(this,Tt,n0).call(this,t,T,i,r)):r.push(s,o)},xP=function(t){const e=[],i=t.length;return A(this,Tt,n0).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},SP=function(t,e,i,r,s,o){const l=new Float32Array(o**2),c=-2*r**2,u=o>>1;for(let v=0;v<o;v++){const S=(v-u)**2;for(let m=0;m<o;m++)l[v*o+m]=Math.exp((S+(m-u)**2)/c)}const h=new Float32Array(256),d=-2*s**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/d);const f=t.length,g=new Uint8Array(f),b=new Uint32Array(256);for(let v=0;v<i;v++)for(let S=0;S<e;S++){const m=v*e+S,w=t[m];let x=0,E=0;for(let T=0;T<o;T++){const k=v+T-u;if(!(k<0||k>=i))for(let D=0;D<o;D++){const M=S+D-u;if(M<0||M>=e)continue;const L=t[k*e+M],F=l[T*o+D]*h[Math.abs(L-w)];x+=L*F,E+=F}}const C=g[m]=Math.round(x/E);b[C]++}return[g,b]},EP=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},m1=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let r=-1/0,s=1/0;for(let l=0,c=i.length;l<c;l++){const u=i[l]=t[l<<2];r=Math.max(r,u),s=Math.min(s,u)}const o=255/(r-s);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-s)*o;return i},y1=function(t){let e,i=-1/0,r=-1/0;const s=t.findIndex(c=>c!==0);let o=s,l=s;for(e=s;e<256;e++){const c=t[e];c>i&&(e-o>r&&(r=e-o,l=e-1),i=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},_P=function(t){const e=t,{width:i,height:r}=t,{maxDim:s}=a(this,hc);let o=i,l=r;if(i>s||r>s){let f=i,g=r,b=Math.log2(Math.max(i,r)/s);const v=Math.floor(b);b=b===v?v-1:v;for(let m=0;m<b;m++){o=Math.ceil(f/2),l=Math.ceil(g/2);const w=new OffscreenCanvas(o,l);w.getContext("2d").drawImage(t,0,0,f,g,0,0,o,l),f=o,g=l,t!==e&&t.close(),t=w.transferToImageBitmap()}const S=Math.min(s/o,s/l);o=Math.round(o*S),l=Math.round(l*S)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[A(this,Tt,m1).call(this,h),o,l]},y(rs,Tt),y(rs,hc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),y(rs,mr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class sx extends pP{constructor(){super(),super.updateProperties({fill:qt._defaultLineColor,"stroke-width":0})}clone(){const t=new sx;return t.updateAll(this),t}}class ox extends iv{constructor(t){super(t),super.updateProperties({stroke:qt._defaultLineColor,"stroke-width":1})}clone(){const t=new ox(this._viewParameters);return t.updateAll(this),t}}var aa,ts,la,dc;const ei=class ei extends G0{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});y(this,aa,!1);y(this,ts,null);y(this,la,null);y(this,dc,null);this._willKeepAspectRatio=!0,p(this,la,e.signatureData||null),p(this,ts,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){qt.initialize(e,i),this._defaultDrawingOptions=new sx,this._defaultDrawnSignatureOptions=new ox(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,ts)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(a(this,la)){const{lines:s,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,la),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,b=rs.processDrawnLines({lines:s,pageWidth:d,pageHeight:f,rotation:g,innerMargin:ei._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,ts)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){p(this,dc,e),this.addEditToolbar()}getUuid(){return a(this,dc)}get description(){return a(this,ts)}set description(e){p(this,ts,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:r,width:s,height:o}=a(this,la),l=Math.max(s,o),c=rs.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:r,width:s,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,r,s){const{x:o,y:l}=this,{outline:c}=p(this,la,e);p(this,aa,c instanceof f1),this.description=r;let u;a(this,aa)?u=ei.getDefaultDrawingOptions():(u=ei._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=i/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return rs.process(e,i,r,s,ei._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:r,pageHeight:s},rotation:o}=this.parent.viewport;return rs.extractContoursFromText(e,i,r,s,o,ei._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return rs.processDrawnLines({lines:e,pageWidth:i,pageHeight:r,rotation:s,innerMargin:ei._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=ei.getDefaultDrawingOptions():(this._drawingOptions=ei._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,aa),color:[0,0,0],thickness:a(this,aa)?0:s});return this.addComment(o),e?(o.paths={lines:i,points:r},o.uuid=a(this,dc),o.isCopy=!0):o.lines=i,a(this,ts)&&(o.accessibilityData={type:"Figure",alt:a(this,ts)}),o}static deserializeDraw(e,i,r,s,o,l){return l.areContours?f1.deserialize(e,i,r,s,o,l):Bg.deserialize(e,i,r,s,o,l)}static async deserialize(e,i,r){var o;const s=await super.deserialize(e,i,r);return p(s,aa,e.areContours),s.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",p(s,dc,e.uuid),s}};aa=new WeakMap,ts=new WeakMap,la=new WeakMap,dc=new WeakMap,I(ei,"_type","signature"),I(ei,"_editorType",rt.SIGNATURE),I(ei,"_defaultDrawingOptions",null);let v1=ei;var re,He,ca,qs,ua,Xh,Ys,fc,es,wi,qh,St,ef,nf,i0,r0,s0,b1,o0,CP;class w1 extends qt{constructor(e){super({...e,name:"stampEditor"});y(this,St);y(this,re,null);y(this,He,null);y(this,ca,null);y(this,qs,null);y(this,ua,null);y(this,Xh,"");y(this,Ys,null);y(this,fc,!1);y(this,es,null);y(this,wi,!1);y(this,qh,!1);p(this,qs,e.bitmapUrl),p(this,ua,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){qt.initialize(e,i)}static isHandlingMimeForPasting(e){return B0.includes(e)}static paste(e,i){i.pasteEditor({mode:rt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:o,height:l,channels:s.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,He)&&(p(this,re,null),this._uiManager.imageManager.deleteId(a(this,He)),(e=a(this,Ys))==null||e.remove(),p(this,Ys,null),a(this,es)&&(clearTimeout(a(this,es)),p(this,es,null))),super.remove()}rebuild(){if(!this.parent){a(this,He)&&A(this,St,i0).call(this);return}super.rebuild(),this.div!==null&&(a(this,He)&&a(this,Ys)===null&&A(this,St,i0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,ca)||a(this,re)||a(this,qs)||a(this,ua)||a(this,He)||a(this,fc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,fc)||(a(this,re)?A(this,St,r0).call(this):A(this,St,i0).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(p(this,He,r),s&&p(this,re,s),p(this,fc,!1),A(this,St,r0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,es)!==null&&clearTimeout(a(this,es)),p(this,es,setTimeout(()=>{p(this,es,null),A(this,St,b1).call(this)},200))}copyCanvas(e,i,r=!1){e||(e=224);const{width:s,height:o}=a(this,re),l=new _r;let c=a(this,re),u=s,h=o,d=null;if(i){if(s>i||o>i){const k=Math.min(i/s,i/o);u=Math.floor(s*k),h=Math.floor(o*k)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*l.sx),b=d.height=Math.ceil(h*l.sy);a(this,wi)||(c=A(this,St,s0).call(this,g,b));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let S="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":YB.isDarkMode&&(S="#8f8f9d",m="#42414d");const w=15,x=w*l.sx,E=w*l.sy,C=new OffscreenCanvas(x*2,E*2),T=C.getContext("2d");T.fillStyle=S,T.fillRect(0,0,x*2,E*2),T.fillStyle=m,T.fillRect(0,0,x,E),T.fillRect(x,E,x,E),v.fillStyle=v.createPattern(C,"repeat"),v.fillRect(0,0,g,b),v.drawImage(c,0,0,c.width,c.height,0,0,g,b)}let f=null;if(r){let g,b;if(l.symmetric&&c.width<e&&c.height<e)g=c.width,b=c.height;else if(c=a(this,re),s>e||o>e){const m=Math.min(e/s,e/o);g=Math.floor(s*m),b=Math.floor(o*m),a(this,wi)||(c=A(this,St,s0).call(this,g,b))}const S=new OffscreenCanvas(g,b).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,g,b),f={width:g,height:b,data:S.getImageData(0,0,g,b).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,r){var S;let s=null,o=!1;if(e instanceof zk){const{data:{rect:m,rotation:w,id:x,structParent:E,popupRef:C,richText:T,contentsObj:k,creationDate:D,modificationDate:M},container:L,parent:{page:{pageNumber:F}},canvas:B}=e;let z,H;B?(delete e.canvas,{id:z,bitmap:H}=r.imageManager.getFromCanvas(L.id,B),B.remove()):(o=!0,e._hasNoCanvas=!0);const et=((S=await i._structTree.getAriaAttributes(`${XA}${x}`))==null?void 0:S.get("aria-label"))||"";s=e={annotationType:rt.STAMP,bitmapId:z,bitmap:H,pageIndex:F-1,rect:m.slice(0),rotation:w,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:et},isSvg:!1,structParent:E,popupRef:C,richText:T,comment:(k==null?void 0:k.str)||null,creationDate:D,modificationDate:M}}const l=await super.deserialize(e,i,r),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:g}=e;o?(r.addMissingCanvas(e.id,l),p(l,fc,!0)):d&&r.imageManager.isValidId(d)?(p(l,He,d),u&&p(l,re,u)):p(l,qs,h),p(l,wi,f);const[b,v]=l.pageDimensions;return l.width=(c[2]-c[0])/b,l.height=(c[3]-c[1])/v,g&&(l.altTextData=g),l._initialData=s,e.comment&&l.setCommentData(e),p(l,qh,!!s),l}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:a(this,He),isSvg:a(this,wi)});if(this.addComment(r),e)return r.bitmapUrl=A(this,St,o0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,St,CP).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(i===null)return r;i.stamps||(i.stamps=new Map);const l=a(this,wi)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(a(this,He)))i.stamps.set(a(this,He),{area:l,serialized:r}),r.bitmap=A(this,St,o0).call(this,!1);else if(a(this,wi)){const c=i.stamps.get(a(this,He));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,St,o0).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}re=new WeakMap,He=new WeakMap,ca=new WeakMap,qs=new WeakMap,ua=new WeakMap,Xh=new WeakMap,Ys=new WeakMap,fc=new WeakMap,es=new WeakMap,wi=new WeakMap,qh=new WeakMap,St=new WeakSet,ef=function(e,i=!1){if(!e){this.remove();return}p(this,re,e.bitmap),i||(p(this,He,e.id),p(this,wi,e.isSvg)),e.file&&p(this,Xh,e.file.name),A(this,St,r0).call(this)},nf=function(){if(p(this,ca,null),this._uiManager.enableWaiting(!1),!!a(this,Ys)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,re)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,re)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},i0=function(){if(a(this,He)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,He)).then(r=>A(this,St,ef).call(this,r,!0)).finally(()=>A(this,St,nf).call(this));return}if(a(this,qs)){const r=a(this,qs);p(this,qs,null),this._uiManager.enableWaiting(!0),p(this,ca,this._uiManager.imageManager.getFromUrl(r).then(s=>A(this,St,ef).call(this,s)).finally(()=>A(this,St,nf).call(this)));return}if(a(this,ua)){const r=a(this,ua);p(this,ua,null),this._uiManager.enableWaiting(!0),p(this,ca,this._uiManager.imageManager.getFromFile(r).then(s=>A(this,St,ef).call(this,s)).finally(()=>A(this,St,nf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=B0.join(",");const i=this._uiManager._signal;p(this,ca,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,St,ef).call(this,s)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>A(this,St,nf).call(this))),e.click()},r0=function(){var u;const{div:e}=this;let{width:i,height:r}=a(this,re);const[s,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*s,r=this.height*o;else if(i>l*s||r>l*o){const h=Math.min(l*s/i,l*o/r);i*=h,r*=h}this._uiManager.enableWaiting(!1);const c=p(this,Ys,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/s,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,St,b1).call(this),a(this,qh)||(this.parent.addUndoableEditor(this),p(this,qh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Xh)&&this.div.setAttribute("aria-description",a(this,Xh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},s0=function(e,i){const{width:r,height:s}=a(this,re);let o=r,l=s,c=a(this,re);for(;o>2*e||l>2*i;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},b1=function(){const[e,i]=this.parentDimensions,{width:r,height:s}=this,o=new _r,l=Math.ceil(r*e*o.sx),c=Math.ceil(s*i*o.sy),u=a(this,Ys);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,wi)?a(this,re):A(this,St,s0).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},o0=function(e){if(e){if(a(this,wi)){const s=this._uiManager.imageManager.getSvgUrl(a(this,He));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,re),i.getContext("2d").drawImage(a(this,re),0,0),i.toDataURL()}if(a(this,wi)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*co.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*co.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,o);return l.getContext("2d").drawImage(a(this,re),0,0,a(this,re).width,a(this,re).height,0,0,s,o),l.transferToImageBitmap()}return structuredClone(a(this,re))},CP=function(e){var l;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=e.pageIndex===i,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},I(w1,"_type","stamp"),I(w1,"_editorType",rt.STAMP);var pc,Yh,ha,da,Ks,Xn,fa,Kh,Qh,yr,Qs,Ve,Zs,pa,Zh,Q,ga,zt,A1,TP,Dr,x1,S1,a0;const sr=class sr{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){y(this,zt);y(this,pc);y(this,Yh,!1);y(this,ha,null);y(this,da,null);y(this,Ks,null);y(this,Xn,new Map);y(this,fa,!1);y(this,Kh,!1);y(this,Qh,!1);y(this,yr,null);y(this,Qs,null);y(this,Ve,null);y(this,Zs,null);y(this,pa,null);y(this,Zh,-1);y(this,Q);const d=[...a(sr,ga).values()];if(!sr._initialized){sr._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),p(this,Q,t),this.pageIndex=e,this.div=i,p(this,pc,s),p(this,ha,o),this.viewport=u,p(this,Ve,c),this.drawLayer=l,this._structTree=r,a(this,Q).addLayer(this)}get isEmpty(){return a(this,Xn).size===0}get isInvisible(){return this.isEmpty&&a(this,Q).getMode()===rt.NONE}updateToolbar(t){a(this,Q).updateToolbar(t)}updateMode(t=a(this,Q).getMode()){switch(A(this,zt,a0).call(this),t){case rt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case rt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===rt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of a(sr,ga).values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Ve))==null?void 0:e.div)}setEditingState(t){a(this,Q).setEditingState(t)}addCommands(t){a(this,Q).addCommands(t)}cleanUndoStack(t){a(this,Q).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,ha))==null||e.div.classList.toggle("disabled",!t)}async enable(){var i;p(this,Qh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=a(this,pa))==null||i.abort(),p(this,pa,null);const t=new Set;for(const r of a(this,zt,A1))r.enableEditing(),r.show(!0),r.annotationElementId&&(a(this,Q).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=a(this,ha);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),a(this,Q).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}p(this,Qh,!1),a(this,Q)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(p(this,Kh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Ve)&&!a(this,pa)){p(this,pa,new AbortController);const r=a(this,Q).combinedSignal(a(this,pa));a(this,Ve).div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:c,timeStamp:u}=s,h=a(this,Zh);if(u-h>500){p(this,Zh,u);return}p(this,Zh,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let g;const b=new RegExp(`^${If}[0-9]+$`);for(const S of f)if(b.test(S.id)){g=S.id;break}if(!g)return;const v=a(this,Xn).get(g);(v==null?void 0:v.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),v.dblclick(s))},{signal:r,capture:!0})}const t=a(this,ha);if(t){const r=new Map,s=new Map;for(const l of a(this,zt,A1)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(a(this,Q).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=s.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=r.get(c),u&&(a(this,Q).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}A(this,zt,a0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const r of a(sr,ga).values())e.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),p(this,Kh,!1)}getEditableAnnotation(t){var e;return((e=a(this,ha))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,Q).getActive()!==t&&a(this,Q).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Ve))!=null&&t.div&&!a(this,Zs)){p(this,Zs,new AbortController);const e=a(this,Q).combinedSignal(a(this,Zs));a(this,Ve).div.addEventListener("pointerdown",A(this,zt,TP).bind(this),{signal:e}),a(this,Ve).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Ve))!=null&&t.div&&a(this,Zs)&&(a(this,Zs).abort(),p(this,Zs,null),a(this,Ve).div.classList.remove("highlighting"))}enableClick(){if(a(this,da))return;p(this,da,new AbortController);const t=a(this,Q).combinedSignal(a(this,da));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,da))==null||t.abort(),p(this,da,null)}attach(t){a(this,Xn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,Q).isDeletedAnnotationElement(e)&&a(this,Q).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Xn).delete(t.id),(e=a(this,pc))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Kh)&&t.annotationElementId&&a(this,Q).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,Q).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,Q).addDeletedAnnotationElement(t.annotationElementId),qt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,Q).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Qh)),a(this,Q).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Ks)&&(t._focusEventsAllowed=!1,p(this,Ks,setTimeout(()=>{p(this,Ks,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,Q)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,pc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Xn).values())if(e.uid===t)return e;return null}getNextId(){return a(this,Q).getId()}combinedSignal(t){return a(this,Q).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,zt,Dr))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,Q).updateMode(t.mode);const{offsetX:i,offsetY:r}=A(this,zt,S1).call(this),s=this.getNextId(),o=A(this,zt,x1).call(this,{parent:this,id:s,x:i,y:r,uiManager:a(this,Q),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(sr,ga).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,Q)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),s=A(this,zt,x1).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,Q),isCentered:e,...i});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(A(this,zt,S1).call(this),!0,t)}setSelected(t){a(this,Q).setSelected(t)}toggleSelected(t){a(this,Q).toggleSelected(t)}unselect(t){a(this,Q).unselect(t)}pointerup(t){var r;const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,fa)||(p(this,fa,!1),(r=a(this,zt,Dr))!=null&&r.isDrawer&&a(this,zt,Dr).supportMultipleDrawings))return;if(!a(this,Yh)){p(this,Yh,!0);return}const i=a(this,Q).getMode();if(i===rt.STAMP||i===rt.SIGNATURE){a(this,Q).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(a(this,Q).getMode()===rt.HIGHLIGHT&&this.enableTextSelection(),a(this,fa)){p(this,fa,!1);return}const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(p(this,fa,!0),(r=a(this,zt,Dr))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=a(this,Q).getActive();p(this,Yh,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,yr)){a(this,zt,Dr).startDrawing(this,a(this,Q),!1,t);return}a(this,Q).setCurrentDrawingSession(this),p(this,yr,new AbortController);const e=a(this,Q).combinedSignal(a(this,yr));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(p(this,Qs,null),this.commitOrRemove())},{signal:e}),a(this,zt,Dr).startDrawing(this,a(this,Q),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&p(this,Qs,e);return}a(this,Qs)&&setTimeout(()=>{var e;(e=a(this,Qs))==null||e.focus(),p(this,Qs,null)},0)}endDrawingSession(t=!1){return a(this,yr)?(a(this,Q).setCurrentDrawingSession(null),a(this,yr).abort(),p(this,yr,null),p(this,Qs,null),a(this,zt,Dr).endDrawing(t)):null}findNewParent(t,e,i){const r=a(this,Q).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,yr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,yr)&&a(this,zt,Dr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,Q).getActive())==null?void 0:t.parent)===this&&(a(this,Q).commitOrRemove(),a(this,Q).setActiveEditor(null)),a(this,Ks)&&(clearTimeout(a(this,Ks)),p(this,Ks,null));for(const i of a(this,Xn).values())(e=a(this,pc))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Xn).clear(),a(this,Q).removeLayer(this)}render({viewport:t}){this.viewport=t,Ra(this.div,t);for(const e of a(this,Q).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,Q).commitOrRemove(),A(this,zt,a0).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Ra(this.div,{rotation:i}),e!==i)for(const r of a(this,Xn).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,Q).viewParameters.realScale}};pc=new WeakMap,Yh=new WeakMap,ha=new WeakMap,da=new WeakMap,Ks=new WeakMap,Xn=new WeakMap,fa=new WeakMap,Kh=new WeakMap,Qh=new WeakMap,yr=new WeakMap,Qs=new WeakMap,Ve=new WeakMap,Zs=new WeakMap,pa=new WeakMap,Zh=new WeakMap,Q=new WeakMap,ga=new WeakMap,zt=new WeakSet,A1=function(){return a(this,Xn).size!==0?a(this,Xn).values():a(this,Q).getEditors(this.pageIndex)},TP=function(t){a(this,Q).unselectAll();const{target:e}=t;if(e===a(this,Ve).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Ve).div.contains(e)){const{isMac:i}=Xe.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,Q).showAllEditors("highlight",!0,!0),a(this,Ve).div.classList.add("free"),this.toggleDrawing(),W0.startHighlighting(this,a(this,Q).direction==="ltr",{target:a(this,Ve).div,x:t.x,y:t.y}),a(this,Ve).div.addEventListener("pointerup",()=>{a(this,Ve).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,Q)._signal}),t.preventDefault()}},Dr=function(){return a(sr,ga).get(a(this,Q).getMode())},x1=function(t){const e=a(this,zt,Dr);return e?new e.prototype.constructor(t):null},S1=function(){const{x:t,y:e,width:i,height:r}=this.boundingClientRect,s=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+r),u=(s+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},a0=function(){for(const t of a(this,Xn).values())t.isEmpty()&&t.remove()},I(sr,"_initialized",!1),y(sr,ga,new Map([n1,d1,w1,W0,v1].map(t=>[t._editorType,t])));let X0=sr;var vr,Pn,gc,Sg,fy,kP,ls,E1,PP,_1;const Re=class Re{constructor({pageIndex:t}){y(this,ls);y(this,vr,null);y(this,Pn,new Map);y(this,gc,new Map);this.pageIndex=t}setParent(t){if(!a(this,vr)){p(this,vr,t);return}if(a(this,vr)!==t){if(a(this,Pn).size>0)for(const e of a(this,Pn).values())e.remove(),t.append(e);p(this,vr,t)}}static get _svgFactory(){return ct(this,"_svgFactory",new Hf)}draw(t,e=!1,i=!1){const r=De(Re,Sg)._++,s=A(this,ls,E1).call(this),o=Re._svgFactory.createElement("defs");s.append(o);const l=Re._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,gc).set(r,l);const u=i?A(this,ls,PP).call(this,o,c):null,h=Re._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(s,t),a(this,Pn).set(r,s),{id:r,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=De(Re,Sg)._++,r=A(this,ls,E1).call(this),s=Re._svgFactory.createElement("defs");r.append(s);const o=Re._svgFactory.createElement("path");s.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Re._svgFactory.createElement("mask");s.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Re._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=Re._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=Re._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return r.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,Pn).set(i,r),i}finalizeDraw(t,e){a(this,gc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:i,bbox:r,rootClass:s,path:o}=e,l=typeof t=="number"?a(this,Pn).get(t):t;if(l){if(i&&A(this,ls,_1).call(this,l,i),r&&A(c=Re,fy,kP).call(c,l,r),s){const{classList:u}=l;for(const[h,d]of Object.entries(s))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;A(this,ls,_1).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=a(this,Pn).get(t);i&&(a(e,vr).append(i),a(this,Pn).delete(t),a(e,Pn).set(t,i))}remove(t){a(this,gc).delete(t),a(this,vr)!==null&&(a(this,Pn).get(t).remove(),a(this,Pn).delete(t))}destroy(){p(this,vr,null);for(const t of a(this,Pn).values())t.remove();a(this,Pn).clear(),a(this,gc).clear()}};vr=new WeakMap,Pn=new WeakMap,gc=new WeakMap,Sg=new WeakMap,fy=new WeakSet,kP=function(t,[e,i,r,s]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},ls=new WeakSet,E1=function(){const t=Re._svgFactory.create(1,1,!0);return a(this,vr).append(t),t.setAttribute("aria-hidden",!0),t},PP=function(t,e){const i=Re._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Re._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),r},_1=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},y(Re,fy),y(Re,Sg,0);let q0=Re;globalThis._pdfjsTestingUtils={HighlightOutliner:r1};globalThis.pdfjsLib={AbortException:lo,AnnotationEditorLayer:X0,AnnotationEditorParamsType:yt,AnnotationEditorType:rt,AnnotationEditorUIManager:Ma,AnnotationLayer:rx,AnnotationMode:is,AnnotationType:Ae,applyOpacity:T2,build:Dk,ColorPicker:zf,createValidAbsoluteUrl:VA,CSSConstants:C2,DOMSVGFactory:Hf,DrawLayer:q0,FeatureTest:Xe,fetchData:md,findContrastColor:k2,getDocument:JA,getFilenameFromUrl:S2,getPdfFilenameFromUrl:E2,getRGB:yd,getUuid:GA,getXfaPageViewport:_2,GlobalWorkerOptions:qi,ImageKind:gf,InvalidPDFException:O0,isDataScheme:Ng,isPdfFile:ev,isValidExplicitDest:ak,MathClamp:An,noContextMenu:ki,normalizeUnicode:A2,OPS:ld,OutputScale:_r,PasswordResponses:w2,PDFDataRangeTransport:tx,PDFDateString:jf,PDFWorker:cd,PermissionFlag:v2,PixelsPerInch:co,RenderingCancelledException:tv,renderRichText:YA,ResponseException:Of,setLayerDimensions:Ra,shadow:ct,SignatureExtractor:rs,stopEvent:ce,SupportedImageMimeTypes:B0,TextLayer:Uf,TouchManager:$f,updateUrlHash:WA,Util:q,VerbosityLevel:Mg,version:ex,XfaLayer:qA};const x3=Object.freeze(Object.defineProperty({__proto__:null,AbortException:lo,AnnotationEditorLayer:X0,AnnotationEditorParamsType:yt,AnnotationEditorType:rt,AnnotationEditorUIManager:Ma,AnnotationLayer:rx,AnnotationMode:is,AnnotationType:Ae,CSSConstants:C2,ColorPicker:zf,DOMSVGFactory:Hf,DrawLayer:q0,FeatureTest:Xe,GlobalWorkerOptions:qi,ImageKind:gf,InvalidPDFException:O0,MathClamp:An,OPS:ld,OutputScale:_r,PDFDataRangeTransport:tx,PDFDateString:jf,PDFWorker:cd,PasswordResponses:w2,PermissionFlag:v2,PixelsPerInch:co,RenderingCancelledException:tv,ResponseException:Of,SignatureExtractor:rs,SupportedImageMimeTypes:B0,TextLayer:Uf,TouchManager:$f,Util:q,VerbosityLevel:Mg,XfaLayer:qA,applyOpacity:T2,build:Dk,createValidAbsoluteUrl:VA,fetchData:md,findContrastColor:k2,getDocument:JA,getFilenameFromUrl:S2,getPdfFilenameFromUrl:E2,getRGB:yd,getUuid:GA,getXfaPageViewport:_2,isDataScheme:Ng,isPdfFile:ev,isValidExplicitDest:ak,noContextMenu:ki,normalizeUnicode:A2,renderRichText:YA,setLayerDimensions:Ra,shadow:ct,stopEvent:ce,updateUrlHash:WA,version:ex},Symbol.toStringTag,{value:"Module"}));function DP(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=DP(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function rv(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=DP(n))&&(i&&(i+=" "),i+=t);return i}var BE=Object.prototype.hasOwnProperty;function jE(n,t,e){for(e of n.keys())if(_u(e,t))return e}function _u(n,t){var e,i,r;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((i=n.length)===t.length)for(;i--&&_u(n[i],t[i]););return i===-1}if(e===Set){if(n.size!==t.size)return!1;for(i of n)if(r=i,r&&typeof r=="object"&&(r=jE(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(i of n)if(r=i[0],r&&typeof r=="object"&&(r=jE(t,r),!r)||!_u(i[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((i=n.byteLength)===t.byteLength)for(;i--&&n.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===t.byteLength)for(;i--&&n[i]===t[i];);return i===-1}if(!e||typeof n=="object"){i=0;for(e in n)if(BE.call(n,e)&&++i&&!BE.call(t,e)||!(e in t)||!_u(n[e],t[e]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}function jg(n){let t=!1;return{promise:new Promise((i,r)=>{n.then(s=>!t&&i(s)).catch(s=>!t&&r(s))}),cancel(){t=!0}}}const S3=["onCopy","onCut","onPaste"],E3=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],_3=["onFocus","onBlur"],C3=["onInput","onInvalid","onReset","onSubmit"],T3=["onLoad","onError"],k3=["onKeyDown","onKeyPress","onKeyUp"],P3=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],D3=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],R3=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],M3=["onSelect"],L3=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],F3=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],N3=["onScroll"],I3=["onWheel"],O3=["onAnimationStart","onAnimationEnd","onAnimationIteration"],B3=["onTransitionEnd"],j3=["onToggle"],$3=["onChange"],U3=[...S3,...E3,..._3,...C3,...T3,...k3,...P3,...D3,...R3,...M3,...L3,...F3,...N3,...I3,...O3,...B3,...$3,...j3];function RP(n,t){const e={};for(const i of U3){const r=n[i];r&&(t?e[i]=s=>r(s,t(i)):e[i]=r)}return e}var z3="Invariant failed";function Ut(n,t){if(!n)throw new Error(z3)}var H3=function(){},V3=H3;const Sn=py(V3),MP=P.createContext(null),W3="noopener noreferrer nofollow";class G3{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ut(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ut(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||W3,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Ut(this.pdfDocument),Ut(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Ut(Array.isArray(e));const i=e[0];new Promise(r=>{Ut(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(s=>{r(s)}).catch(()=>{Ut(!1)}):typeof i=="number"?r(i):Ut(!1)}).then(r=>{const s=r+1;Ut(this.pdfViewer),Ut(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:s})})})}goToPage(t){const e=t-1;Ut(this.pdfViewer),Ut(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Cu({children:n,type:t}){return _.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const $E={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function X3(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ud(){return P.useReducer(X3,{value:void 0,error:void 0})}const sv=typeof window<"u",LP=sv&&window.location.protocol==="file:";function q3(n){return typeof n<"u"}function Va(n){return q3(n)&&n!==null}function Y3(n){return typeof n=="string"}function K3(n){return n instanceof ArrayBuffer}function Q3(n){return Ut(sv),n instanceof Blob}function C1(n){return Y3(n)&&/^data:/.test(n)}function UE(n){Ut(C1(n));const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function Z3(){return sv&&window.devicePixelRatio||1}const FP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function zE(){Sn(!LP,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${FP}`)}function J3(){Sn(!LP,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${FP}`)}function Pc(n){n!=null&&n.cancel&&n.cancel()}function T1(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function t$(n){return n.name==="RenderingCancelledException"}function e$(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:s}=r.target;if(!s)return e(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:n$}=x3,i$=(n,t)=>{switch(t){case $E.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case $E.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function HE(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const r$=P.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:s,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:g,onLoadSuccess:b,onPassword:v=i$,onSourceError:S,onSourceSuccess:m,options:w,renderMode:x,rotate:E,scale:C,...T},k){const[D,M]=ud(),{value:L,error:F}=D,[B,z]=ud(),{value:H,error:et}=B,$=P.useRef(new G3),j=P.useRef([]),N=P.useRef(void 0),V=P.useRef(void 0);o&&o!==N.current&&HE(o)&&(Sn(!_u(o,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=o),w&&w!==V.current&&(Sn(!_u(w,V.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),V.current=w);const Z=P.useRef({scrollPageIntoView:bt=>{const{dest:Vt,pageNumber:be,pageIndex:_e=be-1}=bt;if(d){d({dest:Vt,pageIndex:_e,pageNumber:be});return}const go=j.current[_e];if(go){go.scrollIntoView();return}Sn(!1,`An internal link leading to page ${be} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(k,()=>({linkService:$,pages:j,viewer:Z}),[]);function dt(){m&&m()}function J(){F&&(Sn(!1,F.toString()),S&&S(F))}function at(){M({type:"RESET"})}P.useEffect(at,[o,M]);const Et=P.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return C1(o)?{data:UE(o)}:(zE(),{url:o});if(o instanceof n$)return{range:o};if(K3(o))return{data:o};if(sv&&Q3(o))return{data:await e$(o)};if(Ut(typeof o=="object"),Ut(HE(o)),"url"in o&&typeof o.url=="string"){if(C1(o.url)){const{url:bt,...Vt}=o;return{data:UE(bt),...Vt}}zE()}return o},[o]);P.useEffect(()=>{const bt=jg(Et());return bt.promise.then(Vt=>{M({type:"RESOLVE",value:Vt})}).catch(Vt=>{M({type:"REJECT",error:Vt})}),()=>{Pc(bt)}},[Et,M]),P.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){J();return}dt()}},[L]);function Mt(){H&&(b&&b(H),j.current=new Array(H.numPages),$.current.setDocument(H))}function Bt(){et&&(Sn(!1,et.toString()),f&&f(et))}P.useEffect(function(){z({type:"RESET"})},[z,L]),P.useEffect(function(){if(!L)return;const Vt=w?{...L,...w}:L,be=JA(Vt);g&&(be.onProgress=g),v&&(be.onPassword=v);const _e=be,go=_e.promise.then(ja=>{z({type:"RESOLVE",value:ja})}).catch(ja=>{_e.destroyed||z({type:"REJECT",error:ja})});return()=>{go.finally(()=>_e.destroy())}},[w,z,L]),P.useEffect(()=>{if(!(typeof H>"u")){if(H===!1){Bt();return}Mt()}},[H]),P.useEffect(function(){$.current.setViewer(Z.current),$.current.setExternalLinkRel(r),$.current.setExternalLinkTarget(s)},[r,s]);const vt=P.useCallback((bt,Vt)=>{j.current[bt]=Vt},[]),er=P.useCallback(bt=>{delete j.current[bt]},[]),hn=P.useMemo(()=>({imageResourcesPath:c,linkService:$.current,onItemClick:d,pdf:H,registerPage:vt,renderMode:x,rotate:E,scale:C,unregisterPage:er}),[c,d,H,vt,x,E,C,er]),Ct=P.useMemo(()=>RP(T,()=>H),[T,H]);function Ye(){function bt(be){return!!(be!=null&&be.pdf)}if(!bt(hn))throw new Error("pdf is undefined");const Vt=typeof t=="function"?t(hn):t;return _.jsx(MP.Provider,{value:hn,children:Vt})}function nr(){return o?H==null?_.jsx(Cu,{type:"loading",children:typeof u=="function"?u():u}):H===!1?_.jsx(Cu,{type:"error",children:typeof i=="function"?i():i}):Ye():_.jsx(Cu,{type:"no-data",children:typeof h=="function"?h():h})}return _.jsx("div",{className:rv("react-pdf__Document",e),ref:l,...Ct,children:nr()})});function NP(){return P.useContext(MP)}function IP(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(s){for(var o=0,l=e;o<l.length;o++){var c=l[o];typeof c=="function"?c(s):c&&(c.current=s)}}}const OP=P.createContext(null);function ov(){return P.useContext(OP)}function s$(){const n=NP(),t=ov();Ut(t);const e={...n,...t},{imageResourcesPath:i,linkService:r,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:f,scale:g=1}=e;Ut(h),Ut(u),Ut(r);const[b,v]=ud(),{value:S,error:m}=b,w=P.useRef(null);Sn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){S&&o&&o(S)}function E(){m&&(Sn(!1,m.toString()),s&&s(m))}P.useEffect(function(){v({type:"RESET"})},[v,u]),P.useEffect(function(){if(!u)return;const M=jg(u.getAnnotations()),L=M;return M.promise.then(F=>{v({type:"RESOLVE",value:F})}).catch(F=>{v({type:"REJECT",error:F})}),()=>{Pc(L)}},[v,u]),P.useEffect(()=>{if(S!==void 0){if(S===!1){E();return}x()}},[S]);function C(){c&&c()}function T(D){Sn(!1,`${D}`),l&&l(D)}const k=P.useMemo(()=>u.getViewport({scale:g,rotation:f}),[u,f,g]);return P.useEffect(function(){if(!h||!u||!r||!S)return;const{current:M}=w;if(!M)return;const L=k.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:M,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:L},B={annotations:S,annotationStorage:h.annotationStorage,div:M,imageResourcesPath:i,linkService:r,page:u,renderForms:d,viewport:L};M.innerHTML="";try{new rx(F).render(B),C()}catch(z){T(z)}return()=>{}},[S,i,r,u,h,d,k]),_.jsx("div",{className:rv("react-pdf__Page__annotations","annotationLayer"),ref:w})}const BP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},o$=/^H(\d+)$/;function a$(n){return n in BP}function av(n){return"children"in n}function jP(n){return av(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function l$(n){const t={};if(av(n)){const{role:e}=n,i=e.match(o$);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(a$(e)){const r=BP[e];r&&(t.role=r)}}return t}function $P(n){const t={};if(av(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),jP(n)){const[e]=n.children;if(e){const i=$P(e);return{...t,...i}}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function c$(n){return n?{...l$(n),...$P(n)}:null}function UP({className:n,node:t}){const e=P.useMemo(()=>c$(t),[t]),i=P.useMemo(()=>!av(t)||jP(t)?null:t.children.map((r,s)=>_.jsx(UP,{node:r},s)),[t]);return _.jsx("span",{className:n,...e,children:i})}function u$(){const n=ov();Ut(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[i,r]=ud(),{value:s,error:o}=i,{customTextRenderer:l,page:c}=n;function u(){s&&e&&e(s)}function h(){o&&(Sn(!1,o.toString()),t&&t(o))}return P.useEffect(function(){r({type:"RESET"})},[r,c]),P.useEffect(function(){if(l||!c)return;const f=jg(c.getStructTree()),g=f;return f.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Pc(g)},[l,c,r]),P.useEffect(()=>{if(s!==void 0){if(s===!1){h();return}u()}},[s]),s?_.jsx(UP,{className:"react-pdf__Page__structTree structTree",node:s}):null}const VE=is;function h$(n){const t=ov();Ut(t);const e={...t,...n},{_className:i,canvasBackground:r,devicePixelRatio:s=Z3(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=e,{canvasRef:g}=n;Ut(c);const b=P.useRef(null);function v(){c&&l&&l(T1(c,f))}function S(E){t$(E)||(Sn(!1,E.toString()),o&&o(E))}const m=P.useMemo(()=>c.getViewport({scale:f*s,rotation:d}),[s,c,d,f]),w=P.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);P.useEffect(function(){if(!c)return;c.cleanup();const{current:C}=b;if(!C)return;C.width=m.width,C.height=m.height,C.style.width=`${Math.floor(w.width)}px`,C.style.height=`${Math.floor(w.height)}px`,C.style.visibility="hidden";const T={annotationMode:u?VE.ENABLE_FORMS:VE.ENABLE,canvas:C,canvasContext:C.getContext("2d",{alpha:!1}),viewport:m};r&&(T.background=r);const k=c.render(T),D=k;return k.promise.then(()=>{C.style.visibility="",v()}).catch(S),()=>Pc(D)},[r,c,u,m,w]);const x=P.useCallback(()=>{const{current:E}=b;E&&(E.width=0,E.height=0)},[]);return P.useEffect(()=>x,[x]),_.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:IP(g,b),style:{display:"block",userSelect:"none"},children:h?_.jsx(u$,{}):null})}function d$(n){return"str"in n}function f$(){const n=ov();Ut(n);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:s,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=n;Ut(o);const[d,f]=ud(),{value:g,error:b}=d,v=P.useRef(null);Sn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){g&&i&&i(g)}function m(){b&&(Sn(!1,b.toString()),e&&e(b))}P.useEffect(function(){f({type:"RESET"})},[o,f]),P.useEffect(function(){if(!o)return;const D=jg(o.getTextContent()),M=D;return D.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>Pc(M)},[o,f]),P.useEffect(()=>{if(g!==void 0){if(g===!1){m();return}S()}},[g]);const w=P.useCallback(()=>{s&&s()},[s]),x=P.useCallback(k=>{Sn(!1,k.toString()),r&&r(k)},[r]);function E(){const k=v.current;k&&k.classList.add("selecting")}function C(){const k=v.current;k&&k.classList.remove("selecting")}const T=P.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return P.useLayoutEffect(function(){if(!o||!g)return;const{current:D}=v;if(!D)return;D.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),L={container:D,textContentSource:M,viewport:T},F=new Uf(L),B=F;return F.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",D.append(z);const H=D.querySelectorAll('[role="presentation"]');if(t){let et=0;g.items.forEach(($,j)=>{if(!d$($))return;const N=H[et];if(!N)return;const V=t({pageIndex:l,pageNumber:c,itemIndex:j,...$});N.innerHTML=V,et+=$.str&&$.hasEOL?2:1})}w()}).catch(x),()=>Pc(B)},[t,x,w,o,l,c,g,T]),_.jsx("div",{className:rv("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:E,ref:v})}const WE=1;function p$(n){const e={...NP(),...n},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:s,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:g,inputRef:b,loading:v="Loading page",noData:S="No page specified.",onGetAnnotationsError:m,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:E,onGetTextError:C,onGetTextSuccess:T,onLoadError:k,onLoadSuccess:D,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:B,onRenderTextLayerError:z,onRenderTextLayerSuccess:H,pageIndex:et,pageNumber:$,pdf:j,registerPage:N,renderAnnotationLayer:V=!0,renderForms:Z=!1,renderMode:dt="canvas",renderTextLayer:J=!0,rotate:at,scale:Et=WE,unregisterPage:Mt,width:Bt,...vt}=e,[er,hn]=ud(),{value:Ct,error:Ye}=er,nr=P.useRef(null);Ut(j);const bt=Va($)?$-1:et??null,Vt=$??(Va(et)?et+1:null),be=at??(Ct?Ct.rotate:null),_e=P.useMemo(()=>{if(!Ct)return null;let pt=1;const Yt=Et??WE;if(Bt||g){const Oe=Ct.getViewport({scale:1,rotation:be});Bt?pt=Bt/Oe.width:g&&(pt=g/Oe.height)}return Yt*pt},[g,Ct,be,Et,Bt]);P.useEffect(function(){return()=>{Va(bt)&&r&&Mt&&Mt(bt)}},[r,j,bt,Mt]);function go(){if(D){if(!Ct||!_e)return;D(T1(Ct,_e))}if(r&&N){if(!Va(bt)||!nr.current)return;N(bt,nr.current)}}function ja(){Ye&&(Sn(!1,Ye.toString()),k&&k(Ye))}P.useEffect(function(){hn({type:"RESET"})},[hn,j,bt]),P.useEffect(function(){if(!j||!Vt)return;const Yt=jg(j.getPage(Vt)),Oe=Yt;return Yt.promise.then(Ua=>{hn({type:"RESOLVE",value:Ua})}).catch(Ua=>{hn({type:"REJECT",error:Ua})}),()=>Pc(Oe)},[hn,j,Vt]),P.useEffect(()=>{if(Ct!==void 0){if(Ct===!1){ja();return}go()}},[Ct,_e]);const $a=P.useMemo(()=>Va(bt)&&Vt&&Va(be)&&Va(_e)?{_className:i,canvasBackground:s,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:m,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:E,onGetTextError:C,onGetTextSuccess:T,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:B,onRenderTextLayerError:z,onRenderTextLayerSuccess:H,page:Ct,pageIndex:bt,pageNumber:Vt,renderForms:Z,renderTextLayer:J,rotate:be,scale:_e}:null,[i,s,h,d,m,w,x,E,C,T,M,L,F,B,z,H,Ct,bt,Vt,Z,J,be,_e]),lv=P.useMemo(()=>RP(vt,()=>Ct&&(_e?T1(Ct,_e):void 0)),[vt,Ct,_e]),$c=`${bt}@${_e}/${be}`;function R(){switch(dt){case"custom":return Ut(u),_.jsx(u,{},`${$c}_custom`);case"none":return null;case"canvas":default:return _.jsx(h$,{canvasRef:o},`${$c}_canvas`)}}function W(){return J?_.jsx(f$,{},`${$c}_text`):null}function tt(){return V?_.jsx(s$,{},`${$c}_annotations`):null}function nt(){function pt(Oe){return!!(Oe!=null&&Oe.page)}if(!pt($a))throw new Error("page is undefined");const Yt=typeof l=="function"?l($a):l;return _.jsxs(OP.Provider,{value:$a,children:[R(),W(),tt(),Yt]})}function ft(){return Vt?j===null||Ct===void 0||Ct===null?_.jsx(Cu,{type:"loading",children:typeof v=="function"?v():v}):j===!1||Ct===!1?_.jsx(Cu,{type:"error",children:typeof f=="function"?f():f}):nt():_.jsx(Cu,{type:"no-data",children:typeof S=="function"?S():S})}return _.jsx("div",{className:rv(i,c),"data-page-number":Vt,ref:IP(b,nr),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${_e}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...lv,children:ft()})}J3();qi.workerSrc="pdf.worker.mjs";qi.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${ex}/pdf.worker.min.js`;function g$({url:n,onPageChange:t,annotations:e=[],onTextSelect:i}){const[r,s]=P.useState(null),[o,l]=P.useState(1),[c,u]=P.useState(1),h=({numPages:f})=>{s(f)},d=()=>{const f=window.getSelection(),g=f.toString();if(g&&i){const v=f.getRangeAt(0).getBoundingClientRect();i({text:g,pageNumber:o,rects:[{x:v.x,y:v.y,w:v.width,h:v.height}]})}};return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#1E1E1E] border-b border-[#2A2A2A]",children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>l(f=>Math.max(1,f-1)),disabled:o<=1,className:"px-3 py-1 bg-[#2A2A2A] text-[#E0E0E0] rounded disabled:opacity-50","data-testid":"button-prev-page",children:"Previous"}),_.jsxs("span",{className:"px-4 py-1 text-[#E0E0E0]",children:["Page ",o," of ",r||"?"]}),_.jsx("button",{onClick:()=>l(f=>Math.min(r,f+1)),disabled:o>=r,className:"px-3 py-1 bg-[#2A2A2A] text-[#E0E0E0] rounded disabled:opacity-50","data-testid":"button-next-page",children:"Next"})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>u(f=>Math.max(.5,f-.1)),className:"px-3 py-1 bg-[#2A2A2A] text-[#E0E0E0] rounded","data-testid":"button-zoom-out",children:"-"}),_.jsxs("span",{className:"px-4 py-1 text-[#E0E0E0]",children:[Math.round(c*100),"%"]}),_.jsx("button",{onClick:()=>u(f=>Math.min(2,f+.1)),className:"px-3 py-1 bg-[#2A2A2A] text-[#E0E0E0] rounded","data-testid":"button-zoom-in",children:"+"})]})]}),_.jsx("div",{className:"flex-1 overflow-auto bg-[#121212] p-4",onMouseUp:d,children:_.jsx("div",{className:"flex justify-center",children:_.jsx(r$,{file:n,onLoadSuccess:h,loading:_.jsx("div",{className:"text-[#BDBDBD]",children:"Loading PDF..."}),error:_.jsx("div",{className:"text-[#EF5350]",children:"Error loading PDF"}),children:_.jsx(p$,{pageNumber:o,scale:c,renderTextLayer:!0,renderAnnotationLayer:!1})})})})]})}function m$({activeMode:n,onModeChange:t}){const e=[{name:uu.SELECT,icon:"cursor",label:"Select"},{name:uu.HIGHLIGHT,icon:"highlight",label:"Highlight"},{name:uu.UNDERLINE,icon:"underline",label:"Underline"},{name:uu.TEXTBOX,icon:"text",label:"Text Box"}];return _.jsx("div",{className:"flex gap-2 p-4 bg-[#1E1E1E] border-b border-[#2A2A2A]",children:e.map(i=>_.jsxs("button",{onClick:()=>t(i.name),className:`px-4 py-2 rounded flex items-center gap-2 transition-colors ${n===i.name?"bg-[#4FC3F7] text-white":"bg-[#2A2A2A] text-[#E0E0E0] hover:bg-[#3A3A3A]"}`,"data-testid":`button-tool-${i.name}`,children:[_.jsx(Da,{name:i.icon,size:18}),_.jsx("span",{children:i.label})]},i.name))})}function y$({workspaceId:n}){const[t,e]=P.useState([]),[i,r]=P.useState(""),s=P.useRef(null);P.useEffect(()=>{const l=te.get(ue.MAIN_CHAT(n))||[];e(l)},[n]),P.useEffect(()=>{var l;(l=s.current)==null||l.scrollIntoView({behavior:"smooth"})},[t]);const o=l=>{if(l.preventDefault(),!i.trim())return;const c={id:sn(),author:"me",content:i,createdAt:new Date().toISOString()},u=[...t,c];e(u),te.set(ue.MAIN_CHAT(n),u),r("")};return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t.map(l=>_.jsx("div",{className:`flex ${l.author==="me"?"justify-end":"justify-start"}`,"data-testid":`message-${l.id}`,children:_.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-lg ${l.author==="me"?"bg-[#4FC3F7] text-white":"bg-[#2A2A2A] text-[#E0E0E0]"}`,children:_.jsx("p",{className:"text-sm",children:l.content})})},l.id)),_.jsx("div",{ref:s})]}),_.jsx("form",{onSubmit:o,className:"p-4 border-t border-[#2A2A2A]",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",value:i,onChange:l=>r(l.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-[#2A2A2A] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7]","data-testid":"input-main-chat"}),_.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#4FC3F7] text-white rounded-md hover:bg-[#3BA7D1]","data-testid":"button-send-main-chat",children:_.jsx(Da,{name:"send",size:18})})]})})]})}function v$({selectionText:n,messages:t,onAddMessage:e}){const[i,r]=P.useState(""),s=P.useRef(null);P.useEffect(()=>{var l;(l=s.current)==null||l.scrollIntoView({behavior:"smooth"})},[t]);const o=l=>{l.preventDefault(),i.trim()&&(e(i),r(""))};return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"p-4 bg-[#2A2A2A] border-b border-[#2A2A2A]",children:[_.jsx("p",{className:"text-xs text-[#BDBDBD] mb-1",children:"Selected text:"}),_.jsxs("p",{className:"text-sm text-[#E0E0E0] italic",children:['"',n,'"']})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t.map(l=>_.jsx("div",{className:`flex ${l.author==="me"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-lg ${l.author==="me"?"bg-[#4FC3F7] text-white":"bg-[#2A2A2A] text-[#E0E0E0]"}`,children:_.jsx("p",{className:"text-sm",children:l.content})})},l.id)),_.jsx("div",{ref:s})]}),_.jsx("form",{onSubmit:o,className:"p-4 border-t border-[#2A2A2A]",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",value:i,onChange:l=>r(l.target.value),placeholder:"Reply to thread...",className:"flex-1 px-4 py-2 bg-[#2A2A2A] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7]","data-testid":"input-thread"}),_.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#4FC3F7] text-white rounded-md hover:bg-[#3BA7D1]","data-testid":"button-send-thread",children:_.jsx(Da,{name:"send",size:18})})]})})]})}function w$({workspaceId:n,pdfId:t,selectedAnnotation:e}){const[i,r]=P.useState([]);P.useState(null),P.useEffect(()=>{if(!e||!t)return;const o=ue.THREADS(n,t,e.id),l=te.get(o)||[];r(l)},[n,t,e]);const s=o=>{if(!e||!t)return;const l={id:sn(),author:"me",content:o,createdAt:new Date().toISOString()},c=ue.THREADS(n,t,e.id),u=[...i,l];r(u),te.set(c,u)};return!e||!t?_.jsx("div",{className:"flex items-center justify-center h-full p-4",children:_.jsx("p",{className:"text-[#BDBDBD] text-center",children:"Select text in the PDF to start a threaded discussion"})}):_.jsx("div",{className:"h-full",children:_.jsx(v$,{selectionText:e.text,messages:i,onAddMessage:s})})}function b$({workspaceId:n}){const[t,e]=P.useState([]),[i,r]=P.useState(""),[s,o]=P.useState(!1),l=P.useRef(null);P.useEffect(()=>{const u=te.get(ue.BOT(n))||[];e(u)},[n]),P.useEffect(()=>{var u;(u=l.current)==null||u.scrollIntoView({behavior:"smooth"})},[t]);const c=u=>{if(u.preventDefault(),!i.trim())return;const h={id:sn(),role:"user",content:i,createdAt:new Date().toISOString()},d=[...t,h];e(d),te.set(ue.BOT(n),d);const f=i;r(""),o(!0),setTimeout(()=>{const g={id:sn(),role:"assistant",content:`AI: I received your message "${f}". This is a mock response.`,createdAt:new Date().toISOString()},b=[...d,g];e(b),te.set(ue.BOT(n),b),o(!1)},400)};return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t.map(u=>_.jsx("div",{className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,"data-testid":`message-bot-${u.id}`,children:_.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-lg ${u.role==="user"?"bg-[#4FC3F7] text-white":"bg-[#2A2A2A] text-[#E0E0E0]"}`,children:_.jsx("p",{className:"text-sm",children:u.content})})},u.id)),s&&_.jsx("div",{className:"flex justify-start",children:_.jsx("div",{className:"bg-[#2A2A2A] text-[#E0E0E0] px-4 py-2 rounded-lg",children:_.jsx("p",{className:"text-sm",children:"AI is typing..."})})}),_.jsx("div",{ref:l})]}),_.jsx("form",{onSubmit:c,className:"p-4 border-t border-[#2A2A2A]",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",value:i,onChange:u=>r(u.target.value),placeholder:"Ask the AI assistant...",className:"flex-1 px-4 py-2 bg-[#2A2A2A] border border-[#2A2A2A] rounded-md text-[#E0E0E0] placeholder-[#BDBDBD] focus:outline-none focus:border-[#4FC3F7]","data-testid":"input-chatbot",disabled:s}),_.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-[#4FC3F7] text-white rounded-md hover:bg-[#3BA7D1] disabled:opacity-50","data-testid":"button-send-chatbot",children:_.jsx(Da,{name:"send",size:18})})]})})]})}function A$({workspaceId:n,pdfId:t,selectedAnnotation:e}){const[i,r]=P.useState("main");return _.jsxs("div",{className:"w-[360px] bg-[#1E1E1E] border-l border-[#2A2A2A] flex flex-col h-full",children:[_.jsxs("div",{className:"sidebar-tabs flex border-b border-[#2A2A2A]",children:[_.jsx("button",{className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${i==="main"?"text-[#4FC3F7] border-b-2 border-[#4FC3F7]":"text-[#BDBDBD] hover:text-[#E0E0E0]"}`,onClick:()=>r("main"),"data-testid":"button-tab-main",children:"Main Chat"}),_.jsx("button",{className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${i==="threads"?"text-[#4FC3F7] border-b-2 border-[#4FC3F7]":"text-[#BDBDBD] hover:text-[#E0E0E0]"}`,onClick:()=>r("threads"),"data-testid":"button-tab-threads",children:"Threaded Discussions"}),_.jsx("button",{className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${i==="bot"?"text-[#4FC3F7] border-b-2 border-[#4FC3F7]":"text-[#BDBDBD] hover:text-[#E0E0E0]"}`,onClick:()=>r("bot"),"data-testid":"button-tab-bot",children:"AI ChatBot"})]}),_.jsxs("div",{className:"sidebar-content flex-1 overflow-hidden",children:[i==="main"&&_.jsx(y$,{workspaceId:n}),i==="threads"&&_.jsx(w$,{workspaceId:n,pdfId:t,selectedAnnotation:e}),i==="bot"&&_.jsx(b$,{workspaceId:n})]})]})}function x$(){const[,n]=qM("/workspace/:id"),t=n==null?void 0:n.id,{workspaces:e,getPdfs:i,addPdf:r}=bT(),s=e.find(m=>m.id===t),[o,l]=P.useState([]),[c,u]=P.useState(null),[h,d]=P.useState(uu.SELECT),[f,g]=P.useState(null),b=P.useRef(null);P.useEffect(()=>{if(t){const m=i(t);l(m),m.length>0&&!c&&u(m[0])}},[t,i]);const v=m=>{var T;const w=(T=m.target.files)==null?void 0:T[0];if(!w||!t)return;const x=URL.createObjectURL(w),E=r(t,w.name,x),C=i(t);l(C),u(E)},S=m=>{if(h===uu.SELECT)return;const w={id:sn(),selectionId:sn(),type:h,pageNumber:m.pageNumber,rects:m.rects,text:m.text,createdAt:new Date().toISOString()},E=[...te.get(ue.ANNOTATIONS(t,c.id))||[],w];te.set(ue.ANNOTATIONS(t,c.id),E),g(w)};return s?_.jsxs("div",{className:"min-h-screen bg-[#121212] flex flex-col",children:[_.jsx(I0,{}),_.jsx("div",{className:"border-b border-[#2A2A2A] bg-[#1E1E1E] px-6 py-4",children:_.jsxs("div",{className:"max-w-[1400px] mx-auto flex justify-between items-center",children:[_.jsx("h1",{className:"text-2xl font-bold text-[#E0E0E0]",children:s.name}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("div",{className:"w-8 h-8 rounded-full bg-[#4FC3F7] flex items-center justify-center text-white text-sm",children:"A"}),_.jsx("div",{className:"w-8 h-8 rounded-full bg-[#EF5350] flex items-center justify-center text-white text-sm",children:"B"})]})]})}),_.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[_.jsxs("div",{className:"w-64 bg-[#1E1E1E] border-r border-[#2A2A2A] flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b border-[#2A2A2A]",children:[_.jsx("input",{ref:b,type:"file",accept:"application/pdf",onChange:v,className:"hidden","data-testid":"input-file-upload"}),_.jsxs(vc,{onClick:()=>{var m;return(m=b.current)==null?void 0:m.click()},variant:"primary",className:"w-full flex items-center justify-center gap-2","data-testid":"button-upload-pdf",children:[_.jsx(Da,{name:"upload",size:18}),"Upload PDF"]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:o.map(m=>_.jsx("button",{onClick:()=>u(m),className:`w-full text-left p-3 rounded-md transition-colors ${(c==null?void 0:c.id)===m.id?"bg-[#4FC3F7] text-white":"bg-[#2A2A2A] text-[#E0E0E0] hover:bg-[#3A3A3A]"}`,"data-testid":`button-select-pdf-${m.id}`,children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx(Da,{name:"file",size:16}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-sm font-medium truncate",children:m.name}),_.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(m.uploadedAt).toLocaleDateString()})]})]})},m.id))})]}),_.jsx("div",{className:"flex-1 flex flex-col",children:c?_.jsxs(_.Fragment,{children:[_.jsx(m$,{activeMode:h,onModeChange:d}),_.jsx(g$,{url:c.url,onTextSelect:S})]}):_.jsx("div",{className:"flex-1 flex items-center justify-center",children:_.jsx("p",{className:"text-[#BDBDBD]",children:o.length===0?"Upload a PDF to get started":"Select a PDF from the sidebar"})})}),_.jsx(A$,{workspaceId:t,pdfId:c==null?void 0:c.id,selectedAnnotation:f})]})]}):_.jsxs("div",{className:"min-h-screen bg-[#121212]",children:[_.jsx(I0,{}),_.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:_.jsx("p",{className:"text-[#BDBDBD]",children:"Workspace not found"})})]})}function S$(){return _.jsxs("div",{className:"min-h-screen bg-[#121212] flex flex-col",children:[_.jsx(I0,{}),_.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:_.jsxs("div",{className:"max-w-[600px] w-full text-center",children:[_.jsx("h1",{className:"text-3xl font-bold text-[#E0E0E0] mb-8",children:"Contact Us"}),_.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2A2A2A] rounded-lg p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-[#E0E0E0] mb-2",children:"Email"}),_.jsx("a",{href:"mailto:contact@genscholar.com",className:"text-[#4FC3F7] hover:text-[#3BA7D1]","data-testid":"link-email",children:"contact@genscholar.com"})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-[#E0E0E0] mb-4",children:"Social Media"}),_.jsxs("div",{className:"flex items-center justify-center gap-6",children:[_.jsxs("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 text-[#4FC3F7] hover:text-[#3BA7D1]","data-testid":"link-instagram",children:[_.jsx("img",{src:xT,alt:"Instagram",className:"w-8 h-8"}),_.jsx("span",{className:"text-sm",children:"Instagram"})]}),_.jsxs("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 text-[#4FC3F7] hover:text-[#3BA7D1]","data-testid":"link-twitter",children:[_.jsx("img",{src:ST,alt:"Twitter",className:"w-8 h-8"}),_.jsx("span",{className:"text-sm",children:"Twitter"})]})]})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-semibold text-[#E0E0E0] mb-2",children:"Support"}),_.jsx("p",{className:"text-[#BDBDBD]",children:"For technical support or questions about using GenScholar, please reach out via email or social media."})]})]})]})})]})}function E$(){const[,n]=Pg(),{logout:t}=My();return P.useEffect(()=>{t(),n("/")},[t,n]),_.jsx("div",{className:"min-h-screen bg-[#121212] flex items-center justify-center",children:_.jsx("p",{className:"text-[#E0E0E0]",children:"Logging out..."})})}function GE({component:n,...t}){const{isAuthenticated:e,loading:i}=My();return i?_.jsx("div",{className:"min-h-screen bg-[#121212] flex items-center justify-center",children:_.jsx("p",{className:"text-[#E0E0E0]",children:"Loading..."})}):e?_.jsx(n,{...t}):_.jsx(ZM,{to:"/auth"})}function _$(){return P.useEffect(()=>{document.documentElement.classList.add("dark"),aL()},[]),_.jsxs(QM,{children:[_.jsx(za,{path:"/",component:lL}),_.jsx(za,{path:"/auth",component:DB}),_.jsx(za,{path:"/contact",component:S$}),_.jsx(za,{path:"/logout",component:E$}),_.jsx(za,{path:"/dashboard",children:()=>_.jsx(GE,{component:IB})}),_.jsx(za,{path:"/workspace/:id",children:n=>_.jsx(GE,{component:x$,...n})}),_.jsx(za,{children:_.jsx("div",{className:"min-h-screen bg-[#121212] flex items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-4xl font-bold text-[#E0E0E0] mb-4",children:"404"}),_.jsx("p",{className:"text-[#BDBDBD]",children:"Page not found"})]})})})]})}function C$(){return _.jsx(JM,{children:_.jsx(oL,{children:_.jsx(_$,{})})})}const zP=document.getElementById("root");if(!zP)throw new Error("Failed to find the root element");aT(zP).render(_.jsx(P.StrictMode,{children:_.jsx(C$,{})}));
